"use strict";(self.webpackChunkcritical_web=self.webpackChunkcritical_web||[]).push([[973],{1921:(Et,ue,h)=>{h.r(ue),h.d(ue,{ResourcesModule:()=>Qa});var M=h(6814),t=h(9212),x=h(3680);const Yt=["*"],Nt=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],qt=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],Jt=new t.OlP("MAT_CARD_CONFIG");let Le=(()=>{class s{constructor(e){this.appearance=e?.appearance||"raised"}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(Jt,8))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(n,i){2&n&&t.ekj("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Yt,decls:1,vars:0,template:function(n,i){1&n&&(t.F$t(),t.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return s})(),Qe=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275dir=t.lG2({type:s,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return s})(),We=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275dir=t.lG2({type:s,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return s})(),Ve=(()=>{class s{constructor(){this.align="start"}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275dir=t.lG2({type:s,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(n,i){2&n&&t.ekj("mat-mdc-card-actions-align-end","end"===i.align)},inputs:{align:"align"},exportAs:["matCardActions"]})}return s})(),ze=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:qt,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(n,i){1&n&&(t.F$t(Nt),t.Hsn(0),t.TgZ(1,"div",0),t.Hsn(2,1),t.qZA(),t.Hsn(3,2))},encapsulation:2,changeDetection:0})}return s})(),$e=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275dir=t.lG2({type:s,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-mdc-card-avatar"]})}return s})(),zt=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[x.BQ,M.ez,x.BQ]})}return s})();var $t=h(6381),S=h(6223),K=h(3651),V=h(4170),Ke=h(6702),ne=h(5643),Kt=h(9388),ie=h(2495),pe=h(8645);class Xt{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(o=!1,e,n=!0,i){this._multiple=o,this._emitChanges=n,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new pe.x,e&&e.length&&(o?e.forEach(a=>this._markSelected(a)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...o){this._verifyValueAssignment(o),o.forEach(n=>this._markSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...o){this._verifyValueAssignment(o),o.forEach(n=>this._unmarkSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...o){this._verifyValueAssignment(o);const e=this.selected,n=new Set(o);o.forEach(a=>this._markSelected(a)),e.filter(a=>!n.has(a)).forEach(a=>this._unmarkSelected(a));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(o){return this.isSelected(o)?this.deselect(o):this.select(o)}clear(o=!0){this._unmarkAll();const e=this._hasQueuedChanges();return o&&this._emitChangeEvent(),e}isSelected(o){return this._selection.has(this._getConcreteValue(o))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(o){this._multiple&&this.selected&&this._selected.sort(o)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(o){o=this._getConcreteValue(o),this.isSelected(o)||(this._multiple||this._unmarkAll(),this.isSelected(o)||this._selection.add(o),this._emitChanges&&this._selectedToEmit.push(o))}_unmarkSelected(o){o=this._getConcreteValue(o),this.isSelected(o)&&(this._selection.delete(o),this._emitChanges&&this._deselectedToEmit.push(o))}_unmarkAll(){this.isEmpty()||this._selection.forEach(o=>this._unmarkSelected(o))}_verifyValueAssignment(o){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(o){if(this.compareWith){for(let e of this._selection)if(this.compareWith(o,e))return e;return o}return o}}var U=h(6028),en=h(4911),Me=h(3019),Xe=h(7921),et=h(4664),tt=h(8180),F=h(2181),nt=h(7398),tn=h(3997),X=h(9773),E=h(6825);const nn=["trigger"],rn=["panel"];function an(s,o){if(1&s&&(t.TgZ(0,"span",9),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(e.placeholder)}}function sn(s,o){1&s&&t.Hsn(0)}function on(s,o){if(1&s&&(t.TgZ(0,"span",11),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.triggerValue)}}function cn(s,o){if(1&s&&(t.TgZ(0,"span",10),t.YNc(1,sn,1,0)(2,on,2,1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.um2(1,e.customTrigger?1:2)}}function ln(s,o){if(1&s){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",12,13),t.NdJ("@transformPanel.done",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a._handleKeydown(i))}),t.Hsn(2,1),t.qZA()}if(2&s){const e=t.oxw();t.Gre("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),t.Q6J("ngClass",e.panelClass)("@transformPanel","showing"),t.uIk("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const dn=[[["mat-select-trigger"]],"*"],un=["mat-select-trigger","*"],hn={transformPanelWrap:(0,E.X$)("transformPanelWrap",[(0,E.eR)("* => void",(0,E.IO)("@transformPanel",[(0,E.pV)()],{optional:!0}))]),transformPanel:(0,E.X$)("transformPanel",[(0,E.SB)("void",(0,E.oB)({opacity:0,transform:"scale(1, 0.8)"})),(0,E.eR)("void => showing",(0,E.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,E.oB)({opacity:1,transform:"scale(1, 1)"}))),(0,E.eR)("* => void",(0,E.jt)("100ms linear",(0,E.oB)({opacity:0})))])};let it=0;const rt=new t.OlP("mat-select-scroll-strategy"),gn=new t.OlP("MAT_SELECT_CONFIG"),mn={provide:rt,deps:[K.aV],useFactory:function pn(s){return()=>s.scrollStrategies.reposition()}},fn=new t.OlP("MatSelectTrigger");class _n{constructor(o,e){this.source=o,this.value=e}}const vn=(0,x.Kr)((0,x.sb)((0,x.Id)((0,x.FD)(class{constructor(s,o,e,n,i){this._elementRef=s,this._defaultErrorStateMatcher=o,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i,this.stateChanges=new pe.x}}))));let yn=(()=>{class s extends vn{_scrollOptionIntoView(e){const n=this.options.toArray()[e];if(n){const i=this.panel.nativeElement,a=(0,x.CB)(e,this.options,this.optionGroups),r=n._getHostElement();i.scrollTop=0===e&&1===a?0:(0,x.jH)(r.offsetTop,r.offsetHeight,i.scrollTop,i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new _n(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=(0,ie.Ig)(e),this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(S.kI.required)??!1}set required(e){this._required=(0,ie.Ig)(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=(0,ie.Ig)(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=(0,ie.Ig)(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=(0,ie.su)(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}constructor(e,n,i,a,r,c,l,d,g,m,T,b,D,G){super(r,a,l,d,m),this._viewportRuler=e,this._changeDetectorRef=n,this._ngZone=i,this._dir=c,this._parentFormField=g,this._liveAnnouncer=D,this._defaultOptions=G,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(A,B)=>A===B,this._uid="mat-select-"+it++,this._triggerAriaLabelledBy=null,this._destroy=new pe.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+it++,this._panelDoneAnimatingStream=new pe.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this.optionSelectionChanges=(0,en.P)(()=>{const A=this.options;return A?A.changes.pipe((0,Xe.O)(A),(0,et.w)(()=>(0,Me.T)(...A.map(B=>B.onSelectionChange)))):this._ngZone.onStable.pipe((0,tt.q)(1),(0,et.w)(()=>this.optionSelectionChanges))}),this.openedChange=new t.vpe,this._openedStream=this.openedChange.pipe((0,F.h)(A=>A),(0,nt.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,F.h)(A=>!A),(0,nt.U)(()=>{})),this.selectionChange=new t.vpe,this.valueChange=new t.vpe,this._trackedModal=null,this._skipPredicate=A=>!this.panelOpen&&A.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),null!=G?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=G.typeaheadDebounceInterval),this._scrollStrategyFactory=b,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(T)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Xt(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,tn.x)(),(0,X.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe((0,X.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,X.R)(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe((0,Xe.O)(null),(0,X.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._canOpen()&&(this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck()),this.stateChanges.next()}_applyModalPanelOwnership(){const e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const n=`${this.id}-panel`;this._trackedModal&&(0,ne.iD)(this._trackedModal,"aria-owns",n),(0,ne.Zf)(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){this._trackedModal&&((0,ne.iD)(this._trackedModal,"aria-owns",`${this.id}-panel`),this._trackedModal=null)}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched()),this.stateChanges.next()}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,i=n===U.JH||n===U.LH||n===U.oh||n===U.SV,a=n===U.K5||n===U.L_,r=this._keyManager;if(!r.isTyping()&&a&&!(0,U.Vb)(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){const c=this.selected;r.onKeydown(e);const l=this.selected;l&&c!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,i=e.keyCode,a=i===U.JH||i===U.LH,r=n.isTyping();if(a&&e.altKey)e.preventDefault(),this.close();else if(r||i!==U.K5&&i!==U.L_||!n.activeItem||(0,U.Vb)(e))if(!r&&this._multiple&&i===U.A&&e.ctrlKey){e.preventDefault();const c=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(c?l.select():l.deselect())})}else{const c=n.activeItemIndex;n.onKeydown(e),this._multiple&&a&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==c&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,tt.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_getOverlayWidth(e){return"auto"===this.panelWidth?(e instanceof K.xu?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:null===this.panelWidth?"":this.panelWidth}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new ne.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=(0,Me.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,X.R)(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Me.T)(...this.options.map(n=>n._stateChanges)).pipe((0,X.R)(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){const i=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,i)=>this.sortComparator?this.sortComparator(n,i,e):e.indexOf(n)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let n;n=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){e=n;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(Ke.rL),t.Y36(t.sBO),t.Y36(t.R0b),t.Y36(x.rD),t.Y36(t.SBq),t.Y36(Kt.Is,8),t.Y36(S.F,8),t.Y36(S.sg,8),t.Y36(V.G_,8),t.Y36(S.a5,10),t.$8M("tabindex"),t.Y36(rt),t.Y36(ne.Kd),t.Y36(gn,8))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["mat-select"]],contentQueries:function(n,i,a){if(1&n&&(t.Suo(a,fn,5),t.Suo(a,x.ey,5),t.Suo(a,x.K7,5)),2&n){let r;t.iGM(r=t.CRH())&&(i.customTrigger=r.first),t.iGM(r=t.CRH())&&(i.options=r),t.iGM(r=t.CRH())&&(i.optionGroups=r)}},viewQuery:function(n,i){if(1&n&&(t.Gf(nn,5),t.Gf(rn,5),t.Gf(K.pI,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.trigger=a.first),t.iGM(a=t.CRH())&&(i.panel=a.first),t.iGM(a=t.CRH())&&(i._overlayDir=a.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox","ngSkipHydration","",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,i){1&n&&t.NdJ("keydown",function(r){return i._handleKeydown(r)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&n&&(t.uIk("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),t.ekj("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",hideSingleSelectionIndicator:"hideSingleSelectionIndicator",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[t._Bn([{provide:V.Eo,useExisting:s},{provide:x.HF,useExisting:s}]),t.qOj,t.TTD],ngContentSelectors:un,decls:11,vars:8,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(n,i){if(1&n&&(t.F$t(dn),t.TgZ(0,"div",0,1),t.NdJ("click",function(){return i.toggle()}),t.TgZ(3,"div",2),t.YNc(4,an,2,1,"span",3)(5,cn,3,1),t.qZA(),t.TgZ(6,"div",4)(7,"div",5),t.O4$(),t.TgZ(8,"svg",6),t._UZ(9,"path",7),t.qZA()()()(),t.YNc(10,ln,3,9,"ng-template",8),t.NdJ("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&n){const a=t.MAs(1);t.xp6(3),t.uIk("id",i._valueId),t.xp6(1),t.um2(4,i.empty?4:5),t.xp6(6),t.Q6J("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||a)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[M.mk,K.pI,K.xu],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[hn.transformPanel]},changeDetection:0})}return s})(),Cn=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({providers:[mn],imports:[M.ez,K.U8,x.Ng,x.BQ,Ke.ZD,V.lN,x.Ng,x.BQ]})}return s})();var Y=h(7586),bn=h(5300),wn=h(5836),xn=h(7778),q=h(3633);let Tn=(()=>{class s{set project(e){this._project=e}constructor(){this.lastClickedShift=null,this.shiftOn=!1,this.ctrlOn=!1,this.firstIndex=null}keyDown(e){16===e&&(this.shiftOn=!0,this.firstIndex=this.lastClickedShift),17===e&&(this.ctrlOn=!0)}keyUp(e){16===e&&(this.shiftOn=!1),17===e&&(this.firstIndex=this.lastClickedShift,this.ctrlOn=!1)}itemClicked(e,n,i){if(null===this.firstIndex&&(this.firstIndex=n),!this.shiftOn&&!this.ctrlOn)for(const a of i.activities)a.assign.isSelected=!1;if(e.assign.isSelected=!e.assign.isSelected,this.lastClickedShift!==n&&this.shiftOn){const a=[n,this.firstIndex].sort((l,d)=>l-d),c=a[1];for(let l=a[0];l<c;++l)i.activities[l].assign.isSelected=!0}return this.lastClickedShift=n,i}resourceClicked(e,n,i){if(null===this.firstIndex&&(this.firstIndex=n),!this.shiftOn&&!this.ctrlOn)for(const a of i.resources)a.assign.isSelected=!1;if(e.assign.isSelected=!e.assign.isSelected,this.lastClickedShift!==n&&this.shiftOn){const a=[n,this.firstIndex].sort((l,d)=>l-d),c=a[1];for(let l=a[0];l<c;++l)i.resources[l].assign.isSelected=!0}return this.lastClickedShift=n,i}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var st=h(9635),Oe=h(325);let Pe=(()=>{class s{constructor(e,n,i){this.resourceSerializer=e,this.colorFactory=n,this.summarySerializer=i}addResource(e,n){if(void 0===e||""===e)return;const i=this.resourceSerializer.fromJson();i.profile.name=e;const a=e.split(" ");let r="";void 0!==a&&(r=a.reduce((d,g)=>d+g[0],"")),i.profile.initials=r;const c=n.length+1,l=this.colorFactory.getColor("common",c);i.view.color=l,i.id=-1*c,n.push(i)}getSummary(e){const n=this.summarySerializer.fromJson();return n.color=e.view.color,n.id=e.id,n.initials=e.profile.initials,n.name=e.profile.name,n}getResourceFromSummary(e,n){return n.find(a=>a.id===e.id)}static#e=this.\u0275fac=function(n){return new(n||s)(t.LFG(st.H4),t.LFG(Oe.r),t.LFG(st.k1))};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var ot=h(6265);let ct=(()=>{class s{constructor(e,n,i){this.colorFactory=e,this.phaseSerializer=n,this.phaseSummarySerializer=i}addPhase(e,n){const i=this.phaseSerializer.fromJson();i.name=e;const r=this.colorFactory.getColor("contrast",n.length);i.view.color=r,n.push(i)}getSummary(e){const n=this.phaseSummarySerializer.fromJson();return n.color=e.view.color,n.id=e.id,n.name=e.name,n.shortName=e.shortName,n}static#e=this.\u0275fac=function(n){return new(n||s)(t.LFG(Oe.r),t.LFG(ot.Ek),t.LFG(ot.mK))};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var lt=h(2069);let Ae=(()=>{class s{constructor(e,n,i){this.colorFactory=e,this.roleSerializer=n,this.roleSummarySerializer=i}addRole(e,n){const i=this.roleSerializer.fromJson();i.name=e;const r=this.colorFactory.getColor("common",n.length);i.view.color=r,n.push(i)}getSummary(e){const n=this.roleSummarySerializer.fromJson();return n.color=e.view.color,n.id=e.id,n.name=e.name,n}static#e=this.\u0275fac=function(n){return new(n||s)(t.LFG(Oe.r),t.LFG(lt.Jl),t.LFG(lt.tB))};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),ge=(()=>{class s{set colorBy(e){this._colorBy=e}get colorBy(){return this._colorBy}set colorByResourceView(e){this._colorByResourceView=e}constructor(e,n,i,a){this.selectShortcuts=e,this.resourceFactory=n,this.phaseFactory=i,this.roleFactory=a,this._defaultColor={color:null,backgroundcolor:null},this._defaultColorTag={backgroundcolor:"#bbbbbb",color:"white"},this._colorByResourceView="none"}getColorClassForActivity(e){return"resource"===this._colorBy&&e.assign.resources.length>0?e.assign.resources[0].color:"phase"===this._colorBy&&e.assign.phases.length>0?e.assign.phases[0].color:this._defaultColor}getColorClassForResource(e){if("role"===this._colorByResourceView){if(e.assign.roles.length>0)return e.assign.roles[0].color}else if("phase"===this._colorByResourceView&&e.assign.phases.length>0)return e.assign.phases[0].color;return this._defaultColor}selectTagResource(e,n,i,a){const r=this._colorByResourceView===i||"none"===this._colorByResourceView;if("role"===i?this._colorByResourceView="role":"phase"===i&&(this._colorByResourceView="phase"),r)n.view.isSelected=!n.view.isSelected;else{for(const c of a)c.view.isSelected=!1;n.view.isSelected=!0,this.deselectAll(e)}}getTagColor(e){}selectTag(e,n,i,a){const r=this._colorBy===i||"none"===this._colorBy;if("resource"===i?this._colorBy="resource":"phase"===i&&(this._colorBy="phase"),!r){for(const c of a)c.view.isSelected=!1;n.view.isSelected=!0,this.deselectAll(e)}n.view.isSelected=!n.view.isSelected}selectResourceTag(e,n,i,a){const r=this._colorByResourceView===i||"none"===this._colorByResourceView;if("role"===i?this._colorByResourceView="role":"phase"===i&&(this._colorByResourceView="phase"),r)n.view.isSelected=!n.view.isSelected;else{for(const c of a)c.view.isSelected=!1;n.view.isSelected=!0,this.deselectAll(e)}}assignTagsToActivities(e,n,i){"resources"===e?this._colorBy="resource":"phases"===e&&(this._colorBy="phase");const a=i.length?i:n.activities.filter(r=>r.assign.isSelected);if("resources"===e){const r=n.resources.filter(c=>c.view.isSelected);for(const c of a)for(const l of r)if(void 0===c.assign.resources.find(g=>g.id===l.id)){const g=this.resourceFactory.getSummary(l);c.assign.resources.push(g)}}else if("phases"===e){const r=n.phases.filter(c=>c.view.isSelected);for(const c of a)for(const l of r)if(void 0===c.assign.phases.find(g=>g.id===l.id)){const g=this.phaseFactory.getSummary(l);c.assign.phases.push(g)}}this.deselectAll(n)}assignTagsToResources(e,n){if("roles"===e?this._colorByResourceView="role":"phases"===e&&(this._colorByResourceView="phase"),"roles"===e){const i=n.roles.filter(r=>r.view.isSelected),a=n.resources.filter(r=>r.assign.isSelected);for(const r of a)for(const c of i)if(void 0===r.assign.roles.find(d=>d.id===c.id)){const d=this.roleFactory.getSummary(c);r.assign.roles.push(d)}}else if("phases"===e){const i=n.phases.filter(r=>r.view.isSelected),a=n.resources.filter(r=>r.assign.isSelected);for(const r of a)for(const c of i)if(void 0===r.assign.phases.find(d=>d.id===c.id)){const d=this.phaseFactory.getSummary(c);r.assign.phases.push(d)}}this.deselectAllResources(n)}removeTags(e,n,i){if("activities"===i)if("resources"===n?this._colorBy="resource":"phases"===n&&(this._colorBy="phase"),"resources"===n){const a=e.activities.filter(r=>r.assign.isSelected);for(const r of a)r.assign.resources=[]}else if("phases"===n){const a=e.activities.filter(r=>r.assign.isSelected);for(const r of a)r.assign.phases=[]}if("resources"===i)if("roles"===n?this._colorByResourceView="role":"phases"===n&&(this._colorByResourceView="phase"),"roles"===n){const a=e.resources.filter(r=>r.assign.isSelected);for(const r of a)r.assign.roles=[]}else if("phases"===n){const a=e.resources.filter(r=>r.assign.isSelected);for(const r of a)r.assign.phases=[]}this.deselectAll(e)}getColor(e,n){return"resource"===this._colorBy&&"resource"===n&&e.view.isSelected||"phase"===this._colorBy&&"phase"===n&&e.view.isSelected?e.view.color:this._defaultColorTag}getColorResource(e,n){return"role"===this._colorByResourceView&&"role"===n&&e.view.isSelected||"phase"===this._colorByResourceView&&"phase"===n&&e.view.isSelected?e.view.color:this._defaultColorTag}deselectAll(e){e.activities.forEach(n=>n.assign.isSelected=!1),e.resources.forEach(n=>n.view.isSelected=!1),e.phases.forEach(n=>n.view.isSelected=!1)}deselectAllResources(e){e.resources.forEach(n=>n.assign.isSelected=!1),e.roles.forEach(n=>n.view.isSelected=!1),e.phases.forEach(n=>n.view.isSelected=!1)}itemClicked(e,n,i){return this.selectShortcuts.itemClicked(e,n,i)}resourceClicked(e,n,i){return this.selectShortcuts.resourceClicked(e,n,i)}keyUp(e){this.selectShortcuts.keyUp(e)}keyDown(e){this.selectShortcuts.keyDown(e)}selectAll(e,n){if("resources"===n){this._colorBy="resource";for(const i of e.resources)i.view.isSelected=!0}if("phases"===n){this._colorBy="phase";for(const i of e.phases)i.view.isSelected=!0}}selectNone(e,n){if("resources"===n){this._colorBy="resource";for(const i of e.resources)i.view.isSelected=!1}if("phases"===n){this._colorBy="phase";for(const i of e.phases)i.view.isSelected=!1}}unselect(e,n){if("resources"===n){const i=e.activities.filter(a=>a.assign.isSelected);for(const a of i)a.assign.resources=[]}else if("phases"===n){const i=e.activities.filter(a=>a.assign.isSelected);for(const a of i)a.assign.phases=[]}}static#e=this.\u0275fac=function(n){return new(n||s)(t.LFG(Tn),t.LFG(Pe),t.LFG(ct),t.LFG(Ae))};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var On=h(1339),dt=h(617),me=h(5616),fe=h(2032);function Pn(s,o){if(1&s&&(t.TgZ(0,"span",46),t._uU(1),t.qZA()),2&s){const e=o.$implicit;t.xp6(1),t.Oqu(e.initials)}}function An(s,o){if(1&s&&(t.TgZ(0,"span",47),t._uU(1),t.qZA()),2&s){const e=o.$implicit;t.xp6(1),t.Oqu(e.name)}}function kn(s,o){if(1&s&&(t.TgZ(0,"span",46),t._uU(1),t.qZA()),2&s){const e=o.$implicit;t.xp6(1),t.Oqu(e.initials)}}function Zn(s,o){if(1&s&&(t.TgZ(0,"span",47),t._uU(1),t.qZA()),2&s){const e=o.$implicit;t.xp6(1),t.Oqu(e.name)}}function Sn(s,o){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",23),t.NdJ("click",function(){const i=t.CHM(e),a=i.$implicit,r=i.index,c=t.oxw(3);return t.KtG(c.selectActivity(a,r))})("keydown",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.keyDown(i))})("keyup",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.keyUp(i))}),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",15)(9,"span",24),t._uU(10,"(s)"),t.qZA(),t.TgZ(11,"span",24),t._uU(12,"(e)"),t.qZA(),t.TgZ(13,"span",25),t._uU(14),t.qZA()(),t.TgZ(15,"td",26),t._uU(16),t._UZ(17,"i",27),t.qZA(),t.TgZ(18,"td"),t._uU(19),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td")(25,"div",28),t.YNc(26,Pn,2,1,"span",29),t.qZA()(),t.TgZ(27,"td")(28,"div",28),t.YNc(29,An,2,1,"span",30),t.qZA()()(),t.TgZ(30,"tr",31)(31,"td"),t._uU(32),t.qZA(),t.TgZ(33,"td")(34,"input",32),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.profile.name=i)}),t.qZA()(),t.TgZ(35,"td")(36,"input",33),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.profile.depends_on=i)}),t.qZA()(),t.TgZ(37,"td")(38,"input",34),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.profile.duration=i)})("blur",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.updateProject())}),t.qZA()(),t.TgZ(39,"td")(40,"mat-datepicker-toggle",35),t._UZ(41,"mat-icon",36),t.qZA(),t.TgZ(42,"input",37,38),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.profile.planned_completion_date_dt=i)})("ngModelChange",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.updatePCDDate(a.profile.planned_completion_date_dt,a.profile))}),t.qZA(),t.TgZ(44,"mat-datepicker",39,40),t.NdJ("closed",function(){t.CHM(e);const i=t.MAs(43);return t.KtG(i.blur())}),t.qZA()(),t.TgZ(46,"td")(47,"mat-datepicker-toggle",35),t._UZ(48,"mat-icon",36),t.qZA(),t.TgZ(49,"input",37,41),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.profile.finish_dt=i)})("ngModelChange",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.updateFinishDate(a.profile.finish_dt,a.profile))}),t.qZA(),t.TgZ(51,"mat-datepicker",39,42),t.NdJ("closed",function(){t.CHM(e);const i=t.MAs(50);return t.KtG(i.blur())}),t.qZA()(),t.TgZ(53,"td")(54,"mat-datepicker-toggle",35),t._UZ(55,"mat-icon",36),t.qZA(),t.TgZ(56,"input",37,43),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.profile.start_date_dt=i)})("ngModelChange",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.updateStartDate(a.profile.start_date_dt,a.profile))}),t.qZA(),t.TgZ(58,"mat-datepicker",39,44),t.NdJ("closed",function(){t.CHM(e);const i=t.MAs(57);return t.KtG(i.blur())}),t.qZA()(),t.TgZ(60,"td")(61,"input",32),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.chartInfo.tf=i)}),t.qZA()(),t.TgZ(62,"td",45)(63,"div",28),t.YNc(64,kn,2,1,"span",29),t.qZA()(),t.TgZ(65,"td",45)(66,"div",28),t.YNc(67,Zn,2,1,"span",30),t.qZA()()(),t.BQk()}if(2&s){const e=o.$implicit,n=t.MAs(45),i=t.MAs(52),a=t.MAs(59),r=t.oxw(3);t.xp6(1),t.Udp("color",r.getColorClassForActivity(e).color)("background-color",r.getColorClassForActivity(e).backgroundcolor),t.ekj("selected",e.assign.isSelected)("assigned",r.isAssigned(e)),t.Q6J("hidden",r.isEditing),t.xp6(2),t.Oqu(e.profile.id),t.xp6(2),t.Oqu(e.profile.name),t.xp6(2),t.Oqu(e.profile.duration),t.xp6(2),t.Q6J("hidden",!e.assign.noDependencies),t.xp6(2),t.Q6J("hidden",!e.assign.noGoto),t.xp6(2),t.s9C("title",e.profile.depends_on),t.xp6(1),t.Oqu(e.profile.depends_on),t.xp6(2),t.hij(" ",e.profile.planned_completion_date," "),t.xp6(1),t.Q6J("hidden",!e.assign.isStartBranch),t.xp6(2),t.Oqu(e.profile.finish),t.xp6(2),t.Oqu(e.profile.start_date),t.xp6(2),t.Oqu(e.chartInfo.risk),t.xp6(3),t.Q6J("ngForOf",e.assign.resources),t.xp6(3),t.Q6J("ngForOf",e.assign.phases),t.xp6(1),t.Q6J("hidden",!r.isEditing),t.xp6(2),t.Oqu(e.profile.id),t.xp6(2),t.Q6J("ngModel",e.profile.name),t.xp6(2),t.Q6J("value",e.profile.depends_on)("ngModel",e.profile.depends_on),t.xp6(2),t.Q6J("value",e.profile.duration)("ngModel",e.profile.duration),t.xp6(2),t.Q6J("for",n),t.xp6(2),t.Q6J("matDatepicker",n)("ngModel",e.profile.planned_completion_date_dt),t.xp6(5),t.Q6J("for",i),t.xp6(2),t.Q6J("matDatepicker",i)("ngModel",e.profile.finish_dt),t.xp6(5),t.Q6J("for",a),t.xp6(2),t.Q6J("matDatepicker",a)("ngModel",e.profile.start_date_dt),t.xp6(5),t.Q6J("ngModel",e.chartInfo.tf),t.xp6(3),t.Q6J("ngForOf",e.assign.resources),t.xp6(3),t.Q6J("ngForOf",e.assign.phases)}}function Dn(s,o){if(1&s&&(t.TgZ(0,"div",9,10)(2,"table",11)(3,"thead")(4,"tr")(5,"th",12),t._uU(6,"Id"),t.qZA(),t.TgZ(7,"th",13),t._uU(8,"Activity"),t.qZA(),t.TgZ(9,"th",14),t._uU(10,"Duration"),t.qZA(),t.TgZ(11,"th",15),t._uU(12,"Dependencies"),t.qZA(),t.TgZ(13,"th",16),t._uU(14,"Planned Compl Date"),t.qZA(),t.TgZ(15,"th",17),t._uU(16,"Finish Date"),t.qZA(),t.TgZ(17,"th",18),t._uU(18,"Start Date"),t.qZA(),t.TgZ(19,"th",19),t._uU(20,"Risk"),t.qZA(),t.TgZ(21,"th",20),t._uU(22,"Resources"),t.qZA(),t.TgZ(23,"th",21),t._uU(24,"Phase"),t.qZA()()(),t.TgZ(25,"tbody")(26,"tr"),t._UZ(27,"td")(28,"td")(29,"td")(30,"td")(31,"td")(32,"td")(33,"td")(34,"td")(35,"td"),t.qZA(),t.YNc(36,Sn,68,42,"ng-container",22),t.qZA()()()),2&s){const e=t.oxw(2);t.xp6(36),t.Q6J("ngForOf",e.activities)}}function In(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"i",4),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.isEditing=!0)}),t.qZA(),t.TgZ(4,"i",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.isEditing=!1)}),t.qZA(),t.TgZ(5,"i",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sortBranches())}),t.qZA(),t.TgZ(6,"i",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.sortIds())}),t.qZA()(),t.YNc(7,Dn,37,1,"div",8),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(3),t.Q6J("hidden",e.isEditing),t.xp6(1),t.Q6J("hidden",!e.isEditing),t.xp6(1),t.Q6J("hidden",!e.sortByBranch),t.xp6(1),t.Q6J("hidden",e.sortByBranch),t.xp6(1),t.Q6J("ngIf",void 0!==e.project)}}let Rn=(()=>{class s{constructor(e,n,i){this.dashboard=e,this.aManager=n,this.activitySorter=i,this.isEditing=!1,this.sortByBranch=!0,this.activities=[]}ngOnInit(){this.subscription=this.dashboard.activeProject$.pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.project=e;const n=this.project.profile.view.lassoedLinks;this.activities=n.length>0?this.project.activities.filter(i=>n.includes(i.profile.id)):this.project.activities})}isAssigned(e){let n=null;n="resource";let i=!1;return i=e.assign.resources.length>0,i}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getColorClassForActivity(e){return this.aManager.getColorClassForActivity(e)}getTagColor(e){this.aManager.getTagColor(e)}selectActivity(e,n){this.aManager.itemClicked(e,n,this.project)}keyUp(e){this.aManager.keyUp(e.which)}keyDown(e){return e.preventDefault(),e.stopPropagation(),this.aManager.keyDown(e.which)}updateProject(){}updateStartDate(e,n){}updateFinishDate(e,n){}updatePCDDate(e,n){}sortIds(){this.activitySorter.sortById(this.project),this.dashboard.updateProject(this.project,!1),this.sortByBranch=!0}sortBranches(){this.activitySorter.sortByBranches(this.project),this.dashboard.updateProject(this.project,!1),this.sortByBranch=!1}setAssignInteraction(e){}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(q.Ou),t.Y36(ge),t.Y36(On.Z))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-assign-activity-grid"]],inputs:{id:"id"},decls:1,vars:1,consts:[["class","activity-list-container",4,"ngIf"],[1,"activity-list-container"],[1,"grid-area"],[1,"edit-button"],["title","Edit Form",1,"fas","fa-pen-square",3,"hidden","click"],["title","Assign to Activities",1,"fas","fa-bars",3,"hidden","click"],["title","Sort By Branch",1,"fas","fa-sort-amount-down",3,"hidden","click"],["title","Sort By Id",1,"fas","fa-sort-numeric-down",3,"hidden","click"],["class","table-container",4,"ngIf"],[1,"table-container"],["list",""],[1,"table-fixed","table-bordered","resource-assignment-project-data"],[1,"id"],[1,"activity-name"],[1,"duration"],[1,"depends-on"],[1,"pcd","assign-pcd"],[1,"finish"],[1,"start"],[1,"risk"],[1,"resource"],[1,"phase"],[4,"ngFor","ngForOf"],["tabindex","0",3,"hidden","click","keydown","keyup"],[3,"hidden"],[3,"title"],[1,"assign-pcd"],[1,"fa","fa-circle",2,"color","#4a4",3,"hidden"],[1,"initials"],["class","activity-resource",4,"ngFor","ngForOf"],["class","activity-phase",4,"ngFor","ngForOf"],[1,"activity-info",3,"hidden"],[3,"ngModel","ngModelChange"],["matInput","","placeholder","-",3,"value","ngModel","ngModelChange"],["matInput","","placeholder","-",3,"value","ngModel","ngModelChange","blur"],["matSuffix","",1,"icon","picker-toggle",3,"for"],[1,"mat-icon-rtl-mirror"],["placeholder","---",1,"dateinput",3,"matDatepicker","ngModel","ngModelChange"],["input2",""],[3,"closed"],["picker2",""],["input3",""],["picker3",""],["input",""],["picker",""],[1,"disabled-color"],[1,"activity-resource"],[1,"activity-phase"]],template:function(n,i){1&n&&t.YNc(0,In,8,5,"div",0),2&n&&t.Q6J("ngIf",void 0!==i.project)},dependencies:[M.sg,M.O5,S.Fj,S.JJ,S.On,V.R9,dt.Hw,me.Mq,me.hl,me.nW,fe.Nt],styles:[".table-fixed[_ngcontent-%COMP%]{width:100%;border:none}.table-fixed[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:-17px;z-index:999}.table-fixed[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:-17px;z-index:999;color:#666;padding-bottom:3px;background:#fff;height:75px}.table-container[_ngcontent-%COMP%]{margin-top:-17px;margin-left:5px;width:1041px;height:800px}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-left:10px;padding-top:5px;padding-bottom:5px;border:1px solid #ccc!important}.table-fixed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.table-fixed[_ngcontent-%COMP%]{border-collapse:collapse}.activity-resource[_ngcontent-%COMP%], .activity-phase[_ngcontent-%COMP%]{padding-right:7px}.initials[_ngcontent-%COMP%]{overflow:hidden}.activity-list-container[_ngcontent-%COMP%]{height:939px}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input.dateinput[_ngcontent-%COMP%]{padding-left:27px}svg.mat-datepicker-toggle-default-icon[_ngcontent-%COMP%]{height:15px;margin-right:0}.icon[_ngcontent-%COMP%]{font-size:14px}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input.dateinput[_ngcontent-%COMP%]{width:100%}  .mat-icon-button{height:17px!important;width:17px!important;line-height:16px!important}input.mat-input-element[_ngcontent-%COMP%]{margin-top:0!important}  button.mat-icon-button{height:25px!important;width:27px!important}.picker-toggle[_ngcontent-%COMP%]{height:10px;float:left;margin-right:-33px;margin-top:5px}.table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.activity-info[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:1px solid #ddd;border-right:0;padding-top:0;border-left:0px;padding-bottom:0}.depends-on[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.assign-pcd[_ngcontent-%COMP%]{padding-left:10px}.resource-assignment-project-data[_ngcontent-%COMP%]   tr.selected.assigned[_ngcontent-%COMP%]{background-image:repeating-linear-gradient(90deg,rgba(255,255,255,.3),rgba(255,255,255,.3) 5px,rgba(125,125,125,0) 0px,rgba(125,125,125,0) 8px)}.edit-button[_ngcontent-%COMP%]{position:sticky;top:14px;z-index:1000;left:1000px;background-color:#fff;color:#666;width:34px}.edit-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:15px;height:15px;padding:4px}perfect-scrollbar[_ngcontent-%COMP%]{position:relative}.table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.activity-info[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{border:0px solid #ddd;border-right:0;padding-top:0;margin:0;border-left:0px;padding-bottom:0;border-bottom:1px solid #ccc}.table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.activity-info[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{border-left:none!important;border-right:none}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-left:10px;padding-top:5px;padding-bottom:5px;border:0px!important}.disabled-color[_ngcontent-%COMP%]{background-color:#eee}table[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > tfoot[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%] > thead[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{border:1px solid #ddd;border-right:0;padding-top:13px;border-left:0;padding-bottom:5px}*[_ngcontent-%COMP%]{font-size:13px}tr[_ngcontent-%COMP%]:hover{background-color:#eee}tr.selected[_ngcontent-%COMP%]:hover{background-color:#e2e28a}tr.selected[_ngcontent-%COMP%]{background-color:#fcfc9b}.picker-toggle[_ngcontent-%COMP%]{margin-top:3px}  svg.mat-datepicker-toggle-default-icon{height:15px!important;width:14px!important;margin-right:20px;margin-top:5px!important;display:block!important}.resource-assignment-project-data[_ngcontent-%COMP%]{table-layout:fixed;width:1015px}.resource-assignment-project-data[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{z-index:0}.resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.id[_ngcontent-%COMP%]{width:20px}.resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.activity-name[_ngcontent-%COMP%]{width:217px}.resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.risk[_ngcontent-%COMP%], .resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.duration[_ngcontent-%COMP%]{width:42px}.resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.depends-on[_ngcontent-%COMP%]{width:107px}.resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.pcd[_ngcontent-%COMP%], .resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.pev[_ngcontent-%COMP%]{width:100px}.resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.finish[_ngcontent-%COMP%], .resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.start[_ngcontent-%COMP%], .resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.resource[_ngcontent-%COMP%], .resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.skill[_ngcontent-%COMP%], .resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.phase[_ngcontent-%COMP%]{width:75px}.grid-area[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]{--mdc-icon-button-state-layer-size: 14px;--mdc-icon-button-icon-size: 13px}.resource-assignment-project-data[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%]{background-color:#eee}"]})}return s})();var H=h(4595);function Un(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.select(a))}),t._uU(1),t.TgZ(2,"span",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.remove(a))}),t._uU(3,"x"),t.qZA()()}if(2&s){const e=o.$implicit,n=t.oxw();t.Udp("background-color",n.getTagColor(e).backgroundcolor)("color",n.getTagColor(e).color),t.xp6(1),t.hij(" ",n.getName(e)," ")}}let Fn=(()=>{class s{constructor(e){this.aManager=e,this.assignTags=new t.vpe,this.unassignTags=new t.vpe,this.selectTag=new t.vpe,this.removeTag=new t.vpe,this.addTag=new t.vpe,this.newTag="",this.assign=()=>this.assignTags.emit(),this.removeAll=()=>this.unassignTags.emit(),this.select=n=>this.selectTag.emit(n),this.remove=n=>this.removeTag.emit(n),this.getTagColor=n=>this.aManager.getColor(n,this.colorBucket),this.getName=n=>this.nameAttr?n[this.nameAttr].name:n.name}add(e){this.addTag.emit(e.value),this.newTag=""}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(ge))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-tag-selection"]],inputs:{title:"title",nameAttr:"nameAttr",colorBucket:"colorBucket",items:"items",hideAssignLinks:"hideAssignLinks"},outputs:{assignTags:"assignTags",unassignTags:"unassignTags",selectTag:"selectTag",removeTag:"removeTag",addTag:"addTag"},decls:13,vars:4,consts:[[1,"actions"],[1,"tag-title"],[1,"float-right","assign-button",3,"hidden"],["href","javascript:void(0)",3,"click"],[1,"center"],[1,"tags"],["type","button","class","btn btn-light tag-btn",3,"background-color","color","click",4,"ngFor","ngForOf"],["type","text","placeholder","Type Name",1,"add-tag",3,"ngModel","ngModelChange","change"],["type","button",1,"btn","btn-light","tag-btn",3,"click"],[3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2)(4,"a",3),t.NdJ("click",function(){return i.assign()}),t._uU(5,"Assign To Activities"),t.qZA(),t.TgZ(6,"span",4),t._uU(7,"|"),t.qZA(),t.TgZ(8,"a",3),t.NdJ("click",function(){return i.removeAll()}),t._uU(9,"Unassign"),t.qZA()()(),t.TgZ(10,"div",5),t.YNc(11,Un,4,5,"button",6),t.TgZ(12,"input",7),t.NdJ("ngModelChange",function(r){return i.newTag=r})("change",function(r){return i.add(r.target)}),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(i.title),t.xp6(1),t.Q6J("hidden",i.hideAssignLinks),t.xp6(8),t.Q6J("ngForOf",i.items),t.xp6(1),t.Q6J("ngModel",i.newTag))},dependencies:[M.sg,S.Fj,S.JJ,S.On],styles:[".tags[_ngcontent-%COMP%]{overflow:auto;cursor:text;background-color:#fff;border:1px solid #ddd;height:auto;border-radius:0;height:98px;width:475px}.add-tag[_ngcontent-%COMP%]{margin:2px;width:125px!important;background-color:#fff;height:40px;padding:3px 3px 3px 12px;border:none!important}.actions[_ngcontent-%COMP%]{width:475px;padding:10px 10px 7px}.assign-button[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:10px}.tag-btn[_ngcontent-%COMP%]{padding:0 12px;height:37px;border:1px solid #acacac;border-radius:3px;background:none;margin:5px;font-size:15px}.tag-title[_ngcontent-%COMP%]{font-weight:700}"]})}return s})();function En(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"cp-tag-selection",8),t.NdJ("assignTags",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.assignResources())})("unassignTags",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.unassignResources())})("selectTag",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectResource(i))})("removeTag",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.removeResource(i))})("addTag",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addResource(i))}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("items",e.project.resources)}}function Yn(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"cp-tag-selection",9),t.NdJ("assignTags",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.assignPhases())})("unassignTags",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.unassignPhases())})("selectTag",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectPhase(i))})("removeTag",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.removePhase(i))})("addTag",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addPhase(i))}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("items",e.project.phases)}}function Nn(s,o){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,En,1,1,"cp-tag-selection",6)(2,Yn,1,1,"cp-tag-selection",7),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isResourceView),t.xp6(1),t.Q6J("ngIf",!e.isResourceView)}}let qn=(()=>{class s{constructor(e,n,i,a,r,c){this.dashboard=n,this.eventService=i,this.aManager=a,this.resFactory=r,this.phaseFactory=c,this.isResourceView=!0,this.lassoedActivities=[],this.id=+e.snapshot.params.id,this.project$=this.dashboard.activeProject$}ngOnInit(){this.subscription=this.project$.pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.project=e;const n=this.project.profile.view.lassoedLinks;n.length>0&&(this.lassoedActivities=this.project.activities.filter(i=>n.includes(i.profile.id)))}),this.aManager.colorBy="resource"}assignResources(){this.aManager.assignTagsToActivities("resources",this.project,this.lassoedActivities),this.dashboard.updateProject(this.project,!1),this.eventService.get(H.J7).next(!0)}unassignResources(){this.aManager.removeTags(this.project,"resources","activities"),this.dashboard.updateProject(this.project,!1)}selectResource(e){this.aManager.selectTag(this.project,e,"resource",this.project.resources)}removeResource(e){const n=this.project.resources.indexOf(e);this.project.resources.splice(n,1),this.dashboard.updateProject(this.project,!1)}addResource(e){this.resFactory.addResource(e,this.project.resources),this.dashboard.updateProject(this.project,!1)}assignPhases(){this.aManager.assignTagsToActivities("phases",this.project,this.lassoedActivities),this.dashboard.updateProject(this.project,!1)}unassignPhases(){this.aManager.removeTags(this.project,"phases","activities"),this.dashboard.updateProject(this.project,!1)}selectPhase(e){this.aManager.selectTag(this.project,e,"phase",this.project.phases)}removePhase(e){const n=this.project.phases.indexOf(e);this.project.phases.splice(n,1),this.dashboard.updateProject(this.project,!1)}addPhase(e){this.phaseFactory.addPhase(e,this.project.phases),this.dashboard.updateProject(this.project,!1)}setTagType(e){this.isResourceView="resource"===e,this.aManager.colorBy=e}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(Y.gz),t.Y36(q.Ou),t.Y36(q.WO),t.Y36(ge),t.Y36(Pe),t.Y36(ct))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-activity-tags"]],decls:10,vars:1,consts:[[1,"chart-options"],[1,"form-check-inline"],[1,"form-check-label"],["checked","","name","rsc-phase","type","radio","value","resources",1,"form-check-input",3,"change"],["name","rsc-phase","type","radio","value","phases",1,"form-check-input",3,"change"],[4,"ngIf"],["title","Resources","colorBucket","resource","nameAttr","profile",3,"items","assignTags","unassignTags","selectTag","removeTag","addTag",4,"ngIf"],["title","Phases","colorBucket","phase",3,"items","assignTags","unassignTags","selectTag","removeTag","addTag",4,"ngIf"],["title","Resources","colorBucket","resource","nameAttr","profile",3,"items","assignTags","unassignTags","selectTag","removeTag","addTag"],["title","Phases","colorBucket","phase",3,"items","assignTags","unassignTags","selectTag","removeTag","addTag"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2)(3,"input",3),t.NdJ("change",function(){return i.setTagType("resource")}),t.qZA(),t._uU(4,"Resources "),t.qZA()(),t.TgZ(5,"div",1)(6,"label",2)(7,"input",4),t.NdJ("change",function(){return i.setTagType("phase")}),t.qZA(),t._uU(8,"Phases "),t.qZA()()(),t.YNc(9,Nn,3,2,"div",5)),2&n&&(t.xp6(9),t.Q6J("ngIf",void 0!==i.project))},dependencies:[M.O5,Fn],styles:["cp-tag-selection[_ngcontent-%COMP%]{padding-top:3px;display:block}.chart-options[_ngcontent-%COMP%]{padding-top:18px}"]})}return s})();class Jn{create(){return{svg:null,mainG:null,innerWidth:null,innerHeight:null,margin:{top:40,right:40,bottom:100,left:60}}}}var ee=h(3920),jn=h(9315);let Gn=(()=>{class s{constructor(){}getCompletedNodes(e){return e.filter(i=>{const a=i.data.activities.filter(c=>!c.chartInfo.isDummy),r=i.data.activities.filter(c=>!c.chartInfo.isDummy&&c.assign.resources.length>0);return a.length===r.length})}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Bn=h(7649),Hn=h(6140),re=h(1002);function ut(s,o){(null==o||o>s.length)&&(o=s.length);for(var e=0,n=new Array(o);e<o;e++)n[e]=s[e];return n}function ht(s,o){var e=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!e){if(Array.isArray(s)||(e=function Ln(s,o){if(s){if("string"==typeof s)return ut(s,o);var e=Object.prototype.toString.call(s).slice(8,-1);if("Object"===e&&s.constructor&&(e=s.constructor.name),"Map"===e||"Set"===e)return Array.from(s);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ut(s,o)}}(s))||o&&s&&"number"==typeof s.length){e&&(s=e);var n=0,i=function(){};return{s:i,n:function(){return n>=s.length?{done:!0}:{done:!1,value:s[n++]}},e:function(d){throw d},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,r=!1;return{s:function(){e=e.call(s)},n:function(){var d=e.next();return a=d.done,d},e:function(d){r=!0,c=d},f:function(){try{!a&&null!=e.return&&e.return()}finally{if(r)throw c}}}}var Qn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ke(s){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=o.width?String(o.width):s.defaultWidth;return s.formats[e]||s.formats[s.defaultWidth]}}var Xn={date:ke({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ke({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ke({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ti={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ae(s){return function(o,e){var i;if("formatting"===(null!=e&&e.context?String(e.context):"standalone")&&s.formattingValues){var a=s.defaultFormattingWidth||s.defaultWidth,r=null!=e&&e.width?String(e.width):a;i=s.formattingValues[r]||s.formattingValues[a]}else{var c=s.defaultWidth,l=null!=e&&e.width?String(e.width):s.defaultWidth;i=s.values[l]||s.values[c]}return i[s.argumentCallback?s.argumentCallback(o):o]}}function se(s){return function(o){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.width,a=o.match(n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth]);if(!a)return null;var d,r=a[0],c=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(c)?function gi(s,o){for(var e=0;e<s.length;e++)if(o(s[e]))return e}(c,function(m){return m.test(r)}):function pi(s,o){for(var e in s)if(s.hasOwnProperty(e)&&o(s[e]))return e}(c,function(m){return m.test(r)});return d=s.valueCallback?s.valueCallback(l):l,{value:d=e.valueCallback?e.valueCallback(d):d,rest:o.slice(r.length)}}}const Zi={code:"en-US",formatDistance:function(o,e,n){var i,a=Qn[o];return i="string"==typeof a?a:1===e?a.one:a.other.replace("{{count}}",e.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:Xn,formatRelative:function(o,e,n,i){return ti[o]},localize:{ordinalNumber:function(o,e){var n=Number(o),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ae({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ae({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(o){return o-1}}),month:ae({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ae({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ae({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function mi(s){return function(o){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.match(s.matchPattern);if(!n)return null;var i=n[0],a=o.match(s.parsePattern);if(!a)return null;var r=s.valueCallback?s.valueCallback(a[0]):a[0];return{value:r=e.valueCallback?e.valueCallback(r):r,rest:o.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(o){return parseInt(o,10)}}),era:se({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:se({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(o){return o+1}}),month:se({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:se({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:se({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var Si=h(591),J=h(581);function Di(s,o){if(null==s)throw new TypeError("assign requires that input parameter not be null or undefined");for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(s[e]=o[e]);return s}var pt=function(o,e){switch(o){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},gt=function(o,e){switch(o){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}};const mt={p:gt,P:function(o,e){var r,n=o.match(/(P+)(p+)?/)||[],i=n[1],a=n[2];if(!a)return pt(o,e);switch(i){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;default:r=e.dateTime({width:"full"})}return r.replace("{{date}}",pt(i,e)).replace("{{time}}",gt(a,e))}};var Ui=h(5351),Fi=["D","DD"],Ei=["YY","YYYY"];function ft(s,o,e){if("YYYY"===s)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(o,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===s)throw new RangeError("Use `yy` instead of `YY` (in `".concat(o,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===s)throw new RangeError("Use `d` instead of `D` (in `".concat(o,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===s)throw new RangeError("Use `dd` instead of `DD` (in `".concat(o,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var L=h(6156),N=h(2816);function p(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Ze(s,o){return(Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n})(s,o)}function v(s,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Ze(s,o)}function _e(s){return(_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(s)}function y(s){var o=function qi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var i,n=_e(s);if(o){var a=_e(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return function Ji(s,o){if(o&&("object"===(0,re.Z)(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return p(s)}(this,i)}}function f(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function _t(s){var o=function ji(s,o){if("object"!==(0,re.Z)(s)||null===s)return s;var e=s[Symbol.toPrimitive];if(void 0!==e){var n=e.call(s,o||"default");if("object"!==(0,re.Z)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(s)}(s,"string");return"symbol"===(0,re.Z)(o)?o:String(o)}function vt(s,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,_t(n.key),n)}}function _(s,o,e){return o&&vt(s.prototype,o),e&&vt(s,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function u(s,o,e){return(o=_t(o))in s?Object.defineProperty(s,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[o]=e,s}var yt=function(){function s(){f(this,s),u(this,"priority",void 0),u(this,"subPriority",0)}return _(s,[{key:"validate",value:function(e,n){return!0}}]),s}(),Bi=function(s){v(e,s);var o=y(e);function e(n,i,a,r,c){var l;return f(this,e),(l=o.call(this)).value=n,l.validateValue=i,l.setValue=a,l.priority=r,c&&(l.subPriority=c),l}return _(e,[{key:"validate",value:function(i,a){return this.validateValue(i,this.value,a)}},{key:"set",value:function(i,a,r){return this.setValue(i,a,this.value,r)}}]),e}(yt),Hi=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",10),u(p(n),"subPriority",-1),n}return _(e,[{key:"set",value:function(i,a){if(a.timestampIsSet)return i;var r=new Date(0);return r.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),r.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),r}}]),e}(yt),C=function(){function s(){f(this,s),u(this,"incompatibleTokens",void 0),u(this,"priority",void 0),u(this,"subPriority",void 0)}return _(s,[{key:"run",value:function(e,n,i,a){var r=this.parse(e,n,i,a);return r?{setter:new Bi(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(e,n,i){return!0}}]),s}(),Li=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",140),u(p(n),"incompatibleTokens",["R","u","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"})||r.era(i,{width:"narrow"});case"GGGGG":return r.era(i,{width:"narrow"});default:return r.era(i,{width:"wide"})||r.era(i,{width:"abbreviated"})||r.era(i,{width:"narrow"})}}},{key:"set",value:function(i,a,r){return a.era=r,i.setUTCFullYear(r,0,1),i.setUTCHours(0,0,0,0),i}}]),e}(C),k_month=(Math.pow(10,8),/^(1[0-2]|0?\d)/),k_date=/^(3[0-1]|[0-2]?\d)/,k_dayOfYear=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,k_week=/^(5[0-3]|[0-4]?\d)/,k_hour23h=/^(2[0-3]|[0-1]?\d)/,k_hour24h=/^(2[0-4]|[0-1]?\d)/,k_hour11h=/^(1[0-1]|0?\d)/,k_hour12h=/^(1[0-2]|0?\d)/,k_minute=/^[0-5]?\d/,k_second=/^[0-5]?\d/,k_singleDigit=/^\d/,k_twoDigits=/^\d{1,2}/,k_threeDigits=/^\d{1,3}/,k_fourDigits=/^\d{1,4}/,k_anyDigitsSigned=/^-?\d+/,k_singleDigitSigned=/^-?\d/,k_twoDigitsSigned=/^-?\d{1,2}/,k_threeDigitsSigned=/^-?\d{1,3}/,k_fourDigitsSigned=/^-?\d{1,4}/,Q_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,Q_basic=/^([+-])(\d{2})(\d{2})|Z/,Q_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Q_extended=/^([+-])(\d{2}):(\d{2})|Z/,Q_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Z(s,o){return s&&{value:o(s.value),rest:s.rest}}function O(s,o){var e=o.match(s);return e?{value:parseInt(e[0],10),rest:o.slice(e[0].length)}:null}function W(s,o){var e=o.match(s);return e?"Z"===e[0]?{value:0,rest:o.slice(1)}:{value:("+"===e[1]?1:-1)*(36e5*(e[2]?parseInt(e[2],10):0)+6e4*(e[3]?parseInt(e[3],10):0)+1e3*(e[5]?parseInt(e[5],10):0)),rest:o.slice(e[0].length)}:null}function bt(s){return O(k_anyDigitsSigned,s)}function P(s,o){switch(s){case 1:return O(k_singleDigit,o);case 2:return O(k_twoDigits,o);case 3:return O(k_threeDigits,o);case 4:return O(k_fourDigits,o);default:return O(new RegExp("^\\d{1,"+s+"}"),o)}}function ve(s,o){switch(s){case 1:return O(k_singleDigitSigned,o);case 2:return O(k_twoDigitsSigned,o);case 3:return O(k_threeDigitsSigned,o);case 4:return O(k_fourDigitsSigned,o);default:return O(new RegExp("^-?\\d{1,"+s+"}"),o)}}function Se(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function wt(s,o){var i,e=o>0,n=e?o:1-o;if(n<=50)i=s||100;else{var a=n+50;i=s+100*Math.floor(a/100)-(s>=a%100?100:0)}return e?i:1-i}function xt(s){return s%400==0||s%4==0&&s%100!=0}var tr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",130),u(p(n),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){var c=function(d){return{year:d,isTwoDigitYear:"yy"===a}};switch(a){case"y":return Z(P(4,i),c);case"yo":return Z(r.ordinalNumber(i,{unit:"year"}),c);default:return Z(P(a.length,i),c)}}},{key:"validate",value:function(i,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(i,a,r){var c=i.getUTCFullYear();if(r.isTwoDigitYear){var l=wt(r.year,c);return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}return i.setUTCFullYear("era"in a&&1!==a.era?1-r.year:r.year,0,1),i.setUTCHours(0,0,0,0),i}}]),e}(C),Tt={};function oe(){return Tt}function $(s,o){var e,n,i,a,r,c,l,d;(0,N.Z)(1,arguments);var g=oe(),m=(0,L.Z)(null!==(e=null!==(n=null!==(i=null!==(a=o?.weekStartsOn)&&void 0!==a?a:null==o||null===(r=o.locale)||void 0===r||null===(c=r.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==i?i:g.weekStartsOn)&&void 0!==n?n:null===(l=g.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==e?e:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var T=(0,J.Z)(s),b=T.getUTCDay(),D=(b<m?7:0)+b-m;return T.setUTCDate(T.getUTCDate()-D),T.setUTCHours(0,0,0,0),T}function Mt(s,o){var e,n,i,a,r,c,l,d;(0,N.Z)(1,arguments);var g=(0,J.Z)(s),m=g.getUTCFullYear(),T=oe(),b=(0,L.Z)(null!==(e=null!==(n=null!==(i=null!==(a=o?.firstWeekContainsDate)&&void 0!==a?a:null==o||null===(r=o.locale)||void 0===r||null===(c=r.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==i?i:T.firstWeekContainsDate)&&void 0!==n?n:null===(l=T.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==e?e:1);if(!(b>=1&&b<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=new Date(0);D.setUTCFullYear(m+1,0,b),D.setUTCHours(0,0,0,0);var G=$(D,o),A=new Date(0);A.setUTCFullYear(m,0,b),A.setUTCHours(0,0,0,0);var B=$(A,o);return g.getTime()>=G.getTime()?m+1:g.getTime()>=B.getTime()?m:m-1}var nr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",130),u(p(n),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){var c=function(d){return{year:d,isTwoDigitYear:"YY"===a}};switch(a){case"Y":return Z(P(4,i),c);case"Yo":return Z(r.ordinalNumber(i,{unit:"year"}),c);default:return Z(P(a.length,i),c)}}},{key:"validate",value:function(i,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(i,a,r,c){var l=Mt(i,c);if(r.isTwoDigitYear){var d=wt(r.year,l);return i.setUTCFullYear(d,0,c.firstWeekContainsDate),i.setUTCHours(0,0,0,0),$(i,c)}return i.setUTCFullYear("era"in a&&1!==a.era?1-r.year:r.year,0,c.firstWeekContainsDate),i.setUTCHours(0,0,0,0),$(i,c)}}]),e}(C);function te(s){(0,N.Z)(1,arguments);var e=(0,J.Z)(s),n=e.getUTCDay(),i=(n<1?7:0)+n-1;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}var ir=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",130),u(p(n),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a){return ve("R"===a?4:a.length,i)}},{key:"set",value:function(i,a,r){var c=new Date(0);return c.setUTCFullYear(r,0,4),c.setUTCHours(0,0,0,0),te(c)}}]),e}(C),rr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",130),u(p(n),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a){return ve("u"===a?4:a.length,i)}},{key:"set",value:function(i,a,r){return i.setUTCFullYear(r,0,1),i.setUTCHours(0,0,0,0),i}}]),e}(C),ar=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",120),u(p(n),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"Q":case"QQ":return P(a.length,i);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"})||r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});default:return r.quarter(i,{width:"wide",context:"formatting"})||r.quarter(i,{width:"abbreviated",context:"formatting"})||r.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,a){return a>=1&&a<=4}},{key:"set",value:function(i,a,r){return i.setUTCMonth(3*(r-1),1),i.setUTCHours(0,0,0,0),i}}]),e}(C),sr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",120),u(p(n),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"q":case"qq":return P(a.length,i);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"})||r.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});default:return r.quarter(i,{width:"wide",context:"standalone"})||r.quarter(i,{width:"abbreviated",context:"standalone"})||r.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,a){return a>=1&&a<=4}},{key:"set",value:function(i,a,r){return i.setUTCMonth(3*(r-1),1),i.setUTCHours(0,0,0,0),i}}]),e}(C),or=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),u(p(n),"priority",110),n}return _(e,[{key:"parse",value:function(i,a,r){var c=function(d){return d-1};switch(a){case"M":return Z(O(k_month,i),c);case"MM":return Z(P(2,i),c);case"Mo":return Z(r.ordinalNumber(i,{unit:"month"}),c);case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"})||r.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});default:return r.month(i,{width:"wide",context:"formatting"})||r.month(i,{width:"abbreviated",context:"formatting"})||r.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,a){return a>=0&&a<=11}},{key:"set",value:function(i,a,r){return i.setUTCMonth(r,1),i.setUTCHours(0,0,0,0),i}}]),e}(C),cr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",110),u(p(n),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){var c=function(d){return d-1};switch(a){case"L":return Z(O(k_month,i),c);case"LL":return Z(P(2,i),c);case"Lo":return Z(r.ordinalNumber(i,{unit:"month"}),c);case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"})||r.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});default:return r.month(i,{width:"wide",context:"standalone"})||r.month(i,{width:"abbreviated",context:"standalone"})||r.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,a){return a>=0&&a<=11}},{key:"set",value:function(i,a,r){return i.setUTCMonth(r,1),i.setUTCHours(0,0,0,0),i}}]),e}(C);var pr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",100),u(p(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"w":return O(k_week,i);case"wo":return r.ordinalNumber(i,{unit:"week"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=1&&a<=53}},{key:"set",value:function(i,a,r,c){return $(function hr(s,o,e){(0,N.Z)(2,arguments);var n=(0,J.Z)(s),i=(0,L.Z)(o),a=function ur(s,o){(0,N.Z)(1,arguments);var e=(0,J.Z)(s),n=$(e,o).getTime()-function lr(s,o){var e,n,i,a,r,c,l,d;(0,N.Z)(1,arguments);var g=oe(),m=(0,L.Z)(null!==(e=null!==(n=null!==(i=null!==(a=o?.firstWeekContainsDate)&&void 0!==a?a:null==o||null===(r=o.locale)||void 0===r||null===(c=r.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==i?i:g.firstWeekContainsDate)&&void 0!==n?n:null===(l=g.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==e?e:1),T=Mt(s,o),b=new Date(0);return b.setUTCFullYear(T,0,m),b.setUTCHours(0,0,0,0),$(b,o)}(e,o).getTime();return Math.round(n/6048e5)+1}(n,e)-i;return n.setUTCDate(n.getUTCDate()-7*a),n}(i,r,c),c)}}]),e}(C);function vr(s,o){(0,N.Z)(2,arguments);var e=(0,J.Z)(s),n=(0,L.Z)(o),i=function _r(s){(0,N.Z)(1,arguments);var o=(0,J.Z)(s),e=te(o).getTime()-function mr(s){(0,N.Z)(1,arguments);var o=function gr(s){(0,N.Z)(1,arguments);var o=(0,J.Z)(s),e=o.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(e+1,0,4),n.setUTCHours(0,0,0,0);var i=te(n),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var r=te(a);return o.getTime()>=i.getTime()?e+1:o.getTime()>=r.getTime()?e:e-1}(s),e=new Date(0);return e.setUTCFullYear(o,0,4),e.setUTCHours(0,0,0,0),te(e)}(o).getTime();return Math.round(e/6048e5)+1}(e)-n;return e.setUTCDate(e.getUTCDate()-7*i),e}var yr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",100),u(p(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"I":return O(k_week,i);case"Io":return r.ordinalNumber(i,{unit:"week"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=1&&a<=53}},{key:"set",value:function(i,a,r){return te(vr(i,r))}}]),e}(C),Cr=[31,28,31,30,31,30,31,31,30,31,30,31],br=[31,29,31,30,31,30,31,31,30,31,30,31],wr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",90),u(p(n),"subPriority",1),u(p(n),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"d":return O(k_date,i);case"do":return r.ordinalNumber(i,{unit:"date"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){var c=xt(i.getUTCFullYear()),l=i.getUTCMonth();return c?a>=1&&a<=br[l]:a>=1&&a<=Cr[l]}},{key:"set",value:function(i,a,r){return i.setUTCDate(r),i.setUTCHours(0,0,0,0),i}}]),e}(C),xr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",90),u(p(n),"subpriority",1),u(p(n),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"D":case"DD":return O(k_dayOfYear,i);case"Do":return r.ordinalNumber(i,{unit:"date"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return xt(i.getUTCFullYear())?a>=1&&a<=366:a>=1&&a<=365}},{key:"set",value:function(i,a,r){return i.setUTCMonth(0,r),i.setUTCHours(0,0,0,0),i}}]),e}(C);function De(s,o,e){var n,i,a,r,c,l,d,g;(0,N.Z)(2,arguments);var m=oe(),T=(0,L.Z)(null!==(n=null!==(i=null!==(a=null!==(r=e?.weekStartsOn)&&void 0!==r?r:null==e||null===(c=e.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==a?a:m.weekStartsOn)&&void 0!==i?i:null===(d=m.locale)||void 0===d||null===(g=d.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==n?n:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var b=(0,J.Z)(s),D=(0,L.Z)(o),ce=((D%7+7)%7<T?7:0)+D-b.getUTCDay();return b.setUTCDate(b.getUTCDate()+ce),b}var Tr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",90),u(p(n),"incompatibleTokens",["D","i","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"})||r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})||r.day(i,{width:"abbreviated",context:"formatting"})||r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,a){return a>=0&&a<=6}},{key:"set",value:function(i,a,r,c){return(i=De(i,r,c)).setUTCHours(0,0,0,0),i}}]),e}(C),Mr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",90),u(p(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r,c){var l=function(g){var m=7*Math.floor((g-1)/7);return(g+c.weekStartsOn+6)%7+m};switch(a){case"e":case"ee":return Z(P(a.length,i),l);case"eo":return Z(r.ordinalNumber(i,{unit:"day"}),l);case"eee":return r.day(i,{width:"abbreviated",context:"formatting"})||r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"});default:return r.day(i,{width:"wide",context:"formatting"})||r.day(i,{width:"abbreviated",context:"formatting"})||r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,a){return a>=0&&a<=6}},{key:"set",value:function(i,a,r,c){return(i=De(i,r,c)).setUTCHours(0,0,0,0),i}}]),e}(C),Or=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",90),u(p(n),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r,c){var l=function(g){var m=7*Math.floor((g-1)/7);return(g+c.weekStartsOn+6)%7+m};switch(a){case"c":case"cc":return Z(P(a.length,i),l);case"co":return Z(r.ordinalNumber(i,{unit:"day"}),l);case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"})||r.day(i,{width:"short",context:"standalone"})||r.day(i,{width:"narrow",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"})||r.day(i,{width:"narrow",context:"standalone"});default:return r.day(i,{width:"wide",context:"standalone"})||r.day(i,{width:"abbreviated",context:"standalone"})||r.day(i,{width:"short",context:"standalone"})||r.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,a){return a>=0&&a<=6}},{key:"set",value:function(i,a,r,c){return(i=De(i,r,c)).setUTCHours(0,0,0,0),i}}]),e}(C),Ar=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",90),u(p(n),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){var c=function(d){return 0===d?7:d};switch(a){case"i":case"ii":return P(a.length,i);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return Z(r.day(i,{width:"abbreviated",context:"formatting"})||r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"}),c);case"iiiii":return Z(r.day(i,{width:"narrow",context:"formatting"}),c);case"iiiiii":return Z(r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"}),c);default:return Z(r.day(i,{width:"wide",context:"formatting"})||r.day(i,{width:"abbreviated",context:"formatting"})||r.day(i,{width:"short",context:"formatting"})||r.day(i,{width:"narrow",context:"formatting"}),c)}}},{key:"validate",value:function(i,a){return a>=1&&a<=7}},{key:"set",value:function(i,a,r){return i=function Pr(s,o){(0,N.Z)(2,arguments);var e=(0,L.Z)(o);e%7==0&&(e-=7);var i=(0,J.Z)(s),l=((e%7+7)%7<1?7:0)+e-i.getUTCDay();return i.setUTCDate(i.getUTCDate()+l),i}(i,r),i.setUTCHours(0,0,0,0),i}}]),e}(C),kr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",80),u(p(n),"incompatibleTokens",["b","B","H","k","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"a":case"aa":case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"})||r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})||r.dayPeriod(i,{width:"abbreviated",context:"formatting"})||r.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,a,r){return i.setUTCHours(Se(r),0,0,0),i}}]),e}(C),Zr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",80),u(p(n),"incompatibleTokens",["a","B","H","k","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"b":case"bb":case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"})||r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})||r.dayPeriod(i,{width:"abbreviated",context:"formatting"})||r.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,a,r){return i.setUTCHours(Se(r),0,0,0),i}}]),e}(C),Sr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",80),u(p(n),"incompatibleTokens",["a","b","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"})||r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});default:return r.dayPeriod(i,{width:"wide",context:"formatting"})||r.dayPeriod(i,{width:"abbreviated",context:"formatting"})||r.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,a,r){return i.setUTCHours(Se(r),0,0,0),i}}]),e}(C),Dr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",70),u(p(n),"incompatibleTokens",["H","K","k","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"h":return O(k_hour12h,i);case"ho":return r.ordinalNumber(i,{unit:"hour"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=1&&a<=12}},{key:"set",value:function(i,a,r){var c=i.getUTCHours()>=12;return i.setUTCHours(c&&r<12?r+12:c||12!==r?r:0,0,0,0),i}}]),e}(C),Ir=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",70),u(p(n),"incompatibleTokens",["a","b","h","K","k","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"H":return O(k_hour23h,i);case"Ho":return r.ordinalNumber(i,{unit:"hour"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=0&&a<=23}},{key:"set",value:function(i,a,r){return i.setUTCHours(r,0,0,0),i}}]),e}(C),Rr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",70),u(p(n),"incompatibleTokens",["h","H","k","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"K":return O(k_hour11h,i);case"Ko":return r.ordinalNumber(i,{unit:"hour"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=0&&a<=11}},{key:"set",value:function(i,a,r){var c=i.getUTCHours()>=12;return i.setUTCHours(c&&r<12?r+12:r,0,0,0),i}}]),e}(C),Ur=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",70),u(p(n),"incompatibleTokens",["a","b","h","H","K","t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"k":return O(k_hour24h,i);case"ko":return r.ordinalNumber(i,{unit:"hour"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=1&&a<=24}},{key:"set",value:function(i,a,r){return i.setUTCHours(r<=24?r%24:r,0,0,0),i}}]),e}(C),Fr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",60),u(p(n),"incompatibleTokens",["t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"m":return O(k_minute,i);case"mo":return r.ordinalNumber(i,{unit:"minute"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=0&&a<=59}},{key:"set",value:function(i,a,r){return i.setUTCMinutes(r,0,0),i}}]),e}(C),Er=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",50),u(p(n),"incompatibleTokens",["t","T"]),n}return _(e,[{key:"parse",value:function(i,a,r){switch(a){case"s":return O(k_second,i);case"so":return r.ordinalNumber(i,{unit:"second"});default:return P(a.length,i)}}},{key:"validate",value:function(i,a){return a>=0&&a<=59}},{key:"set",value:function(i,a,r){return i.setUTCSeconds(r,0),i}}]),e}(C),Yr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",30),u(p(n),"incompatibleTokens",["t","T"]),n}return _(e,[{key:"parse",value:function(i,a){return Z(P(a.length,i),function(l){return Math.floor(l*Math.pow(10,3-a.length))})}},{key:"set",value:function(i,a,r){return i.setUTCMilliseconds(r),i}}]),e}(C),Nr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",10),u(p(n),"incompatibleTokens",["t","T","x"]),n}return _(e,[{key:"parse",value:function(i,a){switch(a){case"X":return W(Q_basicOptionalMinutes,i);case"XX":return W(Q_basic,i);case"XXXX":return W(Q_basicOptionalSeconds,i);case"XXXXX":return W(Q_extendedOptionalSeconds,i);default:return W(Q_extended,i)}}},{key:"set",value:function(i,a,r){return a.timestampIsSet?i:new Date(i.getTime()-r)}}]),e}(C),qr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",10),u(p(n),"incompatibleTokens",["t","T","X"]),n}return _(e,[{key:"parse",value:function(i,a){switch(a){case"x":return W(Q_basicOptionalMinutes,i);case"xx":return W(Q_basic,i);case"xxxx":return W(Q_basicOptionalSeconds,i);case"xxxxx":return W(Q_extendedOptionalSeconds,i);default:return W(Q_extended,i)}}},{key:"set",value:function(i,a,r){return a.timestampIsSet?i:new Date(i.getTime()-r)}}]),e}(C),Jr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",40),u(p(n),"incompatibleTokens","*"),n}return _(e,[{key:"parse",value:function(i){return bt(i)}},{key:"set",value:function(i,a,r){return[new Date(1e3*r),{timestampIsSet:!0}]}}]),e}(C),jr=function(s){v(e,s);var o=y(e);function e(){var n;f(this,e);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return u(p(n=o.call.apply(o,[this].concat(a))),"priority",20),u(p(n),"incompatibleTokens","*"),n}return _(e,[{key:"parse",value:function(i){return bt(i)}},{key:"set",value:function(i,a,r){return[new Date(r),{timestampIsSet:!0}]}}]),e}(C),Gr={G:new Li,y:new tr,Y:new nr,R:new ir,u:new rr,Q:new ar,q:new sr,M:new or,L:new cr,w:new pr,I:new yr,d:new wr,D:new xr,E:new Tr,e:new Mr,c:new Or,i:new Ar,a:new kr,b:new Zr,B:new Sr,h:new Dr,H:new Ir,K:new Rr,k:new Ur,m:new Fr,s:new Er,S:new Yr,X:new Nr,x:new qr,t:new Jr,T:new jr},Br=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lr=/^'([^]*?)'?$/,Qr=/''/g,Wr=/\S/,Vr=/[a-zA-Z]/;function Ie(s,o,e,n){var i,a,r,c,l,d,g,m,T,b,D,G,A,B,ce,Fe,Ee,Ye;(0,N.Z)(3,arguments);var z=String(s),ye=String(o),le=oe(),Ce=null!==(i=null!==(a=n?.locale)&&void 0!==a?a:le.locale)&&void 0!==i?i:Zi;if(!Ce.match)throw new RangeError("locale must contain match property");var Ne=(0,L.Z)(null!==(r=null!==(c=null!==(l=null!==(d=n?.firstWeekContainsDate)&&void 0!==d?d:null==n||null===(g=n.locale)||void 0===g||null===(m=g.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==l?l:le.firstWeekContainsDate)&&void 0!==c?c:null===(T=le.locale)||void 0===T||null===(b=T.options)||void 0===b?void 0:b.firstWeekContainsDate)&&void 0!==r?r:1);if(!(Ne>=1&&Ne<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var qe=(0,L.Z)(null!==(D=null!==(G=null!==(A=null!==(B=n?.weekStartsOn)&&void 0!==B?B:null==n||null===(ce=n.locale)||void 0===ce||null===(Fe=ce.options)||void 0===Fe?void 0:Fe.weekStartsOn)&&void 0!==A?A:le.weekStartsOn)&&void 0!==G?G:null===(Ee=le.locale)||void 0===Ee||null===(Ye=Ee.options)||void 0===Ye?void 0:Ye.weekStartsOn)&&void 0!==D?D:0);if(!(qe>=0&&qe<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===ye)return""===z?(0,J.Z)(e):new Date(NaN);var kt,Je={firstWeekContainsDate:Ne,weekStartsOn:qe,locale:Ce},je=[new Hi],Wa=ye.match(Hr).map(function(I){var w=I[0];return w in mt?(0,mt[w])(I,Ce.formatLong):I}).join("").match(Br),Ge=[],be=ht(Wa);try{var Va=function(){var w=kt.value;!(null!=n&&n.useAdditionalWeekYearTokens)&&function Ni(s){return-1!==Ei.indexOf(s)}(w)&&ft(w,ye,s),(null==n||!n.useAdditionalDayOfYearTokens)&&function Yi(s){return-1!==Fi.indexOf(s)}(w)&&ft(w,ye,s);var j=w[0],Te=Gr[j];if(Te){var Rt=Te.incompatibleTokens;if(Array.isArray(Rt)){var Ut=Ge.find(function(Ft){return Rt.includes(Ft.token)||Ft.token===j});if(Ut)throw new RangeError("The format string mustn't contain `".concat(Ut.fullToken,"` and `").concat(w,"` at the same time"))}else if("*"===Te.incompatibleTokens&&Ge.length>0)throw new RangeError("The format string mustn't contain `".concat(w,"` and any other token at the same time"));Ge.push({token:j,fullToken:w});var He=Te.run(z,w,Ce.match,Je);if(!He)return{v:new Date(NaN)};je.push(He.setter),z=He.rest}else{if(j.match(Vr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if("''"===w?w="'":"'"===j&&(w=function zr(s){return s.match(Lr)[1].replace(Qr,"'")}(w)),0!==z.indexOf(w))return{v:new Date(NaN)};z=z.slice(w.length)}};for(be.s();!(kt=be.n()).done;){var Zt=Va();if("object"===(0,re.Z)(Zt))return Zt.v}}catch(I){be.e(I)}finally{be.f()}if(z.length>0&&Wr.test(z))return new Date(NaN);var za=je.map(function(I){return I.priority}).sort(function(I,w){return w-I}).filter(function(I,w,j){return j.indexOf(I)===w}).map(function(I){return je.filter(function(w){return w.priority===I}).sort(function(w,j){return j.subPriority-w.subPriority})}).map(function(I){return I[0]}),Be=(0,J.Z)(e);if(isNaN(Be.getTime()))return new Date(NaN);var Dt,de=(0,Si.Z)(Be,(0,Ui.Z)(Be)),St={},we=ht(za);try{for(we.s();!(Dt=we.n()).done;){var It=Dt.value;if(!It.validate(de,Je))return new Date(NaN);var xe=It.set(de,St,Je);Array.isArray(xe)?(de=xe[0],Di(St,xe[1])):de=xe}}catch(I){we.e(I)}finally{we.f()}return de}var Re=h(9844);let $r=(()=>{class s{constructor(){}calculateIndirectCosts(e){return this.validateNodeCost(e)?this.calculateResourcesCost(e):null}validateNodeCost(e){let n=!0,i=!0;return n=n&&0===e.activities.filter(a=>!a.chartInfo.isDummy&&0===a.assign.resources.length).length,i=i&&0!==this.getTimeSpanBetweenPoints(e.activities),n}calculateResourcesCost(e){let n=0;for(const i of e.resources){const a=e.activities.filter(c=>c.assign.resources.filter(l=>l.id===i.id).length>0);let r=0;a.length>0&&(r=this.getDaysBetweenPoints(a,e),n+=this.calculateCostFromSpan(i.id,r,e))}return n}getDaysBetweenPoints(e,n){const i=n.integrations.filter(r=>null!==e.find(c=>c.chartInfo.source_id===r.id)),a=n.integrations.filter(r=>null!==e.find(c=>c.chartInfo.target_id===r.id));if(i.length>0&&a.length>0){const r=i.map(d=>d.lft).sort((d,g)=>d-g),c=a.map(d=>d.lft).sort((d,g)=>d-g);return c[c.length-1]-r[0]}return 0}validateNodesCost(e,n){let i=!0,a=!0;for(const r of e)i=i&&0===r.data.activities.filter(c=>0===c.assign.resources.length).length,a=a&&0!==this.getTimeSpanBetweenPoints(r.data.activities);return i}calculateCostFromSpan(e,n,i){const a=i.resources.find(r=>r.id===e);return void 0!==a?Math.round(a.profile.skillMultiplier*n):n}getTimeSpanBetweenPoints(e){const n=e.filter(l=>!l.chartInfo.isDummy).sort((l,d)=>this.getPlannedStart(l)-this.getPlannedStart(d)),i=this.getPlannedStart(n[0]),a=e.filter(l=>!l.chartInfo.isDummy).sort((l,d)=>this.getActivityPlannedEndMs(l)-this.getActivityPlannedEndMs(d)),c=(this.getActivityPlannedEndMs(a[a.length-1])-i)/864e5;return Math.round(c)}getDiscreteActivitiesTimeSpan(e){let n=0;for(const i of e)n+=this.getActivitySpan(i);return n}getActivitySpan(e){const n=this.getPlannedStart(e),a=(this.getActivityPlannedEndMs(e)-n)/864e5;return Math.round(a)}getPlannedStart(e){if(!e||void 0===e.profile.duration||null===e.profile.planned_completion_date_dt)return 0;const n=Ie(e.profile.planned_completion_date??"",Re.R7,new Date);isNaN(n.getTime())||(e.profile.planned_completion_date_dt=n);const i=1e3*e.profile.duration*60*60*24;return e.profile.planned_completion_date_dt.getTime()-i}getActivityPlannedEndMs(e){if(!e.profile.planned_completion_date||void 0===e.profile.duration||null===e.profile.planned_completion_date_dt)return 0;const n=Ie(e.profile.planned_completion_date,Re.R7,new Date);isNaN(n.getTime())||(e.profile.planned_completion_date_dt=n);const i=1e3*e.profile.duration*60*60*24;return e.profile.planned_completion_date_dt.getTime()+i}getPlannedStartDate(e){if(void 0===e.profile.duration||void 0===e.profile.planned_completion_date||null===e.profile.planned_completion_date_dt)return null;const n=Ie(e.profile.planned_completion_date,Re.R7,new Date);isNaN(n.getTime())||(e.profile.planned_completion_date_dt=n);const i=1e3*e.profile.duration*60*60*24,a=e.profile.planned_completion_date_dt.getTime()-i;return new Date(a)}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Kr=h(9975),Xr=h(155);let Ot=(()=>{class s{constructor(e,n,i,a,r,c,l){this.eventService=e,this.completion=n,this.fileCompiler=i,this.pcdAutoGen=a,this.indirects=r,this.treeSerializer=c,this.zametekApi=l,this.prevTimeCostPoints=null,this.selectedNodeId=null}initSvg(e,n,i){const a="risk-curve-"+this.id;ee.Ys(i).select("svg").remove(),this.st.svg=ee.Ys(i).append("svg").attr("class",a).attr("width",e).attr("height",n).append("g"),this.st.mainG=this.st.svg.append("g").attr("transform",`translate(${this.st.margin.left},${this.st.margin.top})`)}calculateTimeCostPoints(){return new Promise((e,n)=>{this.createChart(this.historyArray).then(i=>e(i)).catch(i=>n(i))})}init(e,n,i,a){this.id=i,this.st=(new Jn).create(),this.st.innerHeight=n-this.st.margin.top-this.st.margin.bottom,this.st.innerWidth=e-this.st.margin.left-this.st.margin.right,this.initSvg(e,n,a),this.sub=this.eventService.get(H.cu).pipe((0,F.h)(r=>!!r)).subscribe(r=>this.historyArray=r)}createChart(e){return new Promise((n,i)=>{this.getTimeCostForCompletedPoints(e).then(a=>{this.initSubscriptions(),this.clearChart(a)||this.drawChart(a),n(a)}).catch(a=>i(a))})}getTimeCostForCompletedPoints(e){return new Promise((n,i)=>{const a=this.completion.getCompletedNodes(e),r=a.map(c=>this.zametekApi.compileArrowGraph(c.data));r.length>0?(0,jn.D)(r).subscribe(c=>{const l=[],d=[];c.forEach((g,m)=>{if(g){this.fileCompiler.compileProjectFromFile(g),this.pcdAutoGen.autogeneratePcds(g);const T=a[m],b=this.getTimeCostPoint(g,T.id);d.push(b),T.metadata={assignmentCompleted:!0,time:b.time,cost:b.cost};const D=this.treeSerializer.fromJson(T);D.data=g,l.push(D)}}),this.eventService.get(H.SV).next(l),this.eventService.get(H.yi).next(d),this.prevTimeCostPoints=d,n(d)},c=>i(c)):n([])})}initSubscriptions(){this.selectedSub||(this.selectedSub=this.eventService.get(H.X2).pipe((0,F.h)(e=>void 0!==e)).subscribe(e=>{this.selectedNodeId=e,this.prevTimeCostPoints&&this.drawChart(this.prevTimeCostPoints)}))}getTimeCostPoint(e,n){const i=e.integrations.sort((d,g)=>d.eft-g.eft),a=e.integrations[i.length-1];let r=null;return a.eft>0&&(r=a.eft),{time:r,cost:this.indirects.calculateIndirectCosts(e),nodeId:n}}destroy(){this.sub&&this.sub.unsubscribe(),this.selectedSub&&this.selectedSub.unsubscribe()}createAxisTitles(){const e=this.st.mainG.append("g").attr("class","titles"),{top:n}=this.st.margin;e.append("text").text("Time (days)").attr("text-anchor","middle").attr("transform","translate("+this.st.innerWidth/2+", "+(this.st.innerHeight+n)+") scale(1)"),e.append("text").text("Cost (Man-days)").attr("text-anchor","middle").attr("transform","translate(-40,"+this.st.innerHeight/2+") rotate(270)")}clearChart(e){const n=0===e.length;if(this.st.mainG.selectAll("*").remove(),this.st.svg.select("g.empty-msg").remove(),n){const i="No data exists for Time Cost curve";return this.st.svg.attr("transform",null),this.st.svg.append("g").attr("class","empty-msg").append("text").attr("class","missing-data").attr("y",this.st.innerHeight/3).attr("x",this.st.innerWidth/2+100).style("text-anchor","end").text(i),!0}return!1}drawChart(e){this.st.mainG.selectAll("*").remove();const n=ee.BYU().domain([0,Math.max(...e.map(a=>a.time))]).range([0,this.st.innerWidth]),i=ee.BYU().domain([0,Math.max(...e.map(a=>a.cost))]).range([this.st.innerHeight,0]);this.st.mainG.append("g").attr("class","x axis").attr("transform","translate(0,"+this.st.innerHeight+")").call(ee.LLu(n)),this.st.mainG.append("g").attr("class","y axis").call(ee.y4O(i)),this.createAxisTitles(),this.st.mainG.selectAll(".dot").data(e).enter().append("circle").attr("class","dot").classed("selected-options",a=>null!==this.selectedNodeId&&a.nodeId===this.selectedNodeId).attr("cx",(a,r)=>n(a.time)).attr("cy",a=>i(a.cost)).attr("r",4).on("click",(a,r)=>{this.eventService.get(H.Xq).next(r.nodeId),this.selectedNodeId=r.nodeId,this.drawChart(e)})}static#e=this.\u0275fac=function(n){return new(n||s)(t.LFG(q.WO),t.LFG(Gn),t.LFG(Bn.h),t.LFG(Hn.z),t.LFG($r),t.LFG(Kr.Q),t.LFG(Xr.v))};static#t=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const ea=["chart"];function ta(s,o){1&s&&t._UZ(0,"div",7)}function na(s,o){1&s&&(t.TgZ(0,"div",8),t._uU(1,"An Error Occurred Loading"),t.qZA())}const ia=(s,o)=>({"min-height.px":s,"min-width.px":o});let Pt=(()=>{class s{constructor(e){this.eventService=e,this.loading=!1,this.loadingError=!1,this.ui=(0,t.f3M)(Ot)}calculateTimeCost(){this.loading=!0,this.loadingError=!1,this.ui.calculateTimeCostPoints().then(e=>this.loading=!1).catch(e=>{this.loadingError=!0,this.loading=!1,console.error(e)})}ngOnInit(){this.ui.init(this.width,this.height,this.id,this.chart.nativeElement),this.sub=this.eventService.get(H.yi).pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.ui.initSubscriptions(),this.ui.clearChart(e),this.ui.drawChart(e)})}ngOnDestroy(){this.ui.destroy(),this.sub?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(q.WO))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-time-cost"]],viewQuery:function(n,i){if(1&n&&t.Gf(ea,7),2&n){let a;t.iGM(a=t.CRH())&&(i.chart=a.first)}},inputs:{id:"id",width:"width",height:"height"},features:[t._Bn([Ot])],decls:8,vars:7,consts:[[1,"btn-container"],["href","javascript:void(0)",1,"calc-button",3,"click"],[1,"chart-container",3,"ngStyle"],[1,"time-cost-container",3,"hidden"],["chart",""],["class","loader",4,"ngIf"],["class","error-msg",4,"ngIf"],[1,"loader"],[1,"error-msg"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return i.calculateTimeCost()}),t._uU(2,"Calculate Time Cost Curve"),t.qZA()(),t.TgZ(3,"div",2),t._UZ(4,"div",3,4),t.YNc(6,ta,1,0,"div",5)(7,na,2,0,"div",6),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngStyle",t.WLB(4,ia,i.height,i.width)),t.xp6(1),t.Q6J("hidden",i.loading||i.loadingError),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",i.loadingError))},dependencies:[M.O5,M.PC],styles:["cp-time-cost .y.axis path{display:block}cp-time-cost .line{stroke:#007bff}cp-time-cost circle{fill:#4a4;stroke:#4a4;stroke-width:1px;cursor:pointer}cp-time-cost .title-row{margin-top:13px}cp-time-cost .assign-button{margin-bottom:8px}cp-time-cost .assign-lbl{padding:8px 60px 8px 0}cp-time-cost circle.selected-options{fill:#8b0000;stroke:#000;stroke-width:2px}cp-time-cost svg{background-color:#fff}cp-time-cost .time-cost-container{overflow:hidden;cursor:text;background-color:#f9f9f9;border:1px solid #ddd;height:auto;border-radius:0;width:475px;display:flex;justify-content:center;height:578px;align-items:center}cp-time-cost .calc-button{margin:10px}cp-time-cost .axis *{font-size:.75rem}cp-time-cost .btn-container{padding:10px 0}cp-time-cost .loader{color:#888;width:4px;aspect-ratio:1;border-radius:50%;box-shadow:19px 0 0 7px,38px 0 0 3px,57px 0;transform:translate(-38px);animation:l21 .5s infinite alternate linear}@keyframes l21{50%{box-shadow:19px 0 0 3px,38px 0 0 7px,57px 0 0 3px}to{box-shadow:19px 0,38px 0 0 3px,57px 0 0 7px}}cp-time-cost .chart-container{position:relative;background-color:#fff}cp-time-cost .loader{position:absolute;top:50%;left:50%}cp-time-cost .error-msg{color:red;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n"],encapsulation:2})}return s})();var ra=h(1970),aa=h(5269),sa=h(2357);let oa=(()=>{class s{constructor(e){this.dashboard=e,this.isLassoOn=!1,this.project=null}ngOnInit(){this.sub=this.dashboard.activeProject$.pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.project=e})}toggleLasso(e){this.project&&(this.project.profile.view.lassoOn=e,this.project.profile.view.lassoedLinks=[],this.project.profile.view.lassoedNodes=[],this.dashboard.updateProject(this.project,!0))}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(q.Ou))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-resource-arrow"]],decls:12,vars:4,consts:[[1,"options"],[1,"lasso-title"],[1,"form-check-inline"],[1,"form-check-label"],["name","lasso-on","type","radio",1,"form-check-input",3,"change"],["checked","","name","lasso-on","type","radio",1,"form-check-input",3,"change"],[3,"showFastCreator","width","height","rebuild"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Lasso Tool:"),t.qZA(),t.TgZ(3,"div",2)(4,"label",3)(5,"input",4),t.NdJ("change",function(){return i.toggleLasso(!0)}),t.qZA(),t._uU(6,"On "),t.qZA()(),t.TgZ(7,"div",2)(8,"label",3)(9,"input",5),t.NdJ("change",function(){return i.toggleLasso(!1)}),t.qZA(),t._uU(10,"Off "),t.qZA()()(),t._UZ(11,"cp-arrow-chart",6)),2&n&&(t.xp6(11),t.Q6J("showFastCreator",!1)("width",1214)("height",700)("rebuild",!0))},dependencies:[sa.w],styles:[".options[_ngcontent-%COMP%]{display:flex}.lasso-title[_ngcontent-%COMP%]{margin-right:15px}"]})}return s})(),ca=(()=>{class s{constructor(e){this.viewMultiverse="branching",this.id=+e.snapshot.params.id}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(Y.gz))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-assign-change-charts"]],decls:29,vars:11,consts:[[1,"options"],[1,"form-check-inline"],[1,"form-check-label"],["checked","","name","multiverse-options","type","radio",1,"form-check-input",3,"change"],["name","multiverse-options","type","radio",1,"form-check-input",3,"change"],[1,"change-tracking",3,"hidden"],[1,"tree-buttons"],[3,"fileActions"],[1,"tree-chart"],[3,"width","height","id"],[3,"hidden"],[1,"current-view","arrow-view"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2)(3,"input",3),t.NdJ("change",function(){return i.viewMultiverse="branching"}),t.qZA(),t._uU(4,"Branch "),t.qZA()(),t.TgZ(5,"div",1)(6,"label",2)(7,"input",4),t.NdJ("change",function(){return i.viewMultiverse="earnedvalue"}),t.qZA(),t._uU(8,"Time Cost "),t.qZA()(),t.TgZ(9,"div",1)(10,"label",2)(11,"input",4),t.NdJ("change",function(){return i.viewMultiverse="stacked"}),t.qZA(),t._uU(12,"Stacked "),t.qZA()(),t.TgZ(13,"div",1)(14,"label",2)(15,"input",4),t.NdJ("change",function(){return i.viewMultiverse="arrow"}),t.qZA(),t._uU(16,"Arrow "),t.qZA()()(),t.TgZ(17,"div",5)(18,"div",6),t._UZ(19,"cp-tree-buttons",7),t.qZA(),t.TgZ(20,"div",8),t._UZ(21,"cp-project-tree",9),t.qZA()(),t.TgZ(22,"div",10),t._UZ(23,"cp-time-cost",9),t.qZA(),t.TgZ(24,"div",10),t._uU(25,"Add Stacked Resources Here"),t.qZA(),t.TgZ(26,"div",10)(27,"div",11),t._UZ(28,"cp-resource-arrow"),t.qZA()()),2&n&&(t.xp6(17),t.Q6J("hidden","branching"!==i.viewMultiverse),t.xp6(2),t.Q6J("fileActions",!0),t.xp6(2),t.Q6J("width",460)("height",660)("id",i.id),t.xp6(1),t.Q6J("hidden","earnedvalue"!==i.viewMultiverse),t.xp6(1),t.Q6J("width",460)("height",560)("id",i.id),t.xp6(1),t.Q6J("hidden","stacked"!==i.viewMultiverse),t.xp6(2),t.Q6J("hidden","arrow"!==i.viewMultiverse))},dependencies:[Pt,ra.P,aa.u,oa],styles:[".change-tracking[_ngcontent-%COMP%]{width:475px}.change-tracking[_ngcontent-%COMP%]   .tree-chart[_ngcontent-%COMP%]{overflow:hidden;cursor:text;background-color:#fff;border:1px solid #ddd;height:auto;border-radius:0;width:475px;display:flex;justify-content:center;height:680px;align-items:center}.change-tracking[_ngcontent-%COMP%]   cp-project-tree[_ngcontent-%COMP%]{width:100%}.options[_ngcontent-%COMP%]{padding-bottom:3px}.tree-buttons[_ngcontent-%COMP%]{padding:10px}.arrow-view[_ngcontent-%COMP%]{margin-right:41px;margin-top:6px}"]})}return s})(),la=(()=>{class s{constructor(e){this.id=+e.snapshot.params.id}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(Y.gz))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-assign-main"]],decls:5,vars:1,consts:[[1,"layout"],[1,"grid-container"],[3,"id"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"cp-assign-activity-grid",2),t.qZA(),t._UZ(3,"cp-activity-tags")(4,"cp-assign-change-charts"),t.qZA()),2&n&&(t.xp6(2),t.Q6J("id",i.id))},dependencies:[Rn,qn,ca],styles:[".sidebar[_ngcontent-%COMP%]{text-align:center;width:100%;color:#fff;display:flex;align-items:center;flex-direction:column}.sidebar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin:1px}.libar-container[_ngcontent-%COMP%]{display:flex}.libar-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:3px}.disabled-a[_ngcontent-%COMP%]{color:#999}.peek[_ngcontent-%COMP%]{margin-right:7px}.grid-container[_ngcontent-%COMP%]{overflow:hidden;cursor:text;background-color:#fff;border:1px solid #ddd;height:auto;border-radius:0;width:1100px;margin:15px;padding:15px}.layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:234px 1fr;grid-template-columns:1150px 1fr}.layout[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{grid-column:1/2;grid-row:1/-1}.layout[_ngcontent-%COMP%]   cp-activity-tags[_ngcontent-%COMP%]{grid-row:1/2;grid-column:2/3}.assign-button[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:4px}.grid-container[_ngcontent-%COMP%]{height:calc(100vh - 114px);overflow-y:auto}"]})}return s})();var da=h(2497),ua=h(4819),ha=h(7007);function pa(s,o){1&s&&(t.TgZ(0,"div",6)(1,"div",7)(2,"div",8),t._uU(3,"No projects to compare. Complete assignments and click Calculate Time Cost Curve."),t.qZA()()())}const ga=s=>({"selected-node":s}),ma=()=>({top:15,right:15,left:15,bottom:15});function fa(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.selectTimeCostNode(a.id))}),t.TgZ(1,"div",10),t._UZ(2,"cp-shallow-s-snapshot",11)(3,"cp-stacked-resources",12)(4,"cp-arrow-snapshot",11),t.qZA(),t.TgZ(5,"div",13)(6,"div"),t._uU(7," Time: "),t.TgZ(8,"div"),t._uU(9),t.qZA(),t.TgZ(10,"div"),t._uU(11),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.qZA()(),t.TgZ(14,"div"),t._uU(15," Cost: "),t.TgZ(16,"div"),t._uU(17),t.qZA(),t.TgZ(18,"div"),t._uU(19),t.qZA(),t.TgZ(20,"div"),t._uU(21,"Direct Cost"),t.qZA(),t.TgZ(22,"div"),t._uU(23,"Indirect Cost"),t.qZA()(),t.TgZ(24,"div"),t._uU(25," Resources: "),t.TgZ(26,"div"),t._uU(27,"Average Staffing --"),t.qZA(),t.TgZ(28,"div"),t._uU(29),t.qZA()(),t.TgZ(30,"div"),t._uU(31," Risk: "),t.TgZ(32,"div"),t._uU(33),t.qZA(),t.TgZ(34,"div"),t._uU(35),t.qZA(),t.TgZ(36,"div"),t._uU(37),t.qZA()()()()}if(2&s){const e=o.$implicit,n=t.oxw();t.Q6J("ngClass",t.VKq(22,ga,e.id===n.selectedNodeId)),t.xp6(2),t.Q6J("project",e.data)("width",390)("height",250),t.xp6(1),t.Q6J("project",e.data)("width",390)("height",250)("barWidth",10)("showAxes",!1)("margin",t.DdM(24,ma)),t.xp6(1),t.Q6J("project",e.data)("width",300)("height",200),t.xp6(5),t.hij("Duraton in Days ",e.metadata.time,""),t.xp6(2),t.hij("Ealriest Finish Date ",e.data.profile.staffing.earliestFinishDate,""),t.xp6(2),t.hij("LFT ",e.data.profile.staffing.lft,""),t.xp6(4),t.hij("Calculated MD ",e.metadata.cost,""),t.xp6(2),t.hij("Effort MM ",e.data.profile.staffing.effortInMM,""),t.xp6(10),t.hij("Resource Pool ",e.data.resources.length,""),t.xp6(4),t.hij("Criticality ",e.data.profile.risk.criticalityRisk,""),t.xp6(2),t.hij("Activity ",e.data.profile.risk.activityRisk,""),t.xp6(2),t.hij("Fibonacci ",e.data.profile.risk.fibonacciRisk,"")}}let _a=(()=>{class s{constructor(e,n){this.eventService=e,this.completedNodes=[],this.selectedNodeId=null,this.id=+n.snapshot.params.id}ngOnInit(){this.completedNodes=[],this.nodeClickSub=this.eventService.get(H.Xq).pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.selectedNodeId=e}),this.sub=this.eventService.get(H.SV).pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.completedNodes=e})}ngOnDestroy(){this.sub&&this.sub.unsubscribe(),this.nodeClickSub&&this.nodeClickSub.unsubscribe()}selectTimeCostNode(e){this.eventService.get(H.X2).next(e),this.selectedNodeId=e}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(q.WO),t.Y36(Y.gz))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-compare-main"]],decls:7,vars:5,consts:[[1,"layout"],[1,"grid-container"],["class","empty-container",4,"ngIf"],[1,"chart-container"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"width","height","id"],[1,"empty-container"],[1,"empty-msg"],[1,"empty-state-text"],[3,"ngClass","click"],[1,"charts"],[3,"project","width","height"],[3,"project","width","height","barWidth","showAxes","margin"],[1,"project-stats"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,pa,4,0,"div",2),t.TgZ(3,"div",3),t.YNc(4,fa,38,25,"div",4),t.qZA()(),t.TgZ(5,"div"),t._UZ(6,"cp-time-cost",5),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngIf",0===i.completedNodes.length),t.xp6(2),t.Q6J("ngForOf",i.completedNodes),t.xp6(2),t.Q6J("width",460)("height",560)("id",i.id))},dependencies:[M.mk,M.sg,M.O5,Pt,da.b,ua.M,ha.J],styles:[".chart-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px}.charts[_ngcontent-%COMP%]{display:flex;flex-direction:row}.charts[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:20px 20px 5px}.project-stats[_ngcontent-%COMP%]{display:flex;flex-direction:row}.project-stats[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 20px 20px}.layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:234px 1fr;grid-template-columns:1150px 515px}.layout[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{grid-column:1/2;grid-row:1/-1}.grid-container[_ngcontent-%COMP%]{overflow:hidden;cursor:text;background-color:#f9f9f9;border:1px solid #ddd;height:auto;border-radius:0;width:1100px;margin:15px;padding:15px}.selected-node[_ngcontent-%COMP%]{background-color:#ddd;border:1px solid #bbb}.empty-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;height:calc(100vh - 173px)}.empty-msg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:20px;color:#666}"]})}return s})();function va(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",10),t._uU(1),t.TgZ(2,"span",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.removeResource(a))}),t._uU(3,"X"),t.qZA()()}if(2&s){const e=o.$implicit;t.xp6(1),t.hij("",e.profile.name," ")}}function ya(s,o){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,va,4,1,"div",9),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.project.resources)}}function Ca(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",10),t._uU(1),t.TgZ(2,"span",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.removeRole(a))}),t._uU(3,"X"),t.qZA()()}if(2&s){const e=o.$implicit;t.xp6(1),t.hij("",e.name," ")}}function ba(s,o){if(1&s&&(t.TgZ(0,"div"),t.YNc(1,Ca,4,1,"div",9),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.project.roles)}}let wa=(()=>{class s{constructor(e,n,i,a,r){this.dashboard=n,this.aManager=i,this.roleFactory=a,this.resourceFactory=r,this.isRoleView=!0,this.newRoleTxt="",this.newResourcetTxt="",this.id=+e.snapshot.params.id,this.project$=this.dashboard.activeProject$}ngOnInit(){this.subscription=this.project$.pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.project=e}),this.aManager.colorBy="resource"}removeRole(e){const n=this.project.roles.indexOf(e);this.project.roles.splice(n,1),this.dashboard.updateProject(this.project,!1)}addRole(e){this.roleFactory.addRole(e.value,this.project.roles),this.dashboard.updateProject(this.project,!1),this.newRoleTxt=""}removeResource(e){const n=this.project.resources.indexOf(e);this.project.resources.splice(n,1),this.dashboard.updateProject(this.project,!1)}addResource(e){this.resourceFactory.addResource(e.value,this.project.resources),this.dashboard.updateProject(this.project,!1),this.newResourcetTxt=""}setTagType(e){this.isRoleView="role"===e}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(Y.gz),t.Y36(q.Ou),t.Y36(ge),t.Y36(Ae),t.Y36(Pe))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-resource-tags"]],decls:22,vars:4,consts:[[1,"chart-options"],[1,"role-title"],[1,"example-form-field"],["matInput","","type","text",3,"ngModel","ngModelChange","keydown.enter"],["newResource",""],[1,"btn","btn-secondary","add",3,"click"],[4,"ngIf"],[1,"chart-options","roles"],["newRole",""],["class","role",4,"ngFor","ngForOf"],[1,"role"],[3,"click"]],template:function(n,i){if(1&n){const a=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Resource"),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Resource (card)"),t.qZA(),t.TgZ(6,"input",3,4),t.NdJ("ngModelChange",function(c){return i.newResourcetTxt=c})("keydown.enter",function(c){return i.addResource(c.target)}),t.qZA()(),t.TgZ(8,"button",5),t.NdJ("click",function(){t.CHM(a);const c=t.MAs(7);return t.KtG(i.addResource(c.value))}),t._uU(9,"Add"),t.qZA(),t.YNc(10,ya,2,1,"div",6),t.qZA(),t.TgZ(11,"div",7)(12,"div",1),t._uU(13,"Roles"),t.qZA(),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16,"New Role"),t.qZA(),t.TgZ(17,"input",3,8),t.NdJ("ngModelChange",function(c){return i.newRoleTxt=c})("keydown.enter",function(c){return i.addRole(c.target)}),t.qZA()(),t.TgZ(19,"button",5),t.NdJ("click",function(){t.CHM(a);const c=t.MAs(18);return t.KtG(i.addRole(c.value))}),t._uU(20,"Add"),t.qZA(),t.YNc(21,ba,2,1,"div",6),t.qZA()}2&n&&(t.xp6(6),t.Q6J("ngModel",i.newResourcetTxt),t.xp6(4),t.Q6J("ngIf",void 0!==i.project),t.xp6(7),t.Q6J("ngModel",i.newRoleTxt),t.xp6(4),t.Q6J("ngIf",void 0!==i.project))},dependencies:[M.sg,M.O5,S.Fj,S.JJ,S.On,V.KE,V.hX,fe.Nt],styles:["cp-tag-selection[_ngcontent-%COMP%]{padding-top:3px;display:block}.chart-options[_ngcontent-%COMP%]{padding-top:18px}.add[_ngcontent-%COMP%]{margin-left:10px}.roles[_ngcontent-%COMP%]{margin-top:30px}"]})}return s})();function xa(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.name="")}),t.qZA()}}function Ta(s,o){if(1&s&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&s){const e=o.$implicit;t.Q6J("value",e.name),t.xp6(1),t.Oqu(e.name)}}let Ma=(()=>{class s{constructor(){this.update=new t.vpe,this.delete=new t.vpe,this.editing=!1,this.myControl=new S.NI}ngOnInit(){this.role=this.assignedRoles[0]?.name}deleteResource(){confirm("Continue with delete?")&&this.delete.emit(this.index)}updateResource(){const e=this.options.find(n=>n.name===this.role);if(e){const n=this.options.indexOf(e);this.update.emit({name:this.name,roleIndex:n,resourceIndex:this.index}),this.editing=!1}}ngOnChanges(e){if(e.options){this.options=e.options.currentValue;const n=this.options.find(i=>i.name===this.role);n&&(this.role=n?.name)}null!=e.index&&(this.index=e.index.currentValue)}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-profile-card"]],inputs:{options:"options",name:"name",assignedRoles:"assignedRoles",index:"index"},outputs:{update:"update",delete:"delete"},features:[t.TTD],decls:32,vars:12,consts:[[1,"example-card"],["mat-card-avatar","",1,"user","fas","fa-user"],[1,"val",3,"hidden"],[1,"example-form-field","val",3,"hidden"],["matInput","","type","text",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"title"],["appearance","fill",1,"val",3,"hidden"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"clearfix"],[1,"float-right"],["href","javascript:void(0)",1,"delete-btn",3,"click"],[1,"btn","btn-secondary",3,"hidden","click"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(n,i){1&n&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header"),t._UZ(2,"i",1),t.TgZ(3,"mat-card-title")(4,"div",2),t._uU(5),t.qZA(),t.TgZ(6,"mat-form-field",3)(7,"mat-label"),t._uU(8,"Clearable input"),t.qZA(),t.TgZ(9,"input",4),t.NdJ("ngModelChange",function(r){return i.name=r}),t.qZA(),t.YNc(10,xa,1,0,"button",5),t.qZA()(),t.TgZ(11,"mat-card-subtitle")(12,"div",6),t._uU(13,"Role"),t.qZA(),t.TgZ(14,"div",2),t._uU(15),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18,"Select an option"),t.qZA(),t.TgZ(19,"mat-select",8),t.NdJ("valueChange",function(r){return i.role=r}),t.TgZ(20,"mat-option"),t._uU(21,"None"),t.qZA(),t.YNc(22,Ta,2,2,"mat-option",9),t.qZA()()()(),t.TgZ(23,"mat-card-actions")(24,"div",10)(25,"div",11)(26,"a",12),t.NdJ("click",function(){return i.deleteResource()}),t._uU(27,"Delete"),t.qZA(),t.TgZ(28,"button",13),t.NdJ("click",function(){return i.editing=!0}),t._uU(29,"Edit"),t.qZA(),t.TgZ(30,"button",13),t.NdJ("click",function(){return i.updateResource()}),t._uU(31,"Uptdate"),t.qZA()()()()()),2&n&&(t.xp6(4),t.Q6J("hidden",i.editing),t.xp6(1),t.Oqu(i.name),t.xp6(1),t.Q6J("hidden",!i.editing),t.xp6(3),t.Q6J("ngModel",i.name),t.xp6(1),t.Q6J("ngIf",i.name),t.xp6(4),t.Q6J("hidden",i.editing),t.xp6(1),t.Oqu(i.role),t.xp6(1),t.Q6J("hidden",!i.editing),t.xp6(3),t.Q6J("value",i.role),t.xp6(3),t.Q6J("ngForOf",i.options),t.xp6(6),t.Q6J("hidden",i.editing),t.xp6(2),t.Q6J("hidden",!i.editing))},dependencies:[M.sg,M.O5,S.Fj,S.JJ,S.On,Le,Ve,$e,ze,We,Qe,V.KE,V.hX,V.R9,yn,x.ey,fe.Nt],styles:['.example-card[_ngcontent-%COMP%]{width:400px}.example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}.user[_ngcontent-%COMP%]{font-size:30px}.delete-btn[_ngcontent-%COMP%]{padding-right:20px}.clearfix[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}.val[_ngcontent-%COMP%]{font-size:1.1rem;padding-bottom:10px}']})}return s})();function Oa(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"cp-profile-card",4),t.NdJ("update",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.updateResource(i))})("delete",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.deleteResource(i))}),t.qZA()}if(2&s){const e=o.$implicit,n=o.index,i=t.oxw(2);t.Q6J("name",e.profile.name)("assignedRoles",e.assign.roles)("options",i.roles)("index",n)}}function Pa(s,o){if(1&s&&(t.TgZ(0,"div",1)(1,"div",2),t.YNc(2,Oa,1,4,"cp-profile-card",3),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.project.resources)}}let Aa=(()=>{class s{constructor(e,n,i){this.dashboard=e,this.rsF=i,this.id=+n.snapshot.params.id}ngOnInit(){this.subscription=this.dashboard.activeProject$.pipe((0,F.h)(e=>!!e)).subscribe(e=>{this.project=e,this.roles=e.roles.map(n=>({name:n.name}))})}updateResource(e){const n=this.project.resources[e.resourceIndex];if(n.profile.name=e.name,null!==e.roleIndex){const a=this.rsF.getSummary(this.project.roles[e.roleIndex]);n.assign.roles=[a]}}deleteResource(e){this.project.resources.splice(e,1),this.dashboard.updateProject(this.project,!1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(q.Ou),t.Y36(Y.gz),t.Y36(Ae))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-resource-cards"]],decls:1,vars:1,consts:[["class","activity-list-container",4,"ngIf"],[1,"activity-list-container"],[1,"card-container"],[3,"name","assignedRoles","options","index","update","delete",4,"ngFor","ngForOf"],[3,"name","assignedRoles","options","index","update","delete"]],template:function(n,i){1&n&&t.YNc(0,Pa,3,1,"div",0),2&n&&t.Q6J("ngIf",void 0!==i.project)},dependencies:[M.sg,M.O5,Ma],styles:["perfect-scrollbar[_ngcontent-%COMP%]{position:relative}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:10px}"]})}return s})(),ka=(()=>{class s{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-resources-main"]],decls:4,vars:0,consts:[[1,"layout"],[1,"grid-container"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"cp-resource-cards"),t.qZA(),t._UZ(3,"cp-resource-tags"),t.qZA())},dependencies:[wa,Aa],styles:[".grid-container[_ngcontent-%COMP%]{overflow:hidden;cursor:text;background-color:#f9f9f9;border:1px solid #ddd;height:auto;border-radius:0;width:1300px;height:965px;margin:15px;padding:15px}.layout[_ngcontent-%COMP%]{display:grid;grid-template-rows:234px 1fr;grid-template-columns:1369px 316px}.layout[_ngcontent-%COMP%]   .grid-container[_ngcontent-%COMP%]{grid-column:1/2;grid-row:1/-1}.layout[_ngcontent-%COMP%]   cp-activity-tags[_ngcontent-%COMP%]{grid-row:1/2;grid-column:2/3}"]})}return s})();function Za(s,o){1&s&&t._UZ(0,"cp-resources-main")}function Sa(s,o){1&s&&t._UZ(0,"cp-compare-main")}let Da=(()=>{class s{constructor(e,n,i){this.dashboard=e,this.router=i,this.refresh=0,this.id=+n.snapshot.params.id,this.project$=this.dashboard.activeProject$}ngOnInit(){this.subRoute=this.getSubpage(window.location.href),this.router.events.subscribe(e=>{if(null!=e&&null!=e.url){const i=this.getSubpage(e.url);""!==i&&(this.subRoute=i)}}),this.subscription=this.project$.pipe((0,F.h)(e=>!!e)).subscribe(e=>this.refresh++)}canDeactivate(){return this.refresh<2}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getSubpage(e){const n=e.split("sidebar:");if(null!=n&&n.length>1){const i=n[1].split("/");if(null!=i)return i[0]}return""}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(q.Ou),t.Y36(Y.gz),t.Y36(Y.F0))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-assign-layout"]],decls:3,vars:3,consts:[[3,"hidden"],[4,"ngIf"]],template:function(n,i){1&n&&(t._UZ(0,"cp-assign-main",0),t.YNc(1,Za,1,0,"cp-resources-main",1)(2,Sa,1,0,"cp-compare-main",1)),2&n&&(t.Q6J("hidden","assignbar"!==i.subRoute),t.xp6(1),t.Q6J("ngIf","resources"===i.subRoute),t.xp6(1),t.Q6J("ngIf","compare"===i.subRoute))},dependencies:[M.O5,la,_a,ka]})}return s})();var Ia=h(5861),At=h(3830),Ra=h(2425);const Ua=s=>["resources",s],Fa=s=>({sidebar:s,subcontent:null}),Ea=s=>({outlets:s}),Ya=s=>["/projects/lp/profile/-3",s];let Ue=(()=>{class s{constructor(e,n,i,a,r){this.dashboard=e,this.route=n,this.router=i,this.toastr=a,this.storageApi=r,this.id=+this.route.snapshot.params.id,this.subscription=this.dashboard.activeProject$.subscribe(c=>{this.project=c})}navigateActivities(){this.router.navigateByUrl(`resources/(${this.id}//sidebar:assignbar/${this.id})`)}navigateResources(){this.router.navigateByUrl(`resources/(${this.id}//sidebar:resources/${this.id})`)}navigateCompare(){this.router.navigateByUrl(`resources/(${this.id}//sidebar:compare/${this.id})`)}stash(){try{this.storageApi.set(At.H3,this.project)}catch(e){return this.toastr.error("Stash Chart","Error occured."),void console.error(e)}this.toastr.success("Stash Chart","Success!")}unstash(){var e=this;return(0,Ia.Z)(function*(){try{const n=yield e.storageApi.get(At.H3);n&&e.dashboard.updateProject(n,!1)}catch(n){return e.toastr.error("Unstash Chart","Error occured."),void console.error(n)}e.toastr.success("Unstash Chart","Success!")})()}ngOnInit(){}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||s)(t.Y36(q.Ou),t.Y36(Y.gz),t.Y36(Y.F0),t.Y36(Ra._W),t.Y36(q.$y))};static#t=this.\u0275cmp=t.Xpm({type:s,selectors:[["cp-assign-bar"]],decls:19,vars:9,consts:[[1,"sidebar"],[1,"title"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary",2,"cursor","pointer",3,"click"],[1,"msg"],[1,"btn","btn-secondary",3,"routerLink"],[1,"btn","btn-secondary"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Assign Resources"),t.qZA(),t.TgZ(3,"a",2),t.NdJ("click",function(){return i.navigateActivities()}),t._uU(4,"Activities"),t.qZA(),t.TgZ(5,"a",2),t.NdJ("click",function(){return i.navigateResources()}),t._uU(6,"Resources"),t.qZA(),t.TgZ(7,"a",2),t.NdJ("click",function(){return i.navigateCompare()}),t._uU(8,"Compare"),t.qZA(),t.TgZ(9,"a",3),t.NdJ("click",function(){return i.unstash()}),t._uU(10,"Unstash"),t.qZA(),t.TgZ(11,"a",2),t.NdJ("click",function(){return i.stash()}),t._uU(12,"Stash"),t.qZA(),t.TgZ(13,"div",4),t._uU(14,"Go to Profile and load from local storage. Must Save First before going!"),t.qZA(),t.TgZ(15,"a",5),t._uU(16,"Go To Profile"),t.qZA(),t.TgZ(17,"a",6),t._uU(18,"Load from backend"),t.qZA()()),2&n&&(t.xp6(15),t.Q6J("routerLink",t.VKq(7,Ya,t.VKq(5,Ea,t.VKq(3,Fa,t.VKq(1,Ua,-3))))))},dependencies:[Y.rH],styles:[".sidebar[_ngcontent-%COMP%]{width:100%;color:#fff;display:flex;align-items:flex-start;flex-direction:column}.sidebar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:28px;padding-bottom:10px;font-size:1rem}.sidebar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin:1px;text-align:left;padding-left:28px}.sidebar[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{padding:12px}.libar-container[_ngcontent-%COMP%]{display:flex}.libar-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:3px}.disabled-a[_ngcontent-%COMP%]{color:#999}.peek[_ngcontent-%COMP%]{margin-right:7px}cp-arrow-snapshot[_ngcontent-%COMP%]{position:fixed;border:2px solid #666}"]})}return s})();const Na=[{path:"",component:xn.r,children:[{path:":id",component:Da,resolve:{items:bn.D},canDeactivate:[wn.I]},{path:"assignbar/:id",component:Ue,outlet:"sidebar"},{path:"resources/:id",component:Ue,outlet:"sidebar"},{path:"compare/:id",component:Ue,outlet:"sidebar"}]}];let qa=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[Y.Bz.forChild(Na),Y.Bz]})}return s})(),Ja=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[M.ez]})}return s})();var ja=h(2457),Ga=h(9810),Ba=h(415),Ha=h(5547),La=h(1281);let Qa=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[M.ez,qa,Ja,ja.n,S.u5,zt,S.UX,S.u5,Ga.M,Ba.r,Ha.S,La.E,Cn,$t.Bb,dt.Ps,me.FA,fe.c,x.XK]})}return s})()},96:(Et,ue,h)=>{h.d(ue,{Q:()=>t});var M=h(9212);let t=(()=>{class x{fromJson(R){return R=R??{},{name:R?.name??null,group:R?.group??null,subgroup:R?.subgroup??null,metadata:R?.metadata??null,data:R?.data??null,children:R?.children??[],id:R?.id??null,parent:R.parent??null,parentNodeId:R?.parentNodeId??null}}toJson(R){}head(){return{id:0,group:0,subgroup:0,name:"head",data:null,children:[],parent:null,metadata:null,parentNodeId:null}}static#e=this.\u0275fac=function(he){return new(he||x)};static#t=this.\u0275prov=M.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}return x})()}}]);