"use strict";(self.webpackChunkcritical_web=self.webpackChunkcritical_web||[]).push([[358],{2433:(En,Ke,y)=>{y.d(Ke,{CK:()=>Q,Fs:()=>U,O0:()=>at,OD:()=>st,RH:()=>dt,RO:()=>lt,Zs:()=>ct,au:()=>ue,d4:()=>ot,eB:()=>Ht,sK:()=>Yt,uB:()=>rt,xn:()=>_t});const Q="project.changetracker.clear",at=-1,rt="library/(grid/0//sidebar:libar/0)",ot="profile/(-2//sidebar:grid/-2)",ue="history/(-2//sidebar:arrow/-2)",st="network/(-2//sidebar:meta/-2)",lt="created.project",ct="project.newtwork.array",Ht="project.filtered.newtwork.array",Yt="jira.token.key",dt="jira.token.expiry.key",U="You are not the owner of this project. To edit you must Save Copy.",_t="Go to Parent to enable buttons. Your changes will be preserved."},3358:(En,Ke,y)=>{y.r(Ke),y.d(Ke,{JiraModule:()=>ls});var Q=y(6814),at=y(2381),rt=y(6724),r=y(9212);let ot=(()=>{class e{static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=r.oAB({type:e});static#i=this.\u0275inj=r.cJS({imports:[Q.ez,rt.V]})}return e})();var ue=y(7586),st=y(9918),ke=y(5861),L=y(9862),lt=y(7631);const U="https://api.atlassian.com/ex/jira/",Te="rest/api/3/project/",qt="rest/api/3/issue",Gt="rest/api/3/issuetype",Qt="rest/api/3/issueLink",Wt="/properties",Xt="critical-pass-project";var O=y(2433),ft=y(3633),J=y(9500),ht=y(9315);function pe(e){let i=e.length;for(;--i>=0;)e[i]=0}const mt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$e=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Un=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),oi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),W=new Array(576);pe(W);const Ee=new Array(60);pe(Ee);const Ie=new Array(512);pe(Ie);const Ce=new Array(256);pe(Ce);const bt=new Array(29);pe(bt);const Be=new Array(30);function vt(e,i,t,n,a){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let si,li,ci;function xt(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}pe(Be);const di=e=>e<256?Ie[e]:Ie[256+(e>>>7)],Ze=(e,i)=>{e.pending_buf[e.pending++]=255&i,e.pending_buf[e.pending++]=i>>>8&255},M=(e,i,t)=>{e.bi_valid>16-t?(e.bi_buf|=i<<e.bi_valid&65535,Ze(e,e.bi_buf),e.bi_buf=i>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},H=(e,i,t)=>{M(e,t[2*i],t[2*i+1])},_i=(e,i)=>{let t=0;do{t|=1&e,e>>>=1,t<<=1}while(--i>0);return t>>>1},fi=(e,i,t)=>{const n=new Array(16);let o,c,a=0;for(o=1;o<=15;o++)a=a+t[o-1]<<1,n[o]=a;for(c=0;c<=i;c++){let s=e[2*c+1];0!==s&&(e[2*c]=_i(n[s]++,s))}},hi=e=>{let i;for(i=0;i<286;i++)e.dyn_ltree[2*i]=0;for(i=0;i<30;i++)e.dyn_dtree[2*i]=0;for(i=0;i<19;i++)e.bl_tree[2*i]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ui=e=>{e.bi_valid>8?Ze(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},pi=(e,i,t,n)=>{const a=2*i,o=2*t;return e[a]<e[o]||e[a]===e[o]&&n[i]<=n[t]},yt=(e,i,t)=>{const n=e.heap[t];let a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&pi(i,e.heap[a+1],e.heap[a],e.depth)&&a++,!pi(i,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},gi=(e,i,t)=>{let n,a,c,s,o=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+o++],n+=(255&e.pending_buf[e.sym_buf+o++])<<8,a=e.pending_buf[e.sym_buf+o++],0===n?H(e,a,i):(c=Ce[a],H(e,c+256+1,i),s=mt[c],0!==s&&(a-=bt[c],M(e,a,s)),n--,c=di(n),H(e,c,t),s=$e[c],0!==s&&(n-=Be[c],M(e,n,s)))}while(o<e.sym_next);H(e,256,i)},kt=(e,i)=>{const t=i.dyn_tree,n=i.stat_desc.static_tree,a=i.stat_desc.has_stree,o=i.stat_desc.elems;let c,s,l,_=-1;for(e.heap_len=0,e.heap_max=573,c=0;c<o;c++)0!==t[2*c]?(e.heap[++e.heap_len]=_=c,e.depth[c]=0):t[2*c+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=_<2?++_:0,t[2*l]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=n[2*l+1]);for(i.max_code=_,c=e.heap_len>>1;c>=1;c--)yt(e,t,c);l=o;do{c=e.heap[1],e.heap[1]=e.heap[e.heap_len--],yt(e,t,1),s=e.heap[1],e.heap[--e.heap_max]=c,e.heap[--e.heap_max]=s,t[2*l]=t[2*c]+t[2*s],e.depth[l]=(e.depth[c]>=e.depth[s]?e.depth[c]:e.depth[s])+1,t[2*c+1]=t[2*s+1]=l,e.heap[1]=l++,yt(e,t,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,i)=>{const t=i.dyn_tree,n=i.max_code,a=i.stat_desc.static_tree,o=i.stat_desc.has_stree,c=i.stat_desc.extra_bits,s=i.stat_desc.extra_base,_=i.stat_desc.max_length;let l,d,g,u,f,p,C=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(t[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],u=t[2*t[2*d+1]+1]+1,u>_&&(u=_,C++),t[2*d+1]=u,!(d>n)&&(e.bl_count[u]++,f=0,d>=s&&(f=c[d-s]),p=t[2*d],e.opt_len+=p*(u+f),o&&(e.static_len+=p*(a[2*d+1]+f)));if(0!==C){do{for(u=_-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[_]--,C-=2}while(C>0);for(u=_;0!==u;u--)for(d=e.bl_count[u];0!==d;)g=e.heap[--l],!(g>n)&&(t[2*g+1]!==u&&(e.opt_len+=(u-t[2*g+1])*t[2*g],t[2*g+1]=u),d--)}})(e,i),fi(t,_,e.bl_count)},wi=(e,i,t)=>{let n,o,a=-1,c=i[1],s=0,_=7,l=4;for(0===c&&(_=138,l=3),i[2*(t+1)+1]=65535,n=0;n<=t;n++)o=c,c=i[2*(n+1)+1],!(++s<_&&o===c)&&(s<l?e.bl_tree[2*o]+=s:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=o,0===c?(_=138,l=3):o===c?(_=6,l=3):(_=7,l=4))},mi=(e,i,t)=>{let n,o,a=-1,c=i[1],s=0,_=7,l=4;for(0===c&&(_=138,l=3),n=0;n<=t;n++)if(o=c,c=i[2*(n+1)+1],!(++s<_&&o===c)){if(s<l)do{H(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==a&&(H(e,o,e.bl_tree),s--),H(e,16,e.bl_tree),M(e,s-3,2)):s<=10?(H(e,17,e.bl_tree),M(e,s-3,3)):(H(e,18,e.bl_tree),M(e,s-11,7));s=0,a=o,0===c?(_=138,l=3):o===c?(_=6,l=3):(_=7,l=4)}};let bi=!1;const vi=(e,i,t,n)=>{M(e,0+(n?1:0),3),ui(e),Ze(e,t),Ze(e,~t),t&&e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t};var ea={_tr_init:e=>{bi||((()=>{let e,i,t,n,a;const o=new Array(16);for(t=0,n=0;n<28;n++)for(bt[n]=t,e=0;e<1<<mt[n];e++)Ce[t++]=n;for(Ce[t-1]=n,a=0,n=0;n<16;n++)for(Be[n]=a,e=0;e<1<<$e[n];e++)Ie[a++]=n;for(a>>=7;n<30;n++)for(Be[n]=a<<7,e=0;e<1<<$e[n]-7;e++)Ie[256+a++]=n;for(i=0;i<=15;i++)o[i]=0;for(e=0;e<=143;)W[2*e+1]=8,e++,o[8]++;for(;e<=255;)W[2*e+1]=9,e++,o[9]++;for(;e<=279;)W[2*e+1]=7,e++,o[7]++;for(;e<=287;)W[2*e+1]=8,e++,o[8]++;for(fi(W,287,o),e=0;e<30;e++)Ee[2*e+1]=5,Ee[2*e]=_i(e,5);si=new vt(W,mt,257,286,15),li=new vt(Ee,$e,0,30,15),ci=new vt(new Array(0),Un,0,19,7)})(),bi=!0),e.l_desc=new xt(e.dyn_ltree,si),e.d_desc=new xt(e.dyn_dtree,li),e.bl_desc=new xt(e.bl_tree,ci),e.bi_buf=0,e.bi_valid=0,hi(e)},_tr_stored_block:vi,_tr_flush_block:(e,i,t,n)=>{let a,o,c=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),kt(e,e.l_desc),kt(e,e.d_desc),c=(e=>{let i;for(wi(e,e.dyn_ltree,e.l_desc.max_code),wi(e,e.dyn_dtree,e.d_desc.max_code),kt(e,e.bl_desc),i=18;i>=3&&0===e.bl_tree[2*oi[i]+1];i--);return e.opt_len+=3*(i+1)+5+5+4,i})(e),a=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=a&&(a=o)):a=o=t+5,t+4<=a&&-1!==i?vi(e,i,t,n):4===e.strategy||o===a?(M(e,2+(n?1:0),3),gi(e,W,Ee)):(M(e,4+(n?1:0),3),((e,i,t,n)=>{let a;for(M(e,i-257,5),M(e,t-1,5),M(e,n-4,4),a=0;a<n;a++)M(e,e.bl_tree[2*oi[a]+1],3);mi(e,e.dyn_ltree,i-1),mi(e,e.dyn_dtree,t-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),gi(e,e.dyn_ltree,e.dyn_dtree)),hi(e),n&&ui(e)},_tr_tally:(e,i,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=i,e.pending_buf[e.sym_buf+e.sym_next++]=i>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,0===i?e.dyn_ltree[2*t]++:(e.matches++,i--,e.dyn_ltree[2*(Ce[t]+256+1)]++,e.dyn_dtree[2*di(i)]++),e.sym_next===e.sym_end),_tr_align:e=>{M(e,2,3),H(e,256,W),(e=>{16===e.bi_valid?(Ze(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Re=(e,i,t,n)=>{let a=65535&e|0,o=e>>>16&65535|0,c=0;for(;0!==t;){c=t>2e3?2e3:t,t-=c;do{a=a+i[n++]|0,o=o+a|0}while(--c);a%=65521,o%=65521}return a|o<<16|0};const ia=new Uint32Array((()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;i[t]=e}return i})());var P=(e,i,t,n)=>{const a=ia,o=n+t;e^=-1;for(let c=n;c<o;c++)e=e>>>8^a[255&(e^i[c])];return-1^e},oe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},se={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:na,_tr_stored_block:Tt,_tr_flush_block:aa,_tr_tally:ee,_tr_align:ra}=ea,{Z_NO_FLUSH:te,Z_PARTIAL_FLUSH:oa,Z_FULL_FLUSH:sa,Z_FINISH:$,Z_BLOCK:xi,Z_OK:z,Z_STREAM_END:yi,Z_STREAM_ERROR:Y,Z_DATA_ERROR:la,Z_BUF_ERROR:At,Z_DEFAULT_COMPRESSION:ca,Z_FILTERED:da,Z_HUFFMAN_ONLY:He,Z_RLE:_a,Z_FIXED:fa,Z_DEFAULT_STRATEGY:ha,Z_UNKNOWN:ua,Z_DEFLATED:Ye}=se,q=262,de=(e,i)=>(e.msg=oe[i],i),ki=e=>2*e-(e>4?9:0),ne=e=>{let i=e.length;for(;--i>=0;)e[i]=0},Aa=e=>{let i,t,n,a=e.w_size;i=e.hash_size,n=i;do{t=e.head[--n],e.head[n]=t>=a?t-a:0}while(--i);i=a,n=i;do{t=e.prev[--n],e.prev[n]=t>=a?t-a:0}while(--i)};let ae=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask;const F=e=>{const i=e.state;let t=i.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,0===i.pending&&(i.pending_out=0))},K=(e,i)=>{aa(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,F(e.strm)},E=(e,i)=>{e.pending_buf[e.pending++]=i},Pe=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=255&i},St=(e,i,t,n)=>{let a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,i.set(e.input.subarray(e.next_in,e.next_in+a),t),1===e.state.wrap?e.adler=Re(e.adler,i,a,t):2===e.state.wrap&&(e.adler=P(e.adler,i,a,t)),e.next_in+=a,e.total_in+=a,a)},Ti=(e,i)=>{let a,o,t=e.max_chain_length,n=e.strstart,c=e.prev_length,s=e.nice_match;const _=e.strstart>e.w_size-q?e.strstart-(e.w_size-q):0,l=e.window,d=e.w_mask,g=e.prev,u=e.strstart+258;let f=l[n+c-1],p=l[n+c];e.prev_length>=e.good_match&&(t>>=2),s>e.lookahead&&(s=e.lookahead);do{if(a=i,l[a+c]===p&&l[a+c-1]===f&&l[a]===l[n]&&l[++a]===l[n+1]){n+=2,a++;do{}while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<u);if(o=258-(u-n),n=u-258,o>c){if(e.match_start=i,c=o,o>=s)break;f=l[n+c-1],p=l[n+c]}}}while((i=g[i&d])>_&&0!=--t);return c<=e.lookahead?c:e.lookahead},ve=e=>{const i=e.w_size;let t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-q)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),Aa(e),n+=i),0===e.strm.avail_in)break;if(t=St(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=ae(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=ae(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<q&&0!==e.strm.avail_in)},Ai=(e,i)=>{let n,a,o,t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,c=0,s=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>o&&(n=o),n<t&&(0===n&&i!==$||i===te||n!==a+e.strm.avail_in)))break;c=i===$&&n===a+e.strm.avail_in?1:0,Tt(e,0,0,c),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,F(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(St(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===c);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),c?4:i!==te&&i!==$&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(St(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,t=o>e.w_size?e.w_size:o,a=e.strstart-e.block_start,(a>=t||(a||i===$)&&i!==te&&0===e.strm.avail_in&&a<=o)&&(n=a>o?o:a,c=i===$&&0===e.strm.avail_in&&n===a?1:0,Tt(e,e.block_start,n,c),e.block_start+=n,F(e.strm)),c?3:1)},Pt=(e,i)=>{let t,n;for(;;){if(e.lookahead<q){if(ve(e),e.lookahead<q&&i===te)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=ae(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-q&&(e.match_length=Ti(e,t)),e.match_length>=3)if(n=ee(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ae(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ae(e,e.ins_h,e.window[e.strstart+1]);else n=ee(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(K(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,i===$?(K(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(K(e,!1),0===e.strm.avail_out)?1:2},xe=(e,i)=>{let t,n,a;for(;;){if(e.lookahead<q){if(ve(e),e.lookahead<q&&i===te)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=ae(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-q&&(e.match_length=Ti(e,t),e.match_length<=5&&(e.strategy===da||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=ee(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=ae(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(K(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=ee(e,0,e.window[e.strstart-1]),n&&K(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ee(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,i===$?(K(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(K(e,!1),0===e.strm.avail_out)?1:2};function G(e,i,t,n,a){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=n,this.func=a}const Oe=[new G(0,0,0,0,Ai),new G(4,4,8,4,Pt),new G(4,5,16,8,Pt),new G(4,6,32,32,Pt),new G(4,4,16,16,xe),new G(8,16,32,32,xe),new G(8,16,128,128,xe),new G(8,32,128,256,xe),new G(32,128,258,1024,xe),new G(32,258,258,4096,xe)];function Ca(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ye,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ne(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ze=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||42!==i.status&&57!==i.status&&69!==i.status&&73!==i.status&&91!==i.status&&103!==i.status&&113!==i.status&&666!==i.status?1:0},ji=e=>{if(ze(e))return de(e,Y);e.total_in=e.total_out=0,e.data_type=ua;const i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=2===i.wrap?57:i.wrap?42:113,e.adler=2===i.wrap?0:1,i.last_flush=-2,na(i),z},Ei=e=>{const i=ji(e);return i===z&&(e=>{e.window_size=2*e.w_size,ne(e.head),e.max_lazy_match=Oe[e.level].max_lazy,e.good_match=Oe[e.level].good_length,e.nice_match=Oe[e.level].nice_length,e.max_chain_length=Oe[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),i},Ii=(e,i,t,n,a,o)=>{if(!e)return Y;let c=1;if(i===ca&&(i=6),n<0?(c=0,n=-n):n>15&&(c=2,n-=16),a<1||a>9||t!==Ye||n<8||n>15||i<0||i>9||o<0||o>fa||8===n&&1!==c)return de(e,Y);8===n&&(n=9);const s=new Ca;return e.state=s,s.strm=e,s.status=42,s.wrap=c,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=i,s.strategy=o,s.method=t,Ei(e)};var Le={deflateInit:(e,i)=>Ii(e,i,Ye,15,8,ha),deflateInit2:Ii,deflateReset:Ei,deflateResetKeep:ji,deflateSetHeader:(e,i)=>ze(e)||2!==e.state.wrap?Y:(e.state.gzhead=i,z),deflate:(e,i)=>{if(ze(e)||i>xi||i<0)return e?de(e,Y):Y;const t=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===t.status&&i!==$)return de(e,0===e.avail_out?At:Y);const n=t.last_flush;if(t.last_flush=i,0!==t.pending){if(F(e),0===e.avail_out)return t.last_flush=-1,z}else if(0===e.avail_in&&ki(i)<=ki(n)&&i!==$)return de(e,At);if(666===t.status&&0!==e.avail_in)return de(e,At);if(42===t.status&&0===t.wrap&&(t.status=113),42===t.status){let a=Ye+(t.w_bits-8<<4)<<8,o=-1;if(o=t.strategy>=He||t.level<2?0:t.level<6?1:6===t.level?2:3,a|=o<<6,0!==t.strstart&&(a|=32),a+=31-a%31,Pe(t,a),0!==t.strstart&&(Pe(t,e.adler>>>16),Pe(t,65535&e.adler)),e.adler=1,t.status=113,F(e),0!==t.pending)return t.last_flush=-1,z}if(57===t.status)if(e.adler=0,E(t,31),E(t,139),E(t,8),t.gzhead)E(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),E(t,255&t.gzhead.time),E(t,t.gzhead.time>>8&255),E(t,t.gzhead.time>>16&255),E(t,t.gzhead.time>>24&255),E(t,9===t.level?2:t.strategy>=He||t.level<2?4:0),E(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(E(t,255&t.gzhead.extra.length),E(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=P(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(E(t,0),E(t,0),E(t,0),E(t,0),E(t,0),E(t,9===t.level?2:t.strategy>=He||t.level<2?4:0),E(t,3),t.status=113,F(e),0!==t.pending)return t.last_flush=-1,z;if(69===t.status){if(t.gzhead.extra){let a=t.pending,o=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let s=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=P(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=s,F(e),0!==t.pending)return t.last_flush=-1,z;a=0,o-=s}let c=new Uint8Array(t.gzhead.extra);t.pending_buf.set(c.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>a&&(e.adler=P(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=73}if(73===t.status){if(t.gzhead.name){let o,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=P(e.adler,t.pending_buf,t.pending-a,a)),F(e),0!==t.pending)return t.last_flush=-1,z;a=0}o=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,E(t,o)}while(0!==o);t.gzhead.hcrc&&t.pending>a&&(e.adler=P(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=91}if(91===t.status){if(t.gzhead.comment){let o,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=P(e.adler,t.pending_buf,t.pending-a,a)),F(e),0!==t.pending)return t.last_flush=-1,z;a=0}o=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,E(t,o)}while(0!==o);t.gzhead.hcrc&&t.pending>a&&(e.adler=P(e.adler,t.pending_buf,t.pending-a,a))}t.status=103}if(103===t.status){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(F(e),0!==t.pending))return t.last_flush=-1,z;E(t,255&e.adler),E(t,e.adler>>8&255),e.adler=0}if(t.status=113,F(e),0!==t.pending)return t.last_flush=-1,z}if(0!==e.avail_in||0!==t.lookahead||i!==te&&666!==t.status){let a=0===t.level?Ai(t,i):t.strategy===He?((e,i)=>{let t;for(;;){if(0===e.lookahead&&(ve(e),0===e.lookahead)){if(i===te)return 1;break}if(e.match_length=0,t=ee(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(K(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,i===$?(K(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(K(e,!1),0===e.strm.avail_out)?1:2})(t,i):t.strategy===_a?((e,i)=>{let t,n,a,o;const c=e.window;for(;;){if(e.lookahead<=258){if(ve(e),e.lookahead<=258&&i===te)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,n=c[a],n===c[++a]&&n===c[++a]&&n===c[++a])){o=e.strstart+258;do{}while(n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&a<o);e.match_length=258-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(t=ee(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=ee(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(K(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,i===$?(K(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(K(e,!1),0===e.strm.avail_out)?1:2})(t,i):Oe[t.level].func(t,i);if((3===a||4===a)&&(t.status=666),1===a||3===a)return 0===e.avail_out&&(t.last_flush=-1),z;if(2===a&&(i===oa?ra(t):i!==xi&&(Tt(t,0,0,!1),i===sa&&(ne(t.head),0===t.lookahead&&(t.strstart=0,t.block_start=0,t.insert=0))),F(e),0===e.avail_out))return t.last_flush=-1,z}return i!==$?z:t.wrap<=0?yi:(2===t.wrap?(E(t,255&e.adler),E(t,e.adler>>8&255),E(t,e.adler>>16&255),E(t,e.adler>>24&255),E(t,255&e.total_in),E(t,e.total_in>>8&255),E(t,e.total_in>>16&255),E(t,e.total_in>>24&255)):(Pe(t,e.adler>>>16),Pe(t,65535&e.adler)),F(e),t.wrap>0&&(t.wrap=-t.wrap),0!==t.pending?z:yi)},deflateEnd:e=>{if(ze(e))return Y;const i=e.state.status;return e.state=null,113===i?de(e,la):z},deflateSetDictionary:(e,i)=>{let t=i.length;if(ze(e))return Y;const n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return Y;if(1===a&&(e.adler=Re(e.adler,i,t,0)),n.wrap=0,t>=n.w_size){0===a&&(ne(n.head),n.strstart=0,n.block_start=0,n.insert=0);let _=new Uint8Array(n.w_size);_.set(i.subarray(t-n.w_size,t),0),i=_,t=n.w_size}const o=e.avail_in,c=e.next_in,s=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,ve(n);n.lookahead>=3;){let _=n.strstart,l=n.lookahead-2;do{n.ins_h=ae(n,n.ins_h,n.window[_+3-1]),n.prev[_&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=_,_++}while(--l);n.strstart=_,n.lookahead=2,ve(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=s,e.avail_in=o,n.wrap=a,z},deflateInfo:"pako deflate (from Nodeca project)"};const $a=(e,i)=>Object.prototype.hasOwnProperty.call(e,i);var qe={assign:function(e){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const t=i.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(const n in t)$a(t,n)&&(e[n]=t[n])}}return e},flattenChunks:e=>{let i=0;for(let n=0,a=e.length;n<a;n++)i+=e[n].length;const t=new Uint8Array(i);for(let n=0,a=0,o=e.length;n<o;n++){let c=e[n];t.set(c,a),a+=c.length}return t}};let Ci=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ci=!1}const Ue=new Uint8Array(256);for(let e=0;e<256;e++)Ue[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ue[254]=Ue[254]=1;var Ne={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let i,t,n,a,o,c=e.length,s=0;for(a=0;a<c;a++)t=e.charCodeAt(a),55296==(64512&t)&&a+1<c&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(t=65536+(t-55296<<10)+(n-56320),a++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(s),o=0,a=0;o<s;a++)t=e.charCodeAt(a),55296==(64512&t)&&a+1<c&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?i[o++]=t:t<2048?(i[o++]=192|t>>>6,i[o++]=128|63&t):t<65536?(i[o++]=224|t>>>12,i[o++]=128|t>>>6&63,i[o++]=128|63&t):(i[o++]=240|t>>>18,i[o++]=128|t>>>12&63,i[o++]=128|t>>>6&63,i[o++]=128|63&t);return i},buf2string:(e,i)=>{const t=i||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,i));let n,a;const o=new Array(2*t);for(a=0,n=0;n<t;){let c=e[n++];if(c<128){o[a++]=c;continue}let s=Ue[c];if(s>4)o[a++]=65533,n+=s-1;else{for(c&=2===s?31:3===s?15:7;s>1&&n<t;)c=c<<6|63&e[n++],s--;s>1?o[a++]=65533:c<65536?o[a++]=c:(c-=65536,o[a++]=55296|c>>10&1023,o[a++]=56320|1023&c)}}return((e,i)=>{if(i<65534&&e.subarray&&Ci)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let n=0;n<i;n++)t+=String.fromCharCode(e[n]);return t})(o,a)},utf8border:(e,i)=>{(i=i||e.length)>e.length&&(i=e.length);let t=i-1;for(;t>=0&&128==(192&e[t]);)t--;return t<0||0===t?i:t+Ue[e[t]]>i?t:i}},Zi=function Wa(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ri=Object.prototype.toString,{Z_NO_FLUSH:Xa,Z_SYNC_FLUSH:Va,Z_FULL_FLUSH:er,Z_FINISH:tr,Z_OK:Ge,Z_STREAM_END:ir,Z_DEFAULT_COMPRESSION:nr,Z_DEFAULT_STRATEGY:ar,Z_DEFLATED:rr}=se;function Je(e){this.options=qe.assign({level:nr,method:rr,chunkSize:16384,windowBits:15,memLevel:8,strategy:ar},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zi,this.strm.avail_out=0;let t=Le.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==Ge)throw new Error(oe[t]);if(i.header&&Le.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(n="string"==typeof i.dictionary?Ne.string2buf(i.dictionary):"[object ArrayBuffer]"===Ri.call(i.dictionary)?new Uint8Array(i.dictionary):i.dictionary,t=Le.deflateSetDictionary(this.strm,n),t!==Ge)throw new Error(oe[t]);this._dict_set=!0}}function Ot(e,i){const t=new Je(i);if(t.push(e,!0),t.err)throw t.msg||oe[t.err];return t.result}Je.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize;let a,o;if(this.ended)return!1;for(o=i===~~i?i:!0===i?tr:Xa,t.input="string"==typeof e?Ne.string2buf(e):"[object ArrayBuffer]"===Ri.call(e)?new Uint8Array(e):e,t.next_in=0,t.avail_in=t.input.length;;)if(0===t.avail_out&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(o===Va||o===er)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(a=Le.deflate(t,o),a===ir)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=Le.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Ge;if(0!==t.avail_out){if(o>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(0===t.avail_in)break}else this.onData(t.output)}return!0},Je.prototype.onData=function(e){this.chunks.push(e)},Je.prototype.onEnd=function(e){e===Ge&&(this.result=qe.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var hr={Deflate:Je,deflate:Ot,deflateRaw:function or(e,i){return(i=i||{}).raw=!0,Ot(e,i)},gzip:function sr(e,i){return(i=i||{}).gzip=!0,Ot(e,i)},constants:se};const Qe=16209;var pr=function(i,t){let n,a,o,c,s,_,l,d,g,u,f,p,C,b,m,I,x,h,T,S,w,Z,j,v;const A=i.state;n=i.next_in,j=i.input,a=n+(i.avail_in-5),o=i.next_out,v=i.output,c=o-(t-i.avail_out),s=o+(i.avail_out-257),_=A.dmax,l=A.wsize,d=A.whave,g=A.wnext,u=A.window,f=A.hold,p=A.bits,C=A.lencode,b=A.distcode,m=(1<<A.lenbits)-1,I=(1<<A.distbits)-1;e:do{p<15&&(f+=j[n++]<<p,p+=8,f+=j[n++]<<p,p+=8),x=C[f&m];t:for(;;){if(h=x>>>24,f>>>=h,p-=h,h=x>>>16&255,0===h)v[o++]=65535&x;else{if(!(16&h)){if(64&h){if(32&h){A.mode=16191;break e}i.msg="invalid literal/length code",A.mode=Qe;break e}x=C[(65535&x)+(f&(1<<h)-1)];continue t}for(T=65535&x,h&=15,h&&(p<h&&(f+=j[n++]<<p,p+=8),T+=f&(1<<h)-1,f>>>=h,p-=h),p<15&&(f+=j[n++]<<p,p+=8,f+=j[n++]<<p,p+=8),x=b[f&I];;){if(h=x>>>24,f>>>=h,p-=h,h=x>>>16&255,16&h){if(S=65535&x,h&=15,p<h&&(f+=j[n++]<<p,p+=8,p<h&&(f+=j[n++]<<p,p+=8)),S+=f&(1<<h)-1,S>_){i.msg="invalid distance too far back",A.mode=Qe;break e}if(f>>>=h,p-=h,h=o-c,S>h){if(h=S-h,h>d&&A.sane){i.msg="invalid distance too far back",A.mode=Qe;break e}if(w=0,Z=u,0===g){if(w+=l-h,h<T){T-=h;do{v[o++]=u[w++]}while(--h);w=o-S,Z=v}}else if(g<h){if(w+=l+g-h,h-=g,h<T){T-=h;do{v[o++]=u[w++]}while(--h);if(w=0,g<T){h=g,T-=h;do{v[o++]=u[w++]}while(--h);w=o-S,Z=v}}}else if(w+=g-h,h<T){T-=h;do{v[o++]=u[w++]}while(--h);w=o-S,Z=v}for(;T>2;)v[o++]=Z[w++],v[o++]=Z[w++],v[o++]=Z[w++],T-=3;T&&(v[o++]=Z[w++],T>1&&(v[o++]=Z[w++]))}else{w=o-S;do{v[o++]=v[w++],v[o++]=v[w++],v[o++]=v[w++],T-=3}while(T>2);T&&(v[o++]=v[w++],T>1&&(v[o++]=v[w++]))}break}if(64&h){i.msg="invalid distance code",A.mode=Qe;break e}x=b[(65535&x)+(f&(1<<h)-1)]}}break}}while(n<a&&o<s);T=p>>3,n-=T,p-=T<<3,f&=(1<<p)-1,i.next_in=n,i.next_out=o,i.avail_in=n<a?a-n+5:5-(n-a),i.avail_out=o<s?s-o+257:257-(o-s),A.hold=f,A.bits=p};const gr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mr=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),br=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var De=(e,i,t,n,a,o,c,s)=>{const _=s.bits;let x,h,T,S,w,j,l=0,d=0,g=0,u=0,f=0,p=0,C=0,b=0,m=0,I=0,Z=null;const v=new Uint16Array(16),A=new Uint16Array(16);let jn,it,nt,he=null;for(l=0;l<=15;l++)v[l]=0;for(d=0;d<n;d++)v[i[t+d]]++;for(f=_,u=15;u>=1&&0===v[u];u--);if(f>u&&(f=u),0===u)return a[o++]=20971520,a[o++]=20971520,s.bits=1,0;for(g=1;g<u&&0===v[g];g++);for(f<g&&(f=g),b=1,l=1;l<=15;l++)if(b<<=1,b-=v[l],b<0)return-1;if(b>0&&(0===e||1!==u))return-1;for(A[1]=0,l=1;l<15;l++)A[l+1]=A[l]+v[l];for(d=0;d<n;d++)0!==i[t+d]&&(c[A[i[t+d]]++]=d);if(0===e?(Z=he=c,j=20):1===e?(Z=gr,he=wr,j=257):(Z=mr,he=br,j=0),I=0,d=0,l=g,w=o,p=f,C=0,T=-1,m=1<<f,S=m-1,1===e&&m>852||2===e&&m>592)return 1;for(;;){jn=l-C,c[d]+1<j?(it=0,nt=c[d]):c[d]>=j?(it=he[c[d]-j],nt=Z[c[d]-j]):(it=96,nt=0),x=1<<l-C,h=1<<p,g=h;do{h-=x,a[w+(I>>C)+h]=jn<<24|it<<16|nt|0}while(0!==h);for(x=1<<l-1;I&x;)x>>=1;if(0!==x?(I&=x-1,I+=x):I=0,d++,0==--v[l]){if(l===u)break;l=i[t+c[d]]}if(l>f&&(I&S)!==T){for(0===C&&(C=f),w+=g,p=l-C,b=1<<p;p+C<u&&(b-=v[p+C],!(b<=0));)p++,b<<=1;if(m+=1<<p,1===e&&m>852||2===e&&m>592)return 1;T=I&S,a[T]=f<<24|p<<16|w-o|0}}return 0!==I&&(a[w+I]=l-C<<24|64<<16|0),s.bits=f,0};const{Z_FINISH:Ni,Z_BLOCK:xr,Z_TREES:We,Z_OK:_e,Z_STREAM_END:yr,Z_NEED_DICT:kr,Z_STREAM_ERROR:B,Z_DATA_ERROR:Ji,Z_MEM_ERROR:Di,Z_BUF_ERROR:Tr,Z_DEFLATED:Mi}=se,Xe=16180,Ve=16190,X=16191,et=16199,tt=16200,R=16209,fn=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Ir(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const fe=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.mode<Xe||i.mode>16211?1:0},hn=e=>{if(fe(e))return B;const i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=1&i.wrap),i.mode=Xe,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(852),i.distcode=i.distdyn=new Int32Array(592),i.sane=1,i.back=-1,_e},un=e=>{if(fe(e))return B;const i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,hn(e)},pn=(e,i)=>{let t;if(fe(e))return B;const n=e.state;return i<0?(t=0,i=-i):(t=5+(i>>4),i<48&&(i&=15)),i&&(i<8||i>15)?B:(null!==n.window&&n.wbits!==i&&(n.window=null),n.wrap=t,n.wbits=i,un(e))},gn=(e,i)=>{if(!e)return B;const t=new Ir;e.state=t,t.strm=e,t.window=null,t.mode=Xe;const n=pn(e,i);return n!==_e&&(e.state=null),n};let Jt,Dt,wn=!0;const Zr=e=>{if(wn){Jt=new Int32Array(512),Dt=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(De(1,e.lens,0,288,Jt,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;De(2,e.lens,0,32,Dt,0,e.work,{bits:5}),wn=!1}e.lencode=Jt,e.lenbits=9,e.distcode=Dt,e.distbits=5},mn=(e,i,t,n)=>{let a;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(i.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>n&&(a=n),o.window.set(i.subarray(t-n,t-n+a),o.wnext),(n-=a)?(o.window.set(i.subarray(t-n,t),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0};var V={inflateReset:un,inflateReset2:pn,inflateResetKeep:hn,inflateInit:e=>gn(e,15),inflateInit2:gn,inflate:(e,i)=>{let t,n,a,o,c,s,_,l,d,g,u,f,p,C,m,I,x,h,T,S,w,Z,b=0;const j=new Uint8Array(4);let v,A;const he=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(fe(e)||!e.output||!e.input&&0!==e.avail_in)return B;t=e.state,t.mode===X&&(t.mode=16192),c=e.next_out,a=e.output,_=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=t.hold,d=t.bits,g=s,u=_,Z=_e;e:for(;;)switch(t.mode){case Xe:if(0===t.wrap){t.mode=16192;break}for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(2&t.wrap&&35615===l){0===t.wbits&&(t.wbits=15),t.check=0,j[0]=255&l,j[1]=l>>>8&255,t.check=P(t.check,j,2,0),l=0,d=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=R;break}if((15&l)!==Mi){e.msg="unknown compression method",t.mode=R;break}if(l>>>=4,d-=4,w=8+(15&l),0===t.wbits&&(t.wbits=w),w>15||w>t.wbits){e.msg="invalid window size",t.mode=R;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&l?16189:X,l=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(t.flags=l,(255&t.flags)!==Mi){e.msg="unknown compression method",t.mode=R;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=R;break}t.head&&(t.head.text=l>>8&1),512&t.flags&&4&t.wrap&&(j[0]=255&l,j[1]=l>>>8&255,t.check=P(t.check,j,2,0)),l=0,d=0,t.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.head&&(t.head.time=l),512&t.flags&&4&t.wrap&&(j[0]=255&l,j[1]=l>>>8&255,j[2]=l>>>16&255,j[3]=l>>>24&255,t.check=P(t.check,j,4,0)),l=0,d=0,t.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.head&&(t.head.xflags=255&l,t.head.os=l>>8),512&t.flags&&4&t.wrap&&(j[0]=255&l,j[1]=l>>>8&255,t.check=P(t.check,j,2,0)),l=0,d=0,t.mode=16184;case 16184:if(1024&t.flags){for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.length=l,t.head&&(t.head.extra_len=l),512&t.flags&&4&t.wrap&&(j[0]=255&l,j[1]=l>>>8&255,t.check=P(t.check,j,2,0)),l=0,d=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(f=t.length,f>s&&(f=s),f&&(t.head&&(w=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(o,o+f),w)),512&t.flags&&4&t.wrap&&(t.check=P(t.check,n,f,o)),s-=f,o+=f,t.length-=f),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(0===s)break e;f=0;do{w=n[o+f++],t.head&&w&&t.length<65536&&(t.head.name+=String.fromCharCode(w))}while(w&&f<s);if(512&t.flags&&4&t.wrap&&(t.check=P(t.check,n,f,o)),s-=f,o+=f,w)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(0===s)break e;f=0;do{w=n[o+f++],t.head&&w&&t.length<65536&&(t.head.comment+=String.fromCharCode(w))}while(w&&f<s);if(512&t.flags&&4&t.wrap&&(t.check=P(t.check,n,f,o)),s-=f,o+=f,w)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(4&t.wrap&&l!==(65535&t.check)){e.msg="header crc mismatch",t.mode=R;break}l=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=X;break;case 16189:for(;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}e.adler=t.check=fn(l),l=0,d=0,t.mode=Ve;case Ve:if(0===t.havedict)return e.next_out=c,e.avail_out=_,e.next_in=o,e.avail_in=s,t.hold=l,t.bits=d,kr;e.adler=t.check=1,t.mode=X;case X:if(i===xr||i===We)break e;case 16192:if(t.last){l>>>=7&d,d-=7&d,t.mode=16206;break}for(;d<3;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}switch(t.last=1&l,l>>>=1,d-=1,3&l){case 0:t.mode=16193;break;case 1:if(Zr(t),t.mode=et,i===We){l>>>=2,d-=2;break e}break;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=R}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=R;break}if(t.length=65535&l,l=0,d=0,t.mode=16194,i===We)break e;case 16194:t.mode=16195;case 16195:if(f=t.length,f){if(f>s&&(f=s),f>_&&(f=_),0===f)break e;a.set(n.subarray(o,o+f),c),s-=f,o+=f,_-=f,c+=f,t.length-=f;break}t.mode=X;break;case 16196:for(;d<14;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(t.nlen=257+(31&l),l>>>=5,d-=5,t.ndist=1+(31&l),l>>>=5,d-=5,t.ncode=4+(15&l),l>>>=4,d-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=R;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;d<3;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.lens[he[t.have++]]=7&l,l>>>=3,d-=3}for(;t.have<19;)t.lens[he[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,v={bits:t.lenbits},Z=De(0,t.lens,0,19,t.lencode,0,t.work,v),t.lenbits=v.bits,Z){e.msg="invalid code lengths set",t.mode=R;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;b=t.lencode[l&(1<<t.lenbits)-1],m=b>>>24,I=b>>>16&255,x=65535&b,!(m<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(x<16)l>>>=m,d-=m,t.lens[t.have++]=x;else{if(16===x){for(A=m+2;d<A;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(l>>>=m,d-=m,0===t.have){e.msg="invalid bit length repeat",t.mode=R;break}w=t.lens[t.have-1],f=3+(3&l),l>>>=2,d-=2}else if(17===x){for(A=m+3;d<A;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=m,d-=m,w=0,f=3+(7&l),l>>>=3,d-=3}else{for(A=m+7;d<A;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=m,d-=m,w=0,f=11+(127&l),l>>>=7,d-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=R;break}for(;f--;)t.lens[t.have++]=w}}if(t.mode===R)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=R;break}if(t.lenbits=9,v={bits:t.lenbits},Z=De(1,t.lens,0,t.nlen,t.lencode,0,t.work,v),t.lenbits=v.bits,Z){e.msg="invalid literal/lengths set",t.mode=R;break}if(t.distbits=6,t.distcode=t.distdyn,v={bits:t.distbits},Z=De(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,v),t.distbits=v.bits,Z){e.msg="invalid distances set",t.mode=R;break}if(t.mode=et,i===We)break e;case et:t.mode=tt;case tt:if(s>=6&&_>=258){e.next_out=c,e.avail_out=_,e.next_in=o,e.avail_in=s,t.hold=l,t.bits=d,pr(e,u),c=e.next_out,a=e.output,_=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=t.hold,d=t.bits,t.mode===X&&(t.back=-1);break}for(t.back=0;b=t.lencode[l&(1<<t.lenbits)-1],m=b>>>24,I=b>>>16&255,x=65535&b,!(m<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(I&&!(240&I)){for(h=m,T=I,S=x;b=t.lencode[S+((l&(1<<h+T)-1)>>h)],m=b>>>24,I=b>>>16&255,x=65535&b,!(h+m<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=h,d-=h,t.back+=h}if(l>>>=m,d-=m,t.back+=m,t.length=x,0===I){t.mode=16205;break}if(32&I){t.back=-1,t.mode=X;break}if(64&I){e.msg="invalid literal/length code",t.mode=R;break}t.extra=15&I,t.mode=16201;case 16201:if(t.extra){for(A=t.extra;d<A;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;b=t.distcode[l&(1<<t.distbits)-1],m=b>>>24,I=b>>>16&255,x=65535&b,!(m<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(!(240&I)){for(h=m,T=I,S=x;b=t.distcode[S+((l&(1<<h+T)-1)>>h)],m=b>>>24,I=b>>>16&255,x=65535&b,!(h+m<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=h,d-=h,t.back+=h}if(l>>>=m,d-=m,t.back+=m,64&I){e.msg="invalid distance code",t.mode=R;break}t.offset=x,t.extra=15&I,t.mode=16203;case 16203:if(t.extra){for(A=t.extra;d<A;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=R;break}t.mode=16204;case 16204:if(0===_)break e;if(f=u-_,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=R;break}f>t.wnext?(f-=t.wnext,p=t.wsize-f):p=t.wnext-f,f>t.length&&(f=t.length),C=t.window}else C=a,p=c-t.offset,f=t.length;f>_&&(f=_),_-=f,t.length-=f;do{a[c++]=C[p++]}while(--f);0===t.length&&(t.mode=tt);break;case 16205:if(0===_)break e;a[c++]=t.length,_--,t.mode=tt;break;case 16206:if(t.wrap){for(;d<32;){if(0===s)break e;s--,l|=n[o++]<<d,d+=8}if(u-=_,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=t.flags?P(t.check,a,u,c-u):Re(t.check,a,u,c-u)),u=_,4&t.wrap&&(t.flags?l:fn(l))!==t.check){e.msg="incorrect data check",t.mode=R;break}l=0,d=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(4&t.wrap&&l!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=R;break}l=0,d=0}t.mode=16208;case 16208:Z=yr;break e;case R:Z=Ji;break e;case 16210:return Di;default:return B}return e.next_out=c,e.avail_out=_,e.next_in=o,e.avail_in=s,t.hold=l,t.bits=d,(t.wsize||u!==e.avail_out&&t.mode<R&&(t.mode<16206||i!==Ni))&&mn(e,e.output,e.next_out,u-e.avail_out),g-=e.avail_in,u-=e.avail_out,e.total_in+=g,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=t.flags?P(t.check,a,u,e.next_out-u):Re(t.check,a,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===X?128:0)+(t.mode===et||16194===t.mode?256:0),(0===g&&0===u||i===Ni)&&Z===_e&&(Z=Tr),Z},inflateEnd:e=>{if(fe(e))return B;let i=e.state;return i.window&&(i.window=null),e.state=null,_e},inflateGetHeader:(e,i)=>{if(fe(e))return B;const t=e.state;return 2&t.wrap?(t.head=i,i.done=!1,_e):B},inflateSetDictionary:(e,i)=>{const t=i.length;let n,a,o;return fe(e)||(n=e.state,0!==n.wrap&&n.mode!==Ve)?B:n.mode===Ve&&(a=1,a=Re(a,i,t,0),a!==n.check)?Ji:(o=mn(e,i,t,t),o?(n.mode=16210,Di):(n.havedict=1,_e))},inflateInfo:"pako inflate (from Nodeca project)"},Hr=function Br(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const bn=Object.prototype.toString,{Z_NO_FLUSH:Yr,Z_FINISH:qr,Z_OK:Me,Z_STREAM_END:Mt,Z_NEED_DICT:Ft,Z_STREAM_ERROR:Gr,Z_DATA_ERROR:vn,Z_MEM_ERROR:Qr}=se;function Fe(e){this.options=qe.assign({chunkSize:65536,windowBits:15,to:""},e||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(15&i.windowBits||(i.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zi,this.strm.avail_out=0;let t=V.inflateInit2(this.strm,i.windowBits);if(t!==Me)throw new Error(oe[t]);if(this.header=new Hr,V.inflateGetHeader(this.strm,this.header),i.dictionary&&("string"==typeof i.dictionary?i.dictionary=Ne.string2buf(i.dictionary):"[object ArrayBuffer]"===bn.call(i.dictionary)&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=V.inflateSetDictionary(this.strm,i.dictionary),t!==Me)))throw new Error(oe[t])}function Kt(e,i){const t=new Fe(i);if(t.push(e),t.err)throw t.msg||oe[t.err];return t.result}Fe.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let o,c,s;if(this.ended)return!1;for(c=i===~~i?i:!0===i?qr:Yr,t.input="[object ArrayBuffer]"===bn.call(e)?new Uint8Array(e):e,t.next_in=0,t.avail_in=t.input.length;;){for(0===t.avail_out&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),o=V.inflate(t,c),o===Ft&&a&&(o=V.inflateSetDictionary(t,a),o===Me?o=V.inflate(t,c):o===vn&&(o=Ft));t.avail_in>0&&o===Mt&&t.state.wrap>0&&0!==e[t.next_in];)V.inflateReset(t),o=V.inflate(t,c);switch(o){case Gr:case vn:case Ft:case Qr:return this.onEnd(o),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(0===t.avail_out||o===Mt))if("string"===this.options.to){let _=Ne.utf8border(t.output,t.next_out),l=t.next_out-_,d=Ne.buf2string(t.output,_);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(_,_+l),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(o!==Me||0!==s){if(o===Mt)return o=V.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===t.avail_in)break}}return!0},Fe.prototype.onData=function(e){this.chunks.push(e)},Fe.prototype.onEnd=function(e){e===Me&&(this.result="string"===this.options.to?this.chunks.join(""):qe.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var no={Inflate:Fe,inflate:Kt,inflateRaw:function Wr(e,i){return(i=i||{}).raw=!0,Kt(e,i)},ungzip:Kt,constants:se};const{deflate:ro}=hr,{inflate:co}=no;var xn=ro,yn=co,N=y(6223),vo=y(8962),kn=y(4403),Tn=y(2119),xo=y(9304),yo=y(9989),ko=y(3148);let To=(()=>{class e{constructor(t,n,a,o){this.projectSerializer=t,this.actSerializer=n,this.intSerializer=a,this.tagManager=o}mapJiraProject(t){const n=t.issues,a=new Map,o=this.projectSerializer.fromJson();if(n.length>0){o.profile.name=n[0].fields.project?.name??"Jira Project",o.profile.id=-1,n.forEach((s,_)=>{a.set(s.key,_)});const c=n.map(s=>s.fields.assignee?.displayName).filter(s=>!!s);return this.tagManager.addTagGroup(o,kn.dZ,c),n.forEach(s=>{const _=this.actSerializer.fromJson(),l=a.get(s.key);if(void 0!==l){if(_.profile.id=l,_.profile.name=s.fields.summary,_.profile.jiraIssueKey=s.key,_.profile.planned_completion_date=s.fields.duedate,_.profile.duration=s.fields.customfield_10016?s.fields.customfield_10016/2:0,this.tagManager.addTagToActivities(o,s.fields.assignee?.displayName,kn.dZ,[_]),s.fields.issuelinks){const d=s.fields.issuelinks?.filter(g=>!!g.inwardIssue).map(g=>g.inwardIssue?.key&&"is blocked by"===g.type?.inward?a.get(g.inwardIssue?.key):null);d?.length&&(_.profile.depends_on=(d?.filter(g=>null!==g)).join(","))}o.activities.push(_)}}),this.generateNodes(o),o}return null}generateNodes(t){let n=0;const a=this.intSerializer;t.activities.forEach((o,c)=>{o.chartInfo.source_id=++n;const s=a.fromJson({id:n,name:n});o.chartInfo.target_id=++n;const _=a.fromJson({id:n,name:n}),l=Math.floor(c/20),d=c%20;s.x=50+120*l,s.y=40*(d+1),_.x=120+120*l,_.y=40*(d+1),t.integrations.push(s),t.integrations.push(_)})}addIssueKeysToArrows(t,n){n.forEach((a,o)=>{t[o].profile.jiraIssueKey=a.key})}getIssueLinks(t){const n=new Map(t.activities.map(o=>[o.profile.id,o])),a=[];return t.activities.forEach(o=>{o.profile.depends_on&&o.profile.depends_on.split(",").forEach(s=>{const l=n.get(+s)?.profile.jiraIssueKey,d=o.profile.jiraIssueKey;if(l&&d){const g=this.createIssueLinkBody(l,d);a.push(g)}})}),a}mapProjectToJiraIssues(t,n,a,o){return t.map(s=>({fields:{issuetype:{id:o},summary:s.profile.name,project:{id:n},assignee:{id:a},reporter:{id:a}}}))}createIssueLinkBody(t,n){return{inwardIssue:{key:t},outwardIssue:{key:n},type:{name:"Blocks"}}}getCreateJiraProjectBody(t,n=null,a=null){return{assigneeType:"UNASSIGNED",description:"Project Design sample project 1",issueSecurityScheme:10001,key:n=n||"DP",leadAccountId:t,name:a=a||"Default Project Name",notificationScheme:1e4,permissionScheme:0,projectTemplateKey:"com.pyxis.greenhopper.jira:gh-simplified-agility-kanban",projectTypeKey:"software",url:"http://atlassian.com"}}base64_arraybuffer(t){return(0,ke.Z)(function*(){return(yield new Promise(a=>{const o=new FileReader;o.onload=()=>a(o.result),o.readAsDataURL(new Blob([t]))})).split(",",2)[1]})()}base64StringToByteArray(t){const n=window.atob(t),a=n.length,o=new Uint8Array(a);for(let c=0;c<a;c++){const s=n.charCodeAt(c);o[c]=s}return o}static#e=this.\u0275fac=function(n){return new(n||e)(r.LFG(Tn.z),r.LFG(xo.w),r.LFG(yo.i),r.LFG(ko.c))};static#t=this.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var An=y(9680),Ao=y(2787),jo=y(2357);function Eo(e,i){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"date"),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.hij("Auth Expires: ",r.xi3(2,1,t.authExpireTime,"long"),"")}}function Io(e,i){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Oqu(t.me.displayName)}}function Co(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",17)(1,"a",18),r.NdJ("click",function(){const o=r.CHM(t).$implicit,c=r.oxw(2);return r.KtG(c.selectProject(o))}),r._uU(2),r.qZA()()}if(2&e){const t=i.$implicit;r.xp6(2),r.Oqu(t.name)}}function Zo(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",12)(1,"div",13)(2,"div")(3,"button",14),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.selectedTab="new-proj")}),r._uU(4,"Create New Project"),r.qZA()(),r.TgZ(5,"div",15),r._uU(6,"Projects"),r.qZA(),r.YNc(7,Co,3,1,"div",16),r.qZA()()}if(2&e){const t=r.oxw();r.xp6(7),r.Q6J("ngForOf",t.projects)}}function Ro(e,i){1&e&&(r.TgZ(0,"div",19),r._UZ(1,"cp-arrow-chart",20),r._uU(2," - "),r.qZA()),2&e&&(r.xp6(1),r.Q6J("width",300)("height",200)("showFastCreator",!1)("rebuild",!0))}function So(e,i){if(1&e&&(r.TgZ(0,"option",26),r._uU(1),r.qZA()),2&e){const t=i.$implicit;r.s9C("value",t.id),r.xp6(1),r.Oqu(t.description.split(" ")[0])}}function Po(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",21)(1,"div",22)(2,"div",23),r._uU(3),r.qZA(),r.TgZ(4,"div",23),r._uU(5),r.qZA(),r.TgZ(6,"div",23)(7,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.newArrowChart())}),r._uU(8,"New Arrow Chart"),r.qZA()(),r.TgZ(9,"div",23)(10,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.updateDependencies())}),r._uU(11,"Update Dependencies"),r.qZA()(),r.TgZ(12,"div",23)(13,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.getIssueTypes())}),r._uU(14,"Populate Issue Types"),r.qZA(),r.TgZ(15,"select",24),r.NdJ("change",function(a){r.CHM(t);const o=r.oxw();return r.KtG(o.setIssueType(a.target))}),r.YNc(16,So,2,2,"option",25),r.qZA()(),r.TgZ(17,"div",23)(18,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.getProjectProperty())}),r._uU(19,"Load Chart From Jira"),r.qZA(),r.TgZ(20,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.setProjectProperty())}),r._uU(21,"Save Chart To Jira"),r.qZA()(),r.TgZ(22,"div",23)(23,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.createJiraProject())}),r._uU(24,"Create Jira Project"),r.qZA(),r.TgZ(25,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.deleteJiraProject())}),r._uU(26,"Delete This Jira Project"),r.qZA()(),r.TgZ(27,"div",23)(28,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.createIssueLink())}),r._uU(29,"Create Issue Links"),r.qZA()()()()}if(2&e){const t=r.oxw();r.xp6(3),r.hij("Project: ",null==t.selectedProject?null:t.selectedProject.name,""),r.xp6(2),r.hij("Key: ",null==t.selectedProject?null:t.selectedProject.key,""),r.xp6(11),r.Q6J("ngForOf",t.projIssueTypes)}}function Oo(e,i){if(1&e&&(r.TgZ(0,"div",29),r._uU(1),r.qZA()),2&e){const t=i.$implicit;r.xp6(1),r.Oqu(t.profile.name)}}function zo(e,i){if(1&e&&(r.TgZ(0,"div",27),r.YNc(1,Oo,2,1,"div",28),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",null==t.issuesProject?null:t.issuesProject.activities)}}function Lo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Project Loaded"),r.qZA())}function Uo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Please load a project"),r.qZA())}function No(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Project Key is required"),r.qZA())}function Jo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1," Key needs to be 2 or 3 chars "),r.qZA())}function Do(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Duplicate project key detected"),r.qZA())}function Mo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Project Name is required"),r.qZA())}function Fo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Name needs to be 4 chars or more"),r.qZA())}function Ko(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Duplicate project name detected"),r.qZA())}function $o(e,i){if(1&e&&(r.TgZ(0,"div")(1,"div"),r._uU(2),r.qZA()()),2&e){const t=i.$implicit;r.xp6(2),r.AsE("",t.key,": ",t.value,"")}}function Bo(e,i){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,$o,3,2,"div",42),r.ALo(2,"keyvalue"),r.qZA()),2&e){const t=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,1,t.newProjectForm.errors))}}function Ho(e,i){1&e&&(r.TgZ(0,"a",43),r._uU(1,"Arrow to New Jira Project"),r.qZA())}function Yo(e,i){1&e&&(r.TgZ(0,"a"),r._uU(1,"Arrow to New Jira Project"),r.qZA())}function qo(e,i){1&e&&r._UZ(0,"div",44)}function Go(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",21)(1,"form",30),r.NdJ("ngSubmit",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.createFullJiraProject())}),r.TgZ(2,"div")(3,"div"),r.YNc(4,Lo,2,0,"div",7)(5,Uo,2,0,"div",7),r.qZA(),r.TgZ(6,"div")(7,"div"),r._uU(8,"Project Key"),r.qZA(),r.TgZ(9,"input",31),r.NdJ("change",function(a){r.CHM(t);const o=r.oxw();return r.KtG(o.setProjKey(a))}),r.qZA(),r.YNc(10,No,2,0,"div",7)(11,Jo,2,0,"div",7)(12,Do,2,0,"div",7),r.qZA(),r.TgZ(13,"div")(14,"div"),r._uU(15,"Project Name"),r.qZA(),r.TgZ(16,"input",32),r.NdJ("change",function(a){r.CHM(t);const o=r.oxw();return r.KtG(o.setProjName(a))}),r.qZA(),r.YNc(17,Mo,2,0,"div",7)(18,Fo,2,0,"div",7)(19,Ko,2,0,"div",7),r.qZA(),r.TgZ(20,"div",33)(21,"div"),r._uU(22,"Project Lead"),r.qZA(),r.TgZ(23,"select",34)(24,"option",35),r._uU(25,"Task"),r.qZA()()(),r.TgZ(26,"div",33)(27,"div"),r._uU(28,"Project Template"),r.qZA(),r.TgZ(29,"select",36)(30,"option",35),r._uU(31,"Team Run"),r.qZA(),r.TgZ(32,"option",35),r._uU(33,"Company Run"),r.qZA()()(),r.TgZ(34,"div",33)(35,"div"),r._uU(36,"Issue Type"),r.qZA(),r.TgZ(37,"select",37)(38,"option",35),r._uU(39,"Task"),r.qZA()()(),r.TgZ(40,"div",38),r.YNc(41,Bo,3,3,"div",7),r.TgZ(42,"button",39),r._uU(43," Arrow to New Jira Project "),r.qZA(),r.TgZ(44,"div"),r.YNc(45,Ho,2,0,"a",40)(46,Yo,2,0,"a",7),r.qZA()()()(),r.YNc(47,qo,1,0,"div",41),r.qZA()}if(2&e){const t=r.oxw();let n,a,o,c,s,_;r.xp6(1),r.Q6J("formGroup",t.newProjectForm),r.xp6(3),r.Q6J("ngIf",null==t.project||null==t.project.integrations?null:t.project.integrations.length),r.xp6(1),r.Q6J("ngIf",!(null!=t.project&&null!=t.project.integrations&&t.project.integrations.length)),r.xp6(4),r.Q6J("value",t.projKey),r.xp6(1),r.Q6J("ngIf",null==(n=t.newProjectForm.get("key"))?null:n.hasError("required")),r.xp6(1),r.Q6J("ngIf",(null==(a=t.newProjectForm.get("key"))?null:a.hasError("minlength"))||(null==(a=t.newProjectForm.get("key"))?null:a.hasError("maxlength"))),r.xp6(1),r.Q6J("ngIf",null==(o=t.newProjectForm.get("key"))?null:o.hasError("duplicate")),r.xp6(4),r.Q6J("value",t.projName),r.xp6(1),r.Q6J("ngIf",null==(c=t.newProjectForm.get("name"))?null:c.hasError("required")),r.xp6(1),r.Q6J("ngIf",null==(s=t.newProjectForm.get("name"))?null:s.hasError("minlength")),r.xp6(1),r.Q6J("ngIf",null==(_=t.newProjectForm.get("name"))?null:_.hasError("duplicate")),r.xp6(22),r.Q6J("ngIf",t.newProjectForm.errors),r.xp6(1),r.Q6J("disabled",!t.newProjectForm.valid||!(null!=t.project&&null!=t.project.integrations&&t.project.integrations.length)),r.xp6(3),r.Q6J("ngIf",null==t.project||null==t.project.integrations?null:t.project.integrations.length),r.xp6(1),r.Q6J("ngIf",!(null!=t.project&&null!=t.project.integrations&&t.project.integrations.length)),r.xp6(1),r.Q6J("ngIf",t.projects.length>0)}}const $t=e=>({active:e});let Qo=(()=>{class e{constructor(t,n,a,o,c,s,_,l,d){this.httpClient=t,this.route=n,this.connector=a,this.dashboard=o,this.importer=c,this.sanitizer=s,this.serializer=_,this.depCrawler=l,this.fb=d,this.cloudId=null,this.project=null,this.baseUrl=lt.N.criticalPathApi,this.selectedProject=null,this.projects=[],this.selectedTab=null,this.projectKey=null,this.issueType=null,this.projName=null,this.projKey=null,this.authExpireTime=null,this.me=null,this.issuesProject=null,this.issueTypes=[],this.projIssueTypes=[]}ngOnInit(){const t=this.route.snapshot.queryParams.code;t?this.getJiraToken(t):this.getCloudId(),this.sub=this.dashboard.activeProject$.subscribe(n=>{this.project=n}),this.newProjectForm=this.fb.group({key:["",[N.kI.required,N.kI.minLength(2),N.kI.maxLength(3),this.duplicateError("key")]],name:["",[N.kI.required,N.kI.minLength(4),this.duplicateError("name")]],lead:["",[]],template:["",[]],issueType:["",[]]})}duplicateError(t){return n=>"key"===t&&this.projects.find(a=>a.key.toLocaleLowerCase()===n.value.toLocaleLowerCase())||"name"===t&&this.projects.find(a=>a.name.toLocaleLowerCase()===n.value.toLocaleLowerCase())?{duplicate:!0}:null}onNewProjSubmit(){this.newProjectForm.get("key"),this.newProjectForm.get("name"),this.newProjectForm.get("lead"),this.newProjectForm.get("template"),this.newProjectForm.get("issueType")}ngOnDestroy(){this.sub.unsubscribe()}getMe(){const t=localStorage.getItem(O.sK);if(null!==t){const a={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},o=(0,J.Z)(U,this.cloudId,"rest/api/3/myself");this.httpClient.get(o,a).subscribe(c=>{this.me=c,console.log("users",c)},c=>{console.error("users resonse",c)})}}getJiraToken(t){this.httpClient.get((0,J.Z)(this.baseUrl,"account/jira-token",t)).subscribe(n=>{localStorage.setItem(O.sK,n.access_token);const a=(new Date).getTime()+36e5;localStorage.setItem(O.RH,a+""),this.getCloudId(),this.authExpireTime=new Date(a)},n=>{console.error("token resonse",n);const a=localStorage.getItem(O.RH);a&&(this.authExpireTime=new Date(parseInt(a,10))),this.getCloudId()})}getCloudId(){const t=localStorage.getItem(O.sK);if(null!==t){const a={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.get("https://api.atlassian.com/oauth/token/accessible-resources",a).subscribe(o=>{this.cloudId=o[0].id,this.getProjects(),this.getMe()},o=>{console.error("cloud id resonse",o),this.toJira()})}}setJiraProject(t){this.getJiraProjectResult(t)?.subscribe(n=>{this.project=this.convertIssuesToProject(n),this.dashboard.activeProject$.next(this.project)})}getJiraProjectResult(t){const n=localStorage.getItem(O.sK);if(null!==n){const o={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${n}`)},c=(0,J.Z)(U,this.cloudId,`rest/api/3/search?jql=project%20%3D%20${t.key}`);return this.httpClient.get(c,o)}return null}convertIssuesToProject(t){const n=this.importer.mapJiraProject(t);return n&&this.connector.connectArrowsToNodes(n),n}getProjects(){const t=localStorage.getItem(O.sK);if(null!==t){const a={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},o=(0,J.Z)(U,this.cloudId,"rest/api/3/project/search");this.httpClient.get(o,a).subscribe(c=>{this.projects=c.values.map(s=>({id:s.id,key:s.key,name:s.name})),this.selectedTab="projects"})}}setProjectProperty(t=null){var n=this;return(0,ke.Z)(function*(){const a=t?.key??n.selectedProject?.key,o=localStorage.getItem(O.sK);if(null!==o){const c=Xt,s=n.serializer.fromJson(n.project);n.sanitizer.sanatizeForSave(s),s.profile.subProject=void 0,s.profile.view=void 0;const _=JSON.stringify(s),l=xn(_),g={string:yield n.importer.base64_arraybuffer(l)},u=JSON.stringify(g),f=(0,J.Z)(U,n.cloudId,Te,a,Wt,c),C={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${o}`)};n.httpClient.put(f,u,C).subscribe(b=>{console.log(b)})}})()}getProjectProperty(){const t=this.selectedProject,n=localStorage.getItem(O.sK);if(null!==n){const o=(0,J.Z)(U,this.cloudId,Te,t.key,Wt,Xt),s={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${n}`)};this.httpClient.get(o,s).subscribe(_=>{const d=this.importer.base64StringToByteArray(_.value.string),g=yn(d,{to:"string"}),u=JSON.parse(g),f=this.serializer.fromJson(u);this.connector.connectArrowsToNodes(f),f.profile.view.autoZoom=!0,this.dashboard.activeProject$.next(f)},_=>{this.setJiraProject(t)})}}updateDependencies(){this.depCrawler.setDependencyDataFromGraph(this.project)}toJira(){window.location.href="https://auth.atlassian.com/authorize?audience=api.atlassian.com&client_id=1SdMM8pTryWCljI1Awm9drfKvnU2BR2H&scope=read%3Ame%20read%3Ajira-work%20manage%3Ajira-project%20read%3Ajira-user%20write%3Ajira-work%20manage%3Ajira-configuration&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fjira&state=${YOUR_USER_BOUND_VALUE}&response_type=code&prompt=consent"}selectProject(t){this.projectKey=t.key,this.selectedProject=t,this.selectedTab="viz",this.getJiraProjectResult(t)?.subscribe(n=>{this.issuesProject=this.convertIssuesToProject(n),this.getProjectProperty()})}newArrowChart(){this.selectedProject&&this.setJiraProject(this.selectedProject)}setIssueType(t){this.issueType=t.value}createJiraProject(){const t=localStorage.getItem(O.sK);if(null!==t){const n=(0,J.Z)(U,this.cloudId,Te),o=this.importer.getCreateJiraProjectBody("5c741c367dae4b653384935c"),s={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.post(n,o,s).subscribe(_=>{console.log(_)})}}getIssueTypes(){const t=localStorage.getItem(O.sK),a={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},o=(0,J.Z)(U,this.cloudId,Gt);this.issueTypes=[],this.httpClient.get(o,a).subscribe(c=>{console.log(c),c.forEach(s=>{const _={id:s.id,description:s.description,projectId:s.scope?.project?.id};this.issueTypes.push(_),_.projectId===this.selectedProject?.id&&this.projIssueTypes.push(_)})})}createFullJiraProject(){const t=localStorage.getItem(O.sK),n=this.me.accountId,o={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},c=this.newProjectForm.get("key")?.value,s=this.newProjectForm.get("name")?.value,_=this.importer.getCreateJiraProjectBody(n,c,s),l=(0,J.Z)(U,this.cloudId,Te);this.httpClient.post(l,_,o).subscribe(d=>{console.log("create project",d);const g=""+d.id,f=(0,J.Z)(U,this.cloudId,Gt);this.issueTypes=[],this.httpClient.get(f,o).subscribe(p=>{console.log(p),p.forEach(b=>{const m={id:b.id,description:b.description,projectId:b.scope?.project?.id};this.issueTypes.push(m),m.projectId===g&&this.projIssueTypes.push(m)});const C=this.projIssueTypes.find(b=>b.projectId===g&&b.description.indexOf("Task")>-1);if(C){const b=C.id,m=this.project.activities.filter(h=>!h.chartInfo.isDummy),x=this.importer.mapProjectToJiraIssues(m,g,n,b).map(h=>{const T=(0,J.Z)(U,this.cloudId,qt),S=JSON.stringify(h);return this.httpClient.post(T,S,o)});(0,ht.D)(x).subscribe(h=>{this.importer.addIssueKeysToArrows(m,h);const T=this.importer.getIssueLinks(this.project);this.createIssueLinks(T),this.setProjectProperty(d),console.log(h),this.getProjects()},h=>{console.error("error creating jira issues",h)})}},p=>{console.error("error getting issue types",p)})},d=>{console.error("error creating jira base project",d)})}addIssuesToJiraProject(){const n=this.issueType;if(!n)return;const a=this.project.activities.filter(s=>!s.chartInfo.isDummy),c=this.importer.mapProjectToJiraIssues(a,this.selectedProject.id,"5c741c367dae4b653384935c",n).map(s=>{const _=localStorage.getItem(O.sK),l=(0,J.Z)(U,this.cloudId,qt),d=JSON.stringify(s),u={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${_}`)};return this.httpClient.post(l,d,u)});(0,ht.D)(c).subscribe(s=>{this.importer.addIssueKeysToArrows(a,s);const _=this.importer.getIssueLinks(this.project);this.createIssueLinks(_),this.setProjectProperty(),console.log(s)})}deleteJiraProject(){if(confirm("Are you sure you want to delete this project?")){const t=localStorage.getItem(O.sK);if(null!==t){const a=(0,J.Z)(U,this.cloudId,Te,this.selectedProject.key),c={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.delete(a,c).subscribe(s=>{console.log(s),this.getProjects()})}}}createIssueLink(){const t=localStorage.getItem(O.sK);if(null!==t){const n=(0,J.Z)(U,this.cloudId,Qt),c=this.importer.createIssueLinkBody("P1-8","P1-10"),_={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.post(n,c,_).subscribe(l=>{console.log(l)})}}createIssueLinks(t){const n=localStorage.getItem(O.sK);if(null!==n){const a=(0,J.Z)(U,this.cloudId,Qt),c={headers:(new L.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${n}`)},s=t.map(_=>this.httpClient.post(a,_,c));(0,ht.D)(s).subscribe(_=>{console.log("issueLinks created",_)})}}setProjName(t){this.projName=t.target.value}setProjKey(t){this.projKey=t.target.value}static#e=this.\u0275fac=function(n){return new(n||e)(r.Y36(L.eN),r.Y36(ue.gz),r.Y36(vo.E),r.Y36(ft.Ou),r.Y36(To),r.Y36(An.B),r.Y36(Tn.z),r.Y36(Ao.v),r.Y36(N.qu))};static#t=this.\u0275cmp=r.Xpm({type:e,selectors:[["critical-pass-jira-layout"]],decls:24,vars:16,consts:[[1,"page-content"],[1,"jira-header"],[1,"jira-buttons"],[1,"nav","nav-tabs"],[1,"nav-item"],["href","javascript:void(0)",1,"nav-link",3,"ngClass","click"],[1,"btn","btn-primary",3,"click"],[4,"ngIf"],["class","project-list",4,"ngIf"],["class","arrow-snapshot",4,"ngIf"],["class","project-actions",4,"ngIf"],["class","jira-issues",4,"ngIf"],[1,"project-list"],[1,"jira-projects"],[1,"btn","btn-secondary",3,"click"],[1,"proj-title"],["class","jira-project",4,"ngFor","ngForOf"],[1,"jira-project"],["href","javascript:void(0)",3,"click"],[1,"arrow-snapshot"],[3,"width","height","showFastCreator","rebuild"],[1,"project-actions"],[1,"action-container"],[1,"jira-action"],[3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"jira-issues"],["class","jira-issue",4,"ngFor","ngForOf"],[1,"jira-issue"],[3,"formGroup","ngSubmit"],["type","text","formControlName","key",3,"value","change"],["type","text","formControlName","name",3,"value","change"],[1,"p-flex"],["name","","id","","formControlName","lead"],["value",""],["name","","id","","formControlName","template"],["name","","id","","formControlName","issueType"],[1,"submit-button"],["type","submit",1,"btn","btn-secondary",3,"disabled"],["href","javascript:void(0)",4,"ngIf"],["class","project-controls",4,"ngIf"],[4,"ngFor","ngForOf"],["href","javascript:void(0)"],[1,"project-controls"]],template:function(n,a){1&n&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),r.NdJ("click",function(){return a.selectedTab="projects"}),r._uU(6,"Projects List"),r.qZA()(),r.TgZ(7,"li",4)(8,"a",5),r.NdJ("click",function(){return a.selectedTab="viz"}),r._uU(9,"Project Viz"),r.qZA()(),r.TgZ(10,"li",4)(11,"a",5),r.NdJ("click",function(){return a.selectedTab="new-proj"}),r._uU(12,"New Project"),r.qZA()()(),r.TgZ(13,"div")(14,"button",6),r.NdJ("click",function(){return a.toJira()}),r._uU(15,"Authorize Jira"),r.qZA()()(),r.TgZ(16,"div"),r.YNc(17,Eo,3,4,"div",7)(18,Io,2,1,"div",7),r.qZA()(),r.YNc(19,Zo,8,1,"div",8)(20,Ro,3,4,"div",9)(21,Po,30,3,"div",10)(22,zo,2,1,"div",11)(23,Go,48,16,"div",10),r.qZA()),2&n&&(r.xp6(5),r.Q6J("ngClass",r.VKq(10,$t,"projects"===a.selectedTab)),r.xp6(3),r.Q6J("ngClass",r.VKq(12,$t,"viz"===a.selectedTab)),r.xp6(3),r.Q6J("ngClass",r.VKq(14,$t,"new-proj"===a.selectedTab)),r.xp6(6),r.Q6J("ngIf",null!==a.authExpireTime),r.xp6(1),r.Q6J("ngIf",null!==a.me),r.xp6(1),r.Q6J("ngIf",a.projects.length>0&&"projects"===a.selectedTab),r.xp6(1),r.Q6J("ngIf",a.projects.length>0),r.xp6(1),r.Q6J("ngIf",null!==a.project&&"viz"===a.selectedTab),r.xp6(1),r.Q6J("ngIf",null!==a.issuesProject&&"viz"===a.selectedTab),r.xp6(1),r.Q6J("ngIf","new-proj"===a.selectedTab))},dependencies:[Q.mk,Q.sg,Q.O5,jo.w,N._Y,N.YN,N.Kr,N.Fj,N.EJ,N.JJ,N.JL,N.sg,N.u,Q.uU,Q.Nd],styles:[".page-content[_ngcontent-%COMP%]{display:flex;grid-gap:20px;margin:15px;color:#666;width:100%}.page-content[_ngcontent-%COMP%]{background-color:#f9f9f9}.page-content[_ngcontent-%COMP%]{padding:12px;flex-wrap:wrap}.jira-projects[_ngcontent-%COMP%]{color:#666}.jira-projects[_ngcontent-%COMP%]   .proj-title[_ngcontent-%COMP%]{padding-top:25px}.jira-projects[_ngcontent-%COMP%]   .jira-project[_ngcontent-%COMP%]{margin:20px}.jira-issue[_ngcontent-%COMP%]{margin:5px;width:25%}.jira-action[_ngcontent-%COMP%]{margin-left:28px;margin-bottom:7px;margin-right:12px}.jira-action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:22px}.arrow-snapshot[_ngcontent-%COMP%]{grid-column:4/6;grid-row:1/4}.page-content[_ngcontent-%COMP%]{justify-content:space-between}.jira-buttons[_ngcontent-%COMP%]{display:flex;align-items:baseline}.jira-buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:12px}.jira-header[_ngcontent-%COMP%]{grid-row:1/2;grid-column:1/3}.page-content[_ngcontent-%COMP%]{display:grid;grid-template-rows:70px repeat(3,1fr) .5fr;grid-template-columns:repeat(5,1fr);height:calc(100vh - 119px);width:calc(100vw - 267px)}.project-list[_ngcontent-%COMP%], .project-actions[_ngcontent-%COMP%]{grid-row:2/3;grid-column:1/3}.project-controls[_ngcontent-%COMP%]{grid-row:1/2;grid-column:3/4}.action-container[_ngcontent-%COMP%]{padding-top:26px}.submit-button[_ngcontent-%COMP%]{padding-top:20px}.p-flex[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:5px}.p-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:12px}.jira-issues[_ngcontent-%COMP%]{grid-row:3/-1;grid-column:1/4;overflow:auto;display:flex;flex-direction:column;flex-wrap:wrap;margin-left:25px;align-content:flex-start}"]})}return e})();var Wo=y(2181),Xo=y(9397),Bt=y(3830),Vo=y(2425),es=y(7649),ts=y(155),is=y(3994);const as=[{path:"",component:st.r,children:[{path:"",component:Qo},{path:"",component:(()=>{class e{constructor(t,n,a,o,c,s,_){this.toastr=t,this.dashboard=n,this.fCompiler=a,this.projectSanitizer=o,this.zametekApi=c,this.storageApi=s,this.router=_,this.isProcessing=!1}ngOnInit(){this.subscription=this.dashboard.activeProject$.pipe((0,Wo.h)(t=>!!t)).subscribe(t=>{this.project=t})}buildArrowChart(){this.isProcessing=!0,this.compileArrowGraph(this.project).subscribe(t=>{t?(this.dashboard.updateProject(t,!1),this.isProcessing=!1,this.toastr.success("Build Arrow Chart","Success!")):(this.isProcessing=!1,this.toastr.error("Build Arrow Chart","Project Missing."))},t=>{console.error(t),this.isProcessing=!1,this.toastr.error("Build Arrow Chart","Error occured.")})}compileArrowGraph(t){return this.projectSanitizer.sanitizeNumbers(t),this.zametekApi.compileArrowGraph(t).pipe((0,Xo.b)(n=>(n&&this.fCompiler.compileProjectFromFile(n),n)))}ngOnDestroy(){this.subscription?.unsubscribe()}navToNetwork(){this.project.profile.view.autoZoom=!0,this.storageApi.set(Bt._k,this.project),this.router.navigateByUrl(O.OD)}getProjectFromStorage(){var t=this;return(0,ke.Z)(function*(){const n=yield t.storageApi.get(Bt._k);n&&(t.project=n,t.dashboard.updateProject(n,!1))})()}unstash(){var t=this;return(0,ke.Z)(function*(){try{const n=yield t.storageApi.get(Bt.H3);n&&t.dashboard.activeProject$.next(n)}catch(n){return t.toastr.error("Unstash Chart","Error occured."),void console.error(n)}t.toastr.success("Unstash Chart","Success!")})()}static#e=this.\u0275fac=function(n){return new(n||e)(r.Y36(Vo._W),r.Y36(ft.Ou),r.Y36(es.h),r.Y36(An.B),r.Y36(ts.v),r.Y36(ft.$y),r.Y36(ue.F0))};static#t=this.\u0275cmp=r.Xpm({type:e,selectors:[["critical-pass-jira-bar"]],decls:10,vars:0,consts:[[1,"meta-bar"],["href","javascript:void(0)",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(n,a){1&n&&(r._UZ(0,"cp-lasso-bar"),r.TgZ(1,"div",0)(2,"a",1),r.NdJ("click",function(){return a.unstash()}),r._uU(3,"Unstash"),r.qZA(),r.TgZ(4,"a",2),r.NdJ("click",function(){return a.buildArrowChart()}),r._uU(5,"Generate Arrow Chart "),r.qZA(),r.TgZ(6,"a",2),r.NdJ("click",function(){return a.navToNetwork()}),r._uU(7,"Load Project in Network "),r.qZA(),r.TgZ(8,"a",2),r.NdJ("click",function(){return a.getProjectFromStorage()}),r._uU(9,"Load Proj From Storage"),r.qZA()())},dependencies:[is.l],styles:[".meta-bar[_ngcontent-%COMP%]{padding-left:27px;padding-right:16px}.meta-bar[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-top:20px}"]})}return e})(),outlet:"sidebar"}]}];let rs=(()=>{class e{static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=r.oAB({type:e});static#i=this.\u0275inj=r.cJS({imports:[ue.Bz.forChild(as),ue.Bz]})}return e})();var os=y(40),ss=y(1281);let ls=(()=>{class e{static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=r.oAB({type:e});static#i=this.\u0275inj=r.cJS({imports:[Q.ez,at.m,rs,L.JF,os.S,ot,ss.E,N.UX]})}return e})()}}]);