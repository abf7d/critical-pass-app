"use strict";(self.webpackChunkcritical_web=self.webpackChunkcritical_web||[]).push([[592],{12:(x,T,a)=>{a.d(T,{e:()=>n});var t=a(9862),O=a(7631),C=a(3830),m=a(9500),e=a(9212);let n=(()=>{class i{constructor(l){this.httpClient=l,this.baseUrl=O.N.criticalPathApi}getProjectLists(l){return this.httpClient.get((0,m.Z)(this.baseUrl,C.cP,l.toString()))}getGroupLists(l){const g=(new t.LE).set("filterTxt",l||"");return this.httpClient.get((0,m.Z)(this.baseUrl,C.xr),{params:g})}processProjectList(l,g){const c=JSON.stringify(g),r=(new t.WM).set("Content-Type","application/json");return this.httpClient.post((0,m.Z)(this.baseUrl,C.w1,l.toString()),c,{headers:r})}static#t=this.\u0275fac=function(g){return new(g||i)(e.LFG(t.eN))};static#e=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},6724:(x,T,a)=>{a.d(T,{V:()=>s});var t=a(6814),O=a(6223),C=a(5616),m=a(617),e=a(3680),n=a(179),i=a(9212);let s=(()=>{class l{static#t=this.\u0275fac=function(r){return new(r||l)};static#e=this.\u0275mod=i.oAB({type:l});static#n=this.\u0275inj=i.cJS({imports:[t.ez,O.u5,C.FA,e.XK,m.Ps,n.g]})}return l})()},2671:(x,T,a)=>{a.d(T,{D:()=>c});var t=a(9212),O=a(4403),C=a(4156),m=a(2596),e=a(6814);function n(r,A){if(1&r){const d=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(d);const u=t.oxw();return t.KtG(u.isSelFileType=!1)}),t.qZA()}}function i(r,A){if(1&r){const d=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(d);const u=t.oxw();return t.KtG(u.isSelFileType=!0)}),t.qZA()}}function s(r,A){if(1&r){const d=t.EpF();t.TgZ(0,"div",22)(1,"input",25),t.NdJ("change",function(){t.CHM(d);const u=t.oxw(2);return t.KtG(u.fileType="electron-save")}),t.qZA(),t.TgZ(2,"label",26),t._uU(3,"sql"),t.qZA()()}if(2&r){const d=t.oxw(2);t.xp6(1),t.Q6J("checked","electron-save"===d.fileType)}}const l=r=>({height:r});function g(r,A){if(1&r){const d=t.EpF();t.TgZ(0,"div",20),t.YNc(1,s,4,1,"div",21),t.TgZ(2,"div",22)(3,"input",23),t.NdJ("change",function(){t.CHM(d);const u=t.oxw();return t.KtG(u.fileType="json")}),t.qZA(),t.TgZ(4,"label",24),t._uU(5,"json"),t.qZA()(),t.TgZ(6,"div",22)(7,"input",25),t.NdJ("change",function(){t.CHM(d);const u=t.oxw();return t.KtG(u.fileType="xslx")}),t.qZA(),t.TgZ(8,"label",26),t._uU(9,"xlsx"),t.qZA()()()}if(2&r){const d=t.oxw();t.Q6J("ngStyle",t.VKq(4,l,d.saveMenuHeight)),t.xp6(1),t.Q6J("ngIf",d.allowSave),t.xp6(2),t.Q6J("checked","json"===d.fileType),t.xp6(4),t.Q6J("checked","xlsx"===d.fileType)}}let c=(()=>{class r{constructor(d){this.envService=d,this.disableButtons=!1,this.enableSave=!0,this.save=new t.vpe,this.load=new t.vpe,this.showHelp=!1,this.fileType=O.S6.JSON,this.isSelFileType=!1,this.resourceCount=null,this.allowSave=!1,this.saveMenuHeight="50px",this.allowSave=this.envService.isElectron,this.saveMenuHeight=this.allowSave?"70px":"50px"}saveDataTo(){this.enableSave&&this.save.emit(this.fileType)}loadFile(d){const v=d.files,u=v.item(0);null!==u&&v.length>0&&this.load.emit(u)}static#t=this.\u0275fac=function(v){return new(v||r)(t.Y36(C.L))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["da-file-action-buttons"]],inputs:{disableButtons:"disableButtons",enableSave:"enableSave"},outputs:{save:"save",load:"load"},decls:78,vars:9,consts:[[1,"btn","btn-secondary",3,"click"],["type","file","accept",".xlsx, .json",1,"file-input",3,"change"],["uploadFile",""],[1,"right"],["matTooltip","Go to Parent to enable buttons. Your changes will be preserved.",3,"matTooltipDisabled"],["tooltip","matTooltip"],["title","Download as file or save to database",1,"btn","btn-primary"],[3,"click"],["href","javascript:void(0)",1,"btn","pos-rel"],["class","fas fa-chevron-up",3,"click",4,"ngIf"],["class","fas fa-chevron-down",3,"click",4,"ngIf"],["class","peek file-types",3,"ngStyle",4,"ngIf"],[1,"btns"],[1,"fas","fa-times"],[1,"fas","fa-question-circle","help-btn",3,"click"],[1,"help",3,"hidden"],[1,"fa","fa-times","help-close",3,"click"],[1,"help-list"],[1,"fas","fa-chevron-up",3,"click"],[1,"fas","fa-chevron-down",3,"click"],[1,"peek","file-types",3,"ngStyle"],["class","custom-control custom-radio",4,"ngIf"],[1,"custom-control","custom-radio"],["type","radio","id","multi","name","create","value","multi",1,"custom-control-input",3,"checked","change"],["for","multi",1,"custom-control-label"],["type","radio","id","arrange",1,"custom-control-input",3,"checked","change"],["for","arrange",1,"custom-control-label"]],template:function(v,u){if(1&v){const p=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){t.CHM(p);const o=t.MAs(3);return o.value="",t.KtG(o.click())}),t._uU(1,"Load File"),t.qZA(),t.TgZ(2,"input",1,2),t.NdJ("change",function(o){return u.loadFile(o.target)}),t.qZA(),t.TgZ(4,"div",3)(5,"div",4,5)(7,"button",6)(8,"span",7),t.NdJ("click",function(){return u.saveDataTo()}),t._uU(9,"Save to"),t.qZA(),t.TgZ(10,"a",8),t.YNc(11,n,1,0,"i",9)(12,i,1,0,"i",10)(13,g,10,6,"div",11),t.qZA()()(),t.TgZ(14,"div",12),t._UZ(15,"i",13),t.TgZ(16,"i",14),t.NdJ("click",function(){return u.showHelp=!u.showHelp}),t.qZA(),t.TgZ(17,"div",15)(18,"i",16),t.NdJ("click",function(){return u.showHelp=!u.showHelp}),t.qZA(),t.TgZ(19,"h4"),t._uU(20,"Help"),t.qZA(),t.TgZ(21,"ol",17)(22,"li")(23,"b"),t._uU(24,"Create Node:"),t.qZA(),t._uU(25," Double click on arrow diagram background"),t.qZA(),t.TgZ(26,"li")(27,"b"),t._uU(28,"Move Node:"),t.qZA(),t._uU(29," Hold Ctrl key + drag node. (On Mac: Hold Command key + drag node)"),t.qZA(),t.TgZ(30,"li")(31,"b"),t._uU(32,"Create Arrow:"),t.qZA(),t._uU(33," Single click on one node and drag to another"),t.qZA(),t.TgZ(34,"li")(35,"b"),t._uU(36,"Select / Deselect Node:"),t.qZA(),t._uU(37," Click on node"),t.qZA(),t.TgZ(38,"li")(39,"b"),t._uU(40,"Select / Deselect Arrow:"),t.qZA(),t._uU(41," Click on Arrow body or Click on Text above arrow."),t.qZA(),t.TgZ(42,"li")(43,"b"),t._uU(44,"Delete Node / Arrow:"),t.qZA(),t._uU(45," Click to select node / arrow, press Delete (Command + Delete on Mac)"),t.qZA(),t.TgZ(46,"li")(47,"b"),t._uU(48,"Join two Nodes:"),t.qZA(),t._uU(49," Drag one Node over another and release."),t.qZA(),t.TgZ(50,"li")(51,"b"),t._uU(52,"Split Node:"),t.qZA(),t._uU(53," Click to select a Node with multiple in / out arrows then press Ctrl + X keys (Command + X keys on Mac)"),t.qZA(),t.TgZ(54,"li")(55,"b"),t._uU(56,"Make Node Dummy:"),t.qZA(),t._uU(57," Click to select Node and press Ctrl + D keys.(Command + D keys on Mac)"),t.qZA(),t.TgZ(58,"li")(59,"b"),t._uU(60,"Make Node Milestone:"),t.qZA(),t._uU(61," Click to select Node and press Ctrl + M keys.(Command + M keys on Mac)"),t.qZA(),t.TgZ(62,"li")(63,"b"),t._uU(64,"Load Sub Project:"),t.qZA(),t._uU(65," Click to select an Arrow with a '*' in the text above arrow. Click on 'Load Sub Graph' button in selected Activity info on left hand side "),t.qZA(),t.TgZ(66,"li")(67,"b"),t._uU(68,"Pan the arrow chart:"),t.qZA(),t._uU(69," Single click and drag background"),t.qZA(),t.TgZ(70,"li")(71,"b"),t._uU(72,"Initalize Risk:"),t.qZA(),t._uU(73," To calculate the arrow diagram risk, add start / end nodes in the lower right hand corner. To auto set the start and end nodes click 'Calculate Risk' "),t.qZA(),t.TgZ(74,"li")(75,"b"),t._uU(76,"Arrange Nodes:"),t.qZA(),t._uU(77," To arrange the nodes in a readable format click the 'Arrange Nodes' button to the bottom left of the arrow diagram "),t.qZA()()()()()}2&v&&(t.ekj("disabled",u.disableButtons),t.xp6(5),t.Q6J("matTooltipDisabled",!u.disableButtons),t.xp6(2),t.ekj("disabled",u.disableButtons||!u.enableSave),t.xp6(4),t.Q6J("ngIf",u.isSelFileType),t.xp6(1),t.Q6J("ngIf",!u.isSelFileType),t.xp6(1),t.Q6J("ngIf",u.isSelFileType),t.xp6(4),t.Q6J("hidden",!u.showHelp))},dependencies:[m.gM,e.O5,e.PC],styles:["[_nghost-%COMP%]{width:253px;display:flex}.btn-secondary[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:2px;background-color:#f9f9f9;color:#666}.btn-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.btn[_ngcontent-%COMP%]{font-size:.87rem}.border-right[_ngcontent-%COMP%]{border-right:1px solid #333}.stash[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#45f}div.right[_ngcontent-%COMP%]{display:flex;flex-direction:row}div.right[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 7px}div.file-types[_ngcontent-%COMP%]{display:block}.right[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 5px}.stash[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.btns[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding-top:3px}.help-btn[_ngcontent-%COMP%]{color:#999;cursor:pointer}.peek[_ngcontent-%COMP%]{width:410px;height:270px;position:absolute;border:1px solid #e9e9e9;z-index:1;background-color:#f9f9f9;top:38px;display:flex;align-items:center;justify-content:center}.file-types[_ngcontent-%COMP%]{width:88px;height:70px;position:absolute;border:1px solid #e9e9e9;z-index:1;background-color:#f9f9f9;top:34px;margin-left:-20px}.stash[_ngcontent-%COMP%], .pos-rel[_ngcontent-%COMP%]{position:relative}.help[_ngcontent-%COMP%]{position:absolute;top:18px;right:0;width:400px;height:auto;background-color:#fff;border-radius:5px;z-index:1000;padding:20px;box-shadow:1px 3px 5px #0000006b}.help[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{position:absolute;padding-top:10px}.help-container[_ngcontent-%COMP%]{position:relative}.help-close[_ngcontent-%COMP%]{position:absolute;right:13px;cursor:pointer;top:13px}.help-pointer[_ngcontent-%COMP%]{cursor:pointer;color:#999}.help-list[_ngcontent-%COMP%]{padding:55px 49px 35px}.alert-msg[_ngcontent-%COMP%]{background:#4a4;border:1px solid #ddd;position:fixed;height:70px;width:102px;text-align:center;vertical-align:center;padding-top:19px;left:50%;color:#fff;top:50%;font-size:18px;border-radius:15px;z-index:2000}.saved[_ngcontent-%COMP%]{background:#4a4;border:1px solid #ddd}.error[_ngcontent-%COMP%]{background:#a44;border:1px solid #ddd}.save-proj[_ngcontent-%COMP%]{display:inline}a.btn-primary[_ngcontent-%COMP%]{color:#fff}.top-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.overlay[_ngcontent-%COMP%]{position:fixed;width:100vw;height:100vh;inset:0;color:#fff;background-color:#00000080;z-index:100000;cursor:pointer}.overlay-txt[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:20px;font-weight:700}.btn-secondary.disabled[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.file-input[_ngcontent-%COMP%]{display:none}.baseline[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.auto-resources[_ngcontent-%COMP%]{width:42px;height:30px;border:1px solid #ccc;text-align:right}.btn-row[_ngcontent-%COMP%]   div.baseline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 2px}.pos-rel[_ngcontent-%COMP%]{margin-top:-7px;padding:0 0 0 3px}"]})}return r})()},5488:(x,T,a)=>{a.d(T,{L:()=>n});var t=a(6814),O=a(6223),C=a(2596),m=a(7586),e=a(9212);let n=(()=>{class i{static#t=this.\u0275fac=function(g){return new(g||i)};static#e=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[C.AV,O.u5,t.ez,m.Bz]})}return i})()},3994:(x,T,a)=>{a.d(T,{l:()=>u});var t=a(3830),O=a(3633),C=a(2181),m=a(2433),e=a(9212),n=a(9989),i=a(2119),s=a(9304);let l=(()=>{class p{constructor(o,f,_){this.nodeSerializer=o,this.projectSerializer=f,this.activitySerializer=_}extractSubProject(o,f){if(o.profile.view.isSubProjSelected){const _=o.activities.filter(M=>o.profile.view.lassoedLinks.indexOf(M.profile.id)>-1);let h=null,b=null,Z=o.integrations.filter(M=>(o.profile.view.lassoStart===M.id&&(h=M),o.profile.view.lassoEnd===M.id&&(b=M),o.profile.view.lassoedNodes.indexOf(M.id)>-1&&h?.id!==M.id&&b?.id!==M.id));if(b&&h){const M=this.nodeSerializer.fromJson(h),S=this.nodeSerializer.fromJson(b);_.forEach(P=>{P.chartInfo.target_id===h.id&&(P.chartInfo.target=M),P.chartInfo.source_id===h.id&&(P.chartInfo.source=M),P.chartInfo.target_id===b.id&&(P.chartInfo.target=S),P.chartInfo.source_id===b.id&&(P.chartInfo.source=S)}),o.activities=o.activities.filter(P=>-1===_.indexOf(P)),o.integrations=[...o.integrations.filter(P=>-1===Z.indexOf(P))],Z=Z.map(P=>this.nodeSerializer.fromJson(P)),Z.push(M,S);const w=this.projectSerializer.fromJson();let k=f-1;k>=-1&&(k=-2);const U=`Sub Project ${k}`;w.profile.id=k,w.profile.name=U,w.activities=_,w.integrations=[...Z];const y=this.activitySerializer.fromJson(),L=Math.max(...o.activities.map(P=>P.profile.id))+1;return y.profile.id=L,y.chartInfo.source_id=h.id,y.chartInfo.target_id=b.id,y.subProject.graphId=k,y.subProject.subGraphId=k,y.profile.name=U,o.activities.push(y),o.profile.view.lassoStart=null,o.profile.view.lassoEnd=null,o.profile.view.lassoedLinks=[],o.profile.view.lassoedNodes=[],w}}return null}static#t=this.\u0275fac=function(f){return new(f||p)(e.LFG(n.i),e.LFG(i.z),e.LFG(s.w))};static#e=this.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})();var g=a(7586),c=a(9728),r=a(6814),A=a(9707);const d=p=>({active:p}),v=p=>({disabled:p});let u=(()=>{class p{constructor(o,f,_,h,b){this.dashboard=o,this.eventService=f,this.projectExtractor=_,this.router=h,this.storageApi=b,this.project=null,this.activity=null,this.showLoadBtn=!1,this.projectName="",this.isLasso=!1,this.isSubProjSelected=!1,this.networkArray$=this.eventService.get(m.Zs),this.filteredNetworkArray$=this.eventService.get(m.eB)}ngOnInit(){this.sub=this.dashboard.activeProject$.pipe((0,C.h)(o=>!!o)).subscribe(o=>{this.project=o,this.projectName=o.profile.name,this.activity=o.profile.view.selectedActivity,this.isLasso=o.profile.view.lassoOn,this.isSubProjSelected=o.profile.view.isSubProjSelected})}updateProjectName(o){this.projectName=o.target.value,this.project&&(this.project.profile.name=this.projectName)}keyPress(o){"Enter"===o.key&&this.updateProjectName(o)}toggleLasso(o){this.project&&(this.project.profile.view.lassoOn=o,this.project.profile.view.lassoedLinks=[],this.project.profile.view.lassoedNodes=[],this.dashboard.updateProject(this.project,!0))}extractSubProject(){if(this.isSubProjSelected&&this.project){const o=this.networkArray$.getValue()??[],f=this.filteredNetworkArray$.getValue()??[];let _=Math.min(...o.map(b=>b.profile.id));_===1/0&&!this.project.profile.id&&(this.project.profile.id=-2,this.project.profile.name="Origin Project",_=-2),0===f.length&&f.push(this.project),0===o.length&&o.push(this.project);const h=this.projectExtractor.extractSubProject(this.project,_);h&&(f.push(h),o.push(h),this.networkArray$.next(o),this.filteredNetworkArray$.next(f)),this.dashboard.updateProject(this.project,!0)}}storeToSnapshot(){if(null!==this.project){const o=this.networkArray$.getValue()??[],f=this.filteredNetworkArray$.getValue()??[],_=o.find(b=>b.profile.id===this.project.profile.id),h=f.find(b=>b.profile.id===this.project.profile.id);(null===this.project.profile.id||0===this.project.profile.id)&&(this.project.profile.id=-1*(o.length+1)),_?(o.splice(o.indexOf(_),1),o.push(this.project)):(o.push(this.project),this.networkArray$.next(o)),h?(f.splice(f.indexOf(h),1),f.push(this.project)):(f.push(this.project),this.filteredNetworkArray$.next(f))}}ngOnDestroy(){this.sub?.unsubscribe()}navToProjProfile(){this.storageApi.set(t._k,this.project),this.router.navigateByUrl(m.d4)}navToScenarioPlanning(){this.storageApi.set(t._k,this.project),this.router.navigateByUrl(m.au)}static#t=this.\u0275fac=function(f){return new(f||p)(e.Y36(O.Ou),e.Y36(O.WO),e.Y36(l),e.Y36(g.F0),e.Y36(c.K))};static#e=this.\u0275cmp=e.Xpm({type:p,selectors:[["cp-lasso-bar"]],decls:32,vars:13,consts:[[1,"meta-bar"],["href","javascript:void(0)",1,"btn",3,"click"],["type","text",3,"value","keypress","blur"],["href","https://criticalpass.azurewebsites.net/assets/sample-data/project-network.xlsx"],[1,"title"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-secondary","active",3,"ngClass"],["type","radio","id","float","value","float","name","bottom-text",1,"form-check-input",3,"click"],[1,"btn","btn-secondary",3,"ngClass"],["type","radio","id","under-none","value","under-none","name","bottom-text",1,"form-check-input",3,"click"],[1,"btn","btn-secondary",3,"ngClass","click"],[3,"projectPool"]],template:function(f,_){1&f&&(e.TgZ(0,"div",0)(1,"div")(2,"a",1),e.NdJ("click",function(){return _.navToProjProfile()}),e._uU(3,"Load Project in Profile"),e.qZA()(),e.TgZ(4,"div")(5,"a",1),e.NdJ("click",function(){return _.navToScenarioPlanning()}),e._uU(6,"Load in Scenarios"),e.qZA()(),e.TgZ(7,"div")(8,"div"),e._uU(9,"Project Name"),e.qZA(),e.TgZ(10,"input",2),e.NdJ("keypress",function(b){return _.keyPress(b)})("blur",function(b){return _.updateProjectName(b)}),e.qZA()(),e.TgZ(11,"div")(12,"a",3),e._uU(13,"Get Sample Data"),e.qZA()(),e.TgZ(14,"div")(15,"div",4),e._uU(16,"Lasso Tool"),e.qZA(),e.TgZ(17,"div",5)(18,"label",6)(19,"input",7),e.NdJ("click",function(){return _.toggleLasso(!1)}),e.qZA(),e._uU(20," Off "),e.qZA(),e.TgZ(21,"label",8)(22,"input",9),e.NdJ("click",function(){return _.toggleLasso(!0)}),e.qZA(),e._uU(23," On "),e.qZA()()(),e.TgZ(24,"div")(25,"div"),e._uU(26,"Sub Project"),e.qZA(),e.TgZ(27,"div")(28,"button",10),e.NdJ("click",function(){return _.extractSubProject()}),e._uU(29,"Extract Sub Project"),e.qZA()()(),e._UZ(30,"cp-selected-activity",11),e.ALo(31,"async"),e.qZA()),2&f&&(e.xp6(10),e.Q6J("value",_.projectName),e.xp6(8),e.Q6J("ngClass",e.VKq(7,d,!_.isLasso)),e.xp6(3),e.Q6J("ngClass",e.VKq(9,d,_.isLasso)),e.xp6(7),e.Q6J("ngClass",e.VKq(11,v,!_.isSubProjSelected)),e.xp6(2),e.Q6J("projectPool",e.lcZ(31,5,_.networkArray$)))},dependencies:[r.mk,A.Z,r.Ov],styles:[".meta-bar[_ngcontent-%COMP%]{padding-left:27px;padding-right:16px}.meta-bar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#bbb}.meta-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff}.meta-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.meta-bar[_ngcontent-%COMP%]   ccp-selected-activity[_ngcontent-%COMP%]{border-bottom:1px solid #fff;display:block}.meta-bar[_ngcontent-%COMP%]   cp-selected-activity[_ngcontent-%COMP%], .meta-bar[_ngcontent-%COMP%]   cp-risk-decompress[_ngcontent-%COMP%]{padding-top:20px;display:block}.meta-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%]{display:flex}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:4px}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px}.meta-bar[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{color:#000}.meta-bar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active.btn-secondary:focus, .meta-bar[_ngcontent-%COMP%]   .btn-secondary.focus[_ngcontent-%COMP%]{color:#fff;background-color:#545b62;border-color:#4e555b}.meta-bar[_ngcontent-%COMP%]   .btn-secondary.active[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active.btn-secondary.active:focus, .meta-bar[_ngcontent-%COMP%]   .btn-secondary.focus[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}"]})}return p})()},3148:(x,T,a)=>{a.d(T,{c:()=>C});var t=a(9212),O=a(325);let C=(()=>{class m{constructor(n){this.colorFactory=n}addTagGroup(n,i,s){n.tags||(n.tags=[]),s=Array.from(new Set(s));const l=n.tags.length,g=this.colorFactory.getSchemeByIndex(0),c=g.colors[l%g.colors.length],r=this.colorFactory.getSchemeByIndex(l),A=s.map((v,u)=>{const p=r.colors[u%r.colors.length];return{name:v,color:p.color,backgroundcolor:p.backgroundcolor}});n.tags.push({color:c.color,backgroundcolor:c.backgroundcolor,name:i,tags:A})}addTagGroupToProject(n,i){n.tags=n.tags??[],n.tags=n.tags.filter(s=>s.name!==i.name),n.tags.push({name:i.name,tags:i.tags.map(s=>({name:s.name,color:s.color,backgroundcolor:s.backgroundcolor})),color:i.color,backgroundcolor:i.backgroundcolor})}removeTagFromActivities(n,i,s){n.activities.forEach(l=>{if(l.tags){const g=l.tags.find(c=>c.name===i);g&&(g.tags=g.tags.filter(c=>c.name!==s.name))}})}removeTagGroupFromProject(n,i){n.tags&&(n.tags=n.tags.filter(s=>s.name!==i.name),n.activities.forEach(s=>{s.tags=s.tags??[],s.tags=s.tags.filter(l=>l.name!==i.name)}),n.profile.view.selectedTagGroup===i.name&&(n.profile.view.selectedTagGroup=null),n.tags=n.tags?.filter(s=>s.name!==i.name))}addNewTagGroup(n,i){n.tags||(n.tags=[]);const s=n.tags.length,l=this.colorFactory.getSchemeByIndex(0),g=l.colors[s%l.colors.length];n.tags.push({color:g.color,backgroundcolor:g.backgroundcolor,name:i,tags:[]})}createNewTag(n,i,s){const l=n.tags?.findIndex(d=>d.name===i)??0,g=this.colorFactory.getSchemeByIndex(l),c=n.tags?.find(d=>d.name===i)?.tags?.length??0,r=g.colors[c%g.colors.length];return{name:s,color:r.color,backgroundcolor:r.backgroundcolor}}addTagToActivities(n,i,s,l){if(!n.tags?.find(c=>c.name===s)&&n.tags){this.addNewTagGroup(n,s);const c=this.createNewTag(n,s,i);n.tags.find(r=>r.name===s)?.tags?.push(c)}l.forEach(c=>{const r=c.tags?.find(p=>p.name===s);if(r?.tags?.find(p=>p.name===i))return;const d=n?.tags?.find(p=>p.name===s)?.tags.find(p=>p.name===i),v={name:i,color:d?.color??"black",backgroundcolor:d?.backgroundcolor??"white"};if(r)return void r.tags.push(v);const u={name:s,tags:[v]};c.tags=c.tags??[],c.tags.push(u)})}assignTagsToSelectedActivities(n,i,s){const l=n.profile.view?.lassoedLinks,g=s.tags.filter(c=>i.indexOf(c.name)>-1);l?.length>0&&n.activities.filter(r=>l.indexOf(r.profile.id)>-1).forEach(r=>{const A={name:s.name,tags:g.map(d=>({name:d.name,color:d.color,backgroundcolor:d.backgroundcolor}))};r.tags=r.tags??[],r.tags=r.tags.filter(d=>d.name!==s.name),r.tags.push(A)}),this.clearLasso(n)}unassignFromActivities(n,i){const s=i.profile.view?.lassoedLinks;s?.length>0&&i.activities.filter(g=>s.indexOf(g.profile.id)>-1).forEach(g=>{g.tags&&(g.tags=g.tags.filter(c=>c.name!=n))}),this.clearLasso(i)}clearLasso(n){n.profile.view.lassoStart=null,n.profile.view.lassoEnd=null,n.profile.view.lassoedLinks=[],n.profile.view.lassoedNodes=[],n.profile.view.isSubProjSelected=!1}loadTags(n,i){let s=[],l=[],g=null;n.tags&&(s=n.tags.map(c=>({name:c.name,backgroundcolor:c.backgroundcolor,color:c.color,isSelected:n.profile.view.selectedTagGroup===c.name})),l=n.tags.map(c=>({name:c.name,tags:c.tags?.map(r=>({name:r.name,color:r.color,backgroundcolor:r.backgroundcolor,isSelected:!1}))})),n.profile.view.selectedTagGroup&&(g=l.find(c=>c.name===n.profile.view.selectedTagGroup)??null)),i.tags=s,i.groups=l,i.activeGroup=g}static#t=this.\u0275fac=function(i){return new(i||m)(t.LFG(O.r))};static#e=this.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()}}]);