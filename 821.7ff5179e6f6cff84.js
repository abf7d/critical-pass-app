(self.webpackChunkcritical_web=self.webpackChunkcritical_web||[]).push([[821],{4821:(Ne,Rt,_)=>{"use strict";_.r(Rt),_.d(Rt,{ProfileModule:()=>Dn});var V=_(7586),Vt=_(5300),$t=_(5836),X=_(2181),z=_(3633),t=_(9212);let dt=(()=>{class r{unloadNotification(e){this.canDeactivate()||(e.returnValue=!0)}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275dir=t.lG2({type:r,hostBindings:function(i,n){1&i&&t.NdJ("beforeunload",function(a){return n.unloadNotification(a)},!1,t.Jf7)}})}return r})();var It=_(2433),J=_(6814),ut=_(6181),gt=_(2357),Et=_(7007),Ft=_(4819),Lt=_(5619);class jt{create(){return{svg:null,mainG:null,innerWidth:null,innerHeight:null,margin:{top:60,right:90,bottom:100,left:90},scales:null,focusLine:null}}}var T=_(3920),ct=_(1e3),ft=_(9064),F=_(4595),Kt=_(3503);let Gt=(()=>{class r{constructor(e,i,n,s){this.dashboard=e,this.eventService=i,this.ngZone=n,this.calc=s,this.subRegType=this.eventService.get(F.Bd).pipe((0,X.h)(a=>!!a)).subscribe(a=>{this.regType=a,this.project&&this.createChart(this.project)})}init(e,i,n,s){this.id=n,this.st=(new jt).create(),this.st.innerHeight=i-this.st.margin.top-this.st.margin.bottom,this.st.innerWidth=e-this.st.margin.left-this.st.margin.right,this.initSvg(e,i,s),this.data=this.dashboard.activeProject$,this.sub=this.data.pipe((0,X.h)(a=>!!a)).subscribe(a=>{this.ngZone.runOutsideAngular(()=>{this.project=a,this.createChart(a)})})}destroy(){this.sub&&this.sub.unsubscribe(),this.subRegType&&this.subRegType.unsubscribe()}setProjIsEmpty(e){this.projIsEmpty=e}initSvg(e,i,n){const s=this.st,a="shallow-s-"+this.id;T.Ys(n).select("svg").remove();const c=T.Ys(n).append("svg").attr("class",a);this.st.svg=c.style("width","100%").style("height",null).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${e} ${i}`),s.mainG=s.svg.append("g").attr("transform","translate("+this.st.margin.left+","+this.st.margin.top+")"),s.svg.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",this.st.innerWidth).attr("height",this.st.innerHeight)}createChart(e){const i=0===e.integrations.length;if(this.projIsEmpty.next(i),i)return;this.st.mainG.selectAll("*").remove();const n=this.getDataset(e),s=this.calc.calculateShallowSProps(n,e);s&&this.drawChart(s)}drawChart(e){const i=T.Xf().range([0,this.st.innerWidth]).domain(e.extents.x),n=T.BYU().range([this.st.innerHeight,0]).domain(e.extents.y);this.drawAxes(i,n),this.drawLines(e,i,n),this.drawPoints(e,i,n),this.initFocusLineAndText(e,i,n),this.wireUpOverlay(e,i,n)}getDataset(e){return e.activities.filter(i=>!i.chartInfo.isDummy).map(i=>({id:i.profile.id,actual:i.profile.finish_dt,planned:i.profile.planned_completion_date_dt,name:i.profile.name,duration:i.profile.duration,percentActualFinished:null,percentPlannedFinished:null,isMilestone:!!i.chartInfo.milestoneNodeId}))}mouseClick(){this.isDateSelected=!this.isDateSelected,this.isDateSelected||this.st.focusLine.select("circle.click-circle").style("fill",null),this.isDateSelected&&this.st.focusLine.select("circle.click-circle").style("fill","#999")}focusMouseOver(e){this.st.focusLine.style("display",null),T.Ys(e.currentTarget).style("fill","#ccc")}focusMouseOut(e){this.st.focusLine.style("display",null),this.isDateSelected||T.Ys(e.currentTarget).style("fill","white"),this.isDateSelected&&T.Ys(e.currentTarget).style("fill","#999")}wireUpOverlay(e,i,n){const s=this.st.focusLine;this.st.mainG.append("rect").attr("class","overlay").attr("width",this.st.innerWidth).attr("height",this.st.innerHeight).on("mouseover",()=>s.style("display",null)).on("mouseout",()=>this.isDateSelected?null:s.style("display","none")).on("mousemove",a=>this.mouseMove(a,e,i,n)).on("click",a=>this.mouseClick()),s.append("circle").attr("class","click-circle").style("fill",null).style("stroke","black").style("cursor","pointer").attr("r",6).on("mouseover",a=>this.focusMouseOver(a)).on("mouseout",a=>this.focusMouseOut(a))}initFocusLineAndText(e,i,n){const s=this.st.mainG.append("g").attr("class","focus").style("display","none");s.append("line").attr("class","y").attr("x1",i(e.extents.x[0])-6).attr("x2",i(e.extents.x[0])+6),s.append("line").attr("class","x0").attr("y1",2*this.st.innerHeight-6).attr("y2",this.st.innerHeight+6),s.append("text").attr("class","x0"),this.st.focusLine=s}drawAxes(e,i){const n=T.i$Z("%-m/%-d/%-Y"),s=T.LLu(e).tickFormat(n),a=T.y4O(i);this.st.mainG.append("g").attr("class","x axis").attr("transform","translate(0,"+this.st.innerHeight+")").call(s),this.st.mainG.append("g").attr("class","y axis axisLeft").call(a).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("% Completion")}drawPoints(e,i,n){const s=e.data.filter(c=>!!c.planned),a=e.data.filter(c=>!!c.actual);s.length>1&&this.st.mainG.append("g").attr("class","circles").selectAll("circle").data(s).enter().append("circle").attr("clip-path","url(#clip)").attr("cx",c=>i(c.planned)).attr("cy",c=>n(c.percentPlannedFinished)).attr("class","planned coord").attr("r",2),a.length>1&&this.st.mainG.append("g").attr("class","rects").selectAll("rect").data(a).enter().append("rect").attr("clip-path","url(#clip)").attr("x",c=>i(c.actual)-1).attr("y",c=>n(c.percentActualFinished)-1).attr("height",4).attr("width",4).attr("class","actual coord")}drawLinearRegressions(e,i,n){if(e.regression.actual){const c=[{actual:new Date(e.regression.actual[0].x),percentActualFinished:e.regression.actual[0].y,percentPlannedFinished:null},{actual:new Date(e.regression.actual[1].x),percentActualFinished:e.regression.actual[1].y,percentPlannedFinished:null}];this.st.mainG.append("path").datum(c).attr("clip-path","url(#clip)").attr("class","regression actual").attr("d",n.curve(T.c_6))}if(e.regression.planned){const c=[{planned:new Date(e.regression.planned[0].x),percentPlannedFinished:e.regression.planned[0].y,percentActualFinished:null},{planned:new Date(e.regression.planned[1].x),percentPlannedFinished:e.regression.planned[1].y,percentActualFinished:null}];this.st.mainG.append("path").datum(c).attr("clip-path","url(#clip)").attr("class","regression planned").attr("d",i.curve(T.c_6))}}drawOverrunLines(e,i,n){if(!e.overRunPoints||!e.regression.actual||!e.regression.planned)return;const G=[{actual:new Date(e.overRunPoints.x[0][0].x),percentActualFinished:e.overRunPoints.x[0][0].y,percentPlannedFinished:null},{actual:new Date(e.overRunPoints.x[0][1].x),percentActualFinished:e.overRunPoints.x[0][1].y,percentPlannedFinished:null}],q=[{planned:new Date(e.overRunPoints.x[1][0].x),percentPlannedFinished:e.overRunPoints.x[1][0].y,percentActualFinished:null},{planned:new Date(e.overRunPoints.x[1][1].x),percentPlannedFinished:e.overRunPoints.x[1][1].y,percentActualFinished:null}],B=[{actual:new Date(e.overRunPoints.y[0][0].x),percentActualFinished:e.overRunPoints.y[0][0].y,percentPlannedFinished:null},{actual:new Date(e.overRunPoints.y[0][1].x),percentActualFinished:e.overRunPoints.y[0][1].y,percentPlannedFinished:null}],Q=[{planned:new Date(e.overRunPoints.y[1][0].x),percentPlannedFinished:e.overRunPoints.y[1][0].y,percentActualFinished:null},{planned:new Date(e.overRunPoints.y[1][1].x),percentPlannedFinished:e.overRunPoints.y[1][1].y,percentActualFinished:null}];this.st.mainG.append("path").datum(q).attr("clip-path","url(#clip)").attr("class","planned regression").attr("d",i),this.st.mainG.append("path").datum(G).attr("clip-path","url(#clip)").attr("class","actual regression").attr("d",n),this.st.mainG.append("path").datum(Q).attr("clip-path","url(#clip)").attr("class","planned regression").attr("d",i),this.st.mainG.append("path").datum(B).attr("clip-path","url(#clip)").attr("class","actual regression").attr("d",n)}drawOverrunElements(e,i,n){if(!e.overRunPoints||!e.regression.actual||!e.regression.planned)return;const s=e.overRunPoints.x[0][0].x,a=e.overRunPoints.x[1][0].x,c=e.overRunPoints.x[0][1].y,l=Math.ceil(Math.abs((a-s)/864e5)),u=Math.min(a,s);this.st.mainG.append("rect").attr("clip-path","url(#clip)").attr("x",B=>i(u)-1).attr("y",B=>n(c)-1).attr("height",B=>n(0)).attr("width",B=>{i();const Q=i(s)-i(a);return Math.abs(Q)}).attr("class",()=>s>a?"overrun over square":"overrun under square");const g=e.overRunPoints.y[0][0].y,b=e.overRunPoints.y[1][0].y,O=Math.max(a,s),G=Math.min(e.regression.actual[0].x,e.regression.planned[0].x),q=b-g;this.st.mainG.append("rect").attr("clip-path","url(#clip)").attr("x",B=>i(G)).attr("y",B=>n(c)).attr("height",B=>n(100)-n(c)).attr("width",B=>{const Q=i(O)-i(G);return Math.abs(Q)}).attr("class",()=>s>a?"overrun over square":"overrun under square"),this.drawOverrunText(l,q)}drawOverrunText(e,i){this.st.mainG.append("text").attr("class","b-overrun").attr("y",30).attr("x",30).style("font-size","13px").style("stroke","white").style("paint-order","stroke").style("stroke-width",6).style("stroke-opacity",.7).text("Budget Overrun: "+i.toFixed(2)+" %"),this.st.mainG.insert("text","text.b-overrun").attr("class","s-overrun").attr("y",50).attr("x",30).style("font-size","13px").style("stroke","white").style("paint-order","stroke").style("stroke-width",6).style("stroke-opacity",.7).text("Schedule Overrun: "+e+" Days")}drawLines(e,i,n){const s=e.step?T.jsv:T.c_6,a=T.jvg().x(g=>i(g.planned)).y(g=>n(g.percentPlannedFinished)).curve(s),c=T.jvg().x(g=>i(g.actual)).y(g=>n(g.percentActualFinished)).curve(s),l=e.data.filter(g=>!!g.planned).sort((g,b)=>g.planned.getTime()-b.planned.getTime()),u=e.data.filter(g=>!!g.actual).sort((g,b)=>g.actual.getTime()-b.actual.getTime());l?.length>1&&this.st.mainG.append("path").datum(l).attr("clip-path","url(#clip)").attr("class","line planned").attr("d",a),u?.length>1&&this.st.mainG.append("path").datum(u).attr("clip-path","url(#clip)").attr("class","line actual").attr("d",c),(!this.regType||this.regType===F.Jn)&&this.drawLinearRegressions(e,a,c),this.regType==F.lV&&this.drawPolynomialRegressions(e,a,c),this.drawOverrunLines(e,a,c),this.drawOverrunElements(e,i,n)}mouseMove(e,i,n,s){if(this.isDateSelected)return;const a=i.data.filter(I=>!!I.planned).sort((I,Zt)=>I.planned.getTime()-Zt.planned.getTime()),c=T.YFb(I=>I.planned.getTime()).right;if(this.isDateSelected)return;const g=T.Ys(e.currentTarget),b=T.cx$(e,g.node())[0]+10,q=a[c(a,n.invert(b),1)-1],B=a.filter(I=>I.planned===q.planned),Q=n(q.planned),Qt=s(q.percentPlannedFinished);this.st.focusLine.select("circle.x0").attr("transform",`translate(${Q},${Qt})`),this.st.focusLine.select("circle.click-circle").attr("transform",`translate(${Q},${Qt})`);const St=this.st.focusLine.selectAll("text.planned-marker").data(B,I=>I.id);St.exit().remove(),St.enter().append("text").attr("transform",(I,Zt)=>{const he=this.st.innerHeight-30*(Zt+1);return`translate(${n(q.planned)},${he})`}).text(I=>(I=>(0,ct.Z)(I.planned,F.s)+" - "+I.name)(I)).attr("class","planned-marker");const vt=B.filter(I=>!!I.actual),Ot=this.st.focusLine.selectAll("line.actual-marker").data(vt,I=>I.id),Ue=this.st.focusLine.selectAll("text.actual-marker").data(vt,I=>I.id),qe=this.st.focusLine.selectAll("circle.actual-marker").data(vt,I=>I.id);Ue.exit().remove(),Ue.enter().append("text").attr("transform",(I,Zt)=>{const he=this.st.innerHeight-30*(Zt+1)-15;return`translate(${n(q.actual)},${he})`}).text(I=>(I=>(0,ct.Z)(I.planned,F.s)+" - "+I.name)(I)).attr("class","actual-marker"),Ot.exit().remove(),Ot.enter().append("line").attr("x1",I=>n(I.actual)).attr("x2",I=>n(I.actual)).attr("y1",this.st.innerHeight).attr("y2",I=>s(I.percentActualFinished)).attr("class","actual-marker"),qe.exit().remove(),qe.enter().append("circle").attr("transform",I=>`translate(${n(I.actual)},${s(I.percentActualFinished)})`).attr("r",6).attr("class","actual-marker"),this.st.focusLine.select(".x0").attr("x1",n(q.planned)).attr("x2",n(q.planned)).attr("y1",s(0)).attr("y2",s(q.percentPlannedFinished))}drawPolynomialRegressions(e,i,n){const a=e.data.filter(g=>!!g.actual),c=e.data.filter(g=>!!g.planned),l=ft.regressionPoly().x(g=>g.percentActualFinished).y(g=>g.actual).order(3).domain(void 0),u=ft.regressionPoly().x(g=>g.percentPlannedFinished).y(g=>g.planned).order(3).domain(void 0);if(a.length>2){const g=l(a),O=Array.from({length:21},(G,q)=>5*q).map(G=>({percentActualFinished:G,actual:g.predict(G)}));this.st.mainG.append("path").attr("class","line actual regression polynomial").attr("d",G=>n(O)).attr("clip-path","url(#clip)")}if(c.length>2){const g=u(c),O=Array.from({length:21},(G,q)=>5*q).map(G=>({percentPlannedFinished:G,planned:g.predict(G)}));this.st.mainG.append("path").attr("class","line planned regression polynomial").attr("d",G=>i(O)).attr("clip-path","url(#clip)")}}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(z.Ou),t.LFG(z.WO),t.LFG(t.R0b),t.LFG(Kt.o))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac})}return r})();const Jt=["chart"];let Wt=(()=>{class r{constructor(){this.isEmpty=new Lt.X(!0),this.ui=(0,t.f3M)(Gt)}ngOnInit(){this.ui.setProjIsEmpty(this.isEmpty),this.ui.init(this.width,this.height,this.id,this.chart.nativeElement)}ngOnDestroy(){this.ui.destroy()}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-shallow-s"]],viewQuery:function(i,n){if(1&i&&t.Gf(Jt,7),2&i){let s;t.iGM(s=t.CRH())&&(n.chart=s.first)}},inputs:{id:"id",width:"width",height:"height"},features:[t._Bn([Gt])],decls:7,vars:6,consts:[[1,"shallow-s-component-wrapper"],[1,"shallow-s-empty-message",3,"hidden"],[1,"shallow-s-container",3,"hidden"],["chart",""]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.ALo(2,"async"),t._uU(3," Shallow-S diagram: Add at least one activity with a Duration and Planned Completion Date "),t.qZA(),t._UZ(4,"div",2,3),t.ALo(6,"async"),t.qZA()),2&i&&(t.xp6(1),t.Q6J("hidden",!t.lcZ(2,2,n.isEmpty)),t.xp6(3),t.Q6J("hidden",t.lcZ(6,4,n.isEmpty)))},dependencies:[J.Ov],styles:["cp-shallow-s .shallow-s-container{width:auto;height:auto;position:relative}cp-shallow-s .shallow-s-empty{position:absolute;top:25%;left:50%;transform:translate(-50%,-50%);font-weight:700}cp-shallow-s .line{fill:none;stroke:#4682b4;stroke-width:2px}cp-shallow-s .planned{stroke:#4682b4}cp-shallow-s .actual{stroke:#cd5c5c}cp-shallow-s .regression{opacity:.6;stroke-dasharray:3 3}cp-shallow-s .overrun{opacity:.2}cp-shallow-s .over{fill:#cd5c5c}cp-shallow-s .planned.coord{stroke:#4682b4;fill:#4682b4}cp-shallow-s .actual.coord{stroke:#cd5c5c;fill:#cd5c5c}cp-shallow-s .overlay{fill:none;pointer-events:all}cp-shallow-s line.actual-marker{stroke:#cd5c5c;stroke-dasharray:3 3}cp-shallow-s line.x0{stroke:#4682b4;stroke-dasharray:3 3}cp-shallow-s text.actual-marker{stroke:#cd5c5c}cp-shallow-s text.planned-marker{stroke:#4682b4}cp-shallow-s circle.click-circle{fill:none}cp-shallow-s circle.actual-marker{fill:none;stroke:#cd5c5c}cp-shallow-s .shallow-s-component-wrapper{position:relative;top:0;left:0;background-color:#fff}cp-shallow-s .shallow-s-component-wrapper .shallow-s-empty-message{position:absolute;top:33%;left:50%;transform:translate(-50%,-50%);font-weight:700}cp-shallow-s .shallow-s-component-wrapper svg{background-color:#fff}\n"],encapsulation:2})}return r})();function Xt(r,o){if(1&r&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.project.profile.staffing.effeciencyFactor9to1," ")}}let te=(()=>{class r{constructor(e){this.dashboard=e}ngOnInit(){this.sub=this.dashboard.activeProject$.pipe((0,X.h)(e=>!!e)).subscribe(e=>{this.project=e})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(z.Ou))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-score-board"]],inputs:{id:"id"},decls:65,vars:7,consts:[[1,"d-flex","flex-column","scoreboard-container"],[1,"d-flex"],[1,"d-flex","flex-column","half"],[1,"title"],[1,"fas","fa-dollar-sign"],[1,"list"],[1,"value"],[1,"fas","fa-exclamation"],[1,"fas","fa-male"],[1,"fas","fa-calendar"],[1,"fas","fa-percent"],["class","value",4,"ngIf"],[1,"fas","fa-flag-checkered"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"i",4),t._uU(5,"Cost (MM)"),t.qZA(),t.TgZ(6,"div",5)(7,"div")(8,"div"),t._uU(9,"Total"),t.qZA(),t.TgZ(10,"div",6),t._uU(11,"--"),t.qZA()(),t.TgZ(12,"div")(13,"div"),t._uU(14,"Indirect"),t.qZA(),t.TgZ(15,"div",6),t._uU(16,"--"),t.qZA()(),t.TgZ(17,"div")(18,"div"),t._uU(19,"Direct"),t.qZA(),t.TgZ(20,"div",6),t._uU(21,"--"),t.qZA()()()(),t.TgZ(22,"div",2)(23,"div",3),t._UZ(24,"i",7),t._uU(25,"Risk"),t.qZA(),t.TgZ(26,"div",5)(27,"div")(28,"div"),t._uU(29,"Activity"),t.qZA(),t.TgZ(30,"div",6),t._uU(31),t.qZA()(),t.TgZ(32,"div")(33,"div"),t._uU(34,"Criticality"),t.qZA(),t.TgZ(35,"div",6),t._uU(36),t.qZA()(),t.TgZ(37,"div")(38,"div"),t._uU(39,"Fibonacci"),t.qZA(),t.TgZ(40,"div",6),t._uU(41),t.qZA()()()()(),t.TgZ(42,"div",1)(43,"div",3),t._UZ(44,"i",8),t._uU(45,"Averaage Staffing:"),t.qZA(),t.TgZ(46,"div",6),t._uU(47),t.qZA()(),t.TgZ(48,"div",1)(49,"div",3),t._UZ(50,"i",9),t._uU(51,"Duration Months:"),t.qZA(),t.TgZ(52,"div",6),t._uU(53),t.qZA()(),t.TgZ(54,"div",1)(55,"div",3),t._UZ(56,"i",10),t._uU(57,"Effeciency Factor (9/1):"),t.qZA(),t.YNc(58,Xt,2,1,"div",11),t.qZA(),t.TgZ(59,"div",1)(60,"div",3),t._UZ(61,"i",12),t._uU(62,"Earliest Finish Date"),t.qZA(),t.TgZ(63,"div",6),t._uU(64),t.qZA()()()),2&i&&(t.xp6(31),t.Oqu(n.project.profile.risk.activityRisk?n.project.profile.risk.activityRisk:"--"),t.xp6(5),t.Oqu(n.project.profile.risk.criticalityRisk?n.project.profile.risk.criticalityRisk:"--"),t.xp6(5),t.Oqu(n.project.profile.risk.fibonacciRisk?n.project.profile.risk.fibonacciRisk:"--"),t.xp6(6),t.Oqu(n.project.profile.staffing.averageStaffing),t.xp6(6),t.Oqu(n.project.profile.staffing.durationInMonths),t.xp6(5),t.Q6J("ngIf",null!=n.project&&-1!==n.project.profile.staffing.effeciencyFactor9to1),t.xp6(6),t.Oqu(n.project.profile.staffing.earliestFinishDate?n.project.profile.staffing.earliestFinishDate:"--"))},dependencies:[J.O5],styles:[".scoreboard-container[_ngcontent-%COMP%]{background-color:#fff;height:100%;width:390px}*[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.half[_ngcontent-%COMP%]{width:50%;padding-bottom:5px}.title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.scoreboard-container[_ngcontent-%COMP%]{padding:26px 39px 26px 40px}.list[_ngcontent-%COMP%]{padding-left:30px;font-weight:400}.list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex}.fas[_ngcontent-%COMP%]{font-size:.95rem;color:#333;padding:5px;width:2rem;text-align:center}.value[_ngcontent-%COMP%]{padding-left:5px}"]})}return r})(),Ut=(()=>{class r{constructor(e,i){this.dashboard=e,this.ngZone=i,this.textOffset=24}init(e,i,n,s){this.id=n,this.radius=.29*e,this.innerRadius=.14*i,this.width=e,this.height=i,this.initSvg(e,i,s),this.data=this.dashboard.activeProject$,this.sub=this.data.pipe((0,X.h)(a=>!!a)).subscribe(a=>{this.ngZone.runOutsideAngular(()=>{this.createChart(a)})})}destroy(){this.sub&&this.sub.unsubscribe()}initSvg(e,i,n){const s="risk-donut-"+this.id;T.Ys(n).select("svg").remove();const a=T.Ys(n).append("svg").attr("class",s);a.style("width","100%").style("height",null).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${e} ${i}`),this.svg=a.append("g"),this.arcG=this.svg.append("g").attr("class","arc").attr("transform","translate("+e/2+","+i/2+")"),this.labelG=this.svg.append("g").attr("class","label_group").attr("transform","translate("+e/2+","+i/2+")"),this.svg.append("g").attr("class","center_group").attr("transform","translate("+e/2+","+i/2+")")}percentRisk(e,i,n){return 100*n.activities.filter(s=>s.chartInfo.risk===e&&s.chartInfo.tf!==1/0&&null!==s.chartInfo.tf&&!s.chartInfo.isDummy).length/i}percentUnprocessed(e,i,n){return 100*n.activities.filter(s=>(s.chartInfo.tf===1/0||null===s.chartInfo.tf)&&!s.chartInfo.isDummy).length/i}calcPieData(e){const i=e.activities.filter(n=>!n.chartInfo.isDummy).length;return[{name:"Low",percent:this.percentRisk(F.uF.LOW,i,e),color:F.u_.LOW},{name:"Medium",percent:this.percentRisk(F.uF.MEDIUM,i,e),color:F.u_.MEDIUM},{name:"High",percent:this.percentRisk(F.uF.HIGH,i,e),color:F.u_.HIGH},{name:"Critical",percent:this.percentRisk(F.uF.CRITICAL,i,e),color:F.u_.CRITICAL},{name:"Unprocessed",percent:this.percentUnprocessed(F.uF.CRITICAL,i,e),color:F.u_.UNPROCESSED}]}createChart(e){const i=0===e.integrations.length,n=this.calcPieData(e),s=T.ve8().value(O=>O.percent).sort(null);this.arc=T.Nb1().innerRadius(this.radius).outerRadius(this.innerRadius);let a=this.arcG.selectAll("path");const c=a.data(),l=s(n),u=l.filter(O=>O.data.percent>0);a=a.data(l,this.key),a.exit().datum((O,G)=>this.findNeighborArc(G,l,c,this.key)||O).transition().duration(750).attrTween("d",b).remove(),a.transition().duration(750).attrTween("d",b);const g=this;function b(O){const G=T.sXR(this._current,O);return this._current=G(1),function(q){return g.arc(G(q))}}a.enter().append("path").each(function(O,G){this._current=g.findNeighborArc(G,c,l,this.key)||O}).attr("fill",O=>O.data.color).transition().duration(750).attrTween("d",b),this.drawTickMarks(u),this.drawCenterText(e,i),this.drawPercentageText(u),this.drawRiskLabel(u)}drawTickMarks(e){const i=this.labelG.selectAll("line").data(e,this.key);i.exit().remove(),i.enter().append("line").attr("x2",0).attr("y1",-this.radius-3).attr("y2",-this.radius-15).attr("stroke","gray").attr("transform",n=>"rotate("+(n.startAngle+n.endAngle)/2*(180/Math.PI)+")"),i.attr("x1",0).transition().duration(750).attr("x2",0).attr("y1",-this.radius-3).attr("y2",-this.radius-15).attr("stroke","gray").attr("transform",n=>"rotate("+(n.startAngle+n.endAngle)/2*(180/Math.PI)+")")}drawCenterText(e,i){if(this.labelG.select("g.center").remove("*"),i){const n="No data exists for Risk Donut";return this.svg.attr("transform",null),void this.svg.append("g").attr("class","missing-data").append("text").attr("y",this.height/3).attr("x",this.width/2+80).style("text-anchor","end").text(n)}{const n=this.labelG.append("g").attr("class","center");this.svg.selectAll("g.missing-data").remove(),e.profile.risk.criticalityRisk&&(n.append("text").attr("class","center").text("Criticality").attr("x",-30).attr("y",-12).attr("class","crit-label"),n.append("text").attr("class","center").text(e.profile.risk.criticalityRisk.toFixed(2)).attr("x",-23).attr("y",8).attr("class","criticality"))}}drawPercentageText(e){const i=this.labelG.selectAll("text.value").data(e,this.key);i.exit().remove(),i.enter().append("text").attr("class","value").attr("transform",n=>`translate(${Math.cos((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)},${Math.sin((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)})`).attr("dy",n=>(n.startAngle+n.endAngle)/2>Math.PI/2&&(n.startAngle+n.endAngle)/2<1.5*Math.PI?5:-7).attr("text-anchor",n=>(n.startAngle+n.endAngle)/2<Math.PI?"beginning":"end").text(n=>n.data.percent.toFixed(1)+"%"),i.transition().duration(750).attr("transform",n=>`translate(${Math.cos((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)},${Math.sin((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)})`).attr("dy",n=>(n.startAngle+n.endAngle)/2>Math.PI/2&&(n.startAngle+n.endAngle)/2<1.5*Math.PI?5:-7).attr("text-anchor",n=>(n.startAngle+n.endAngle)/2<Math.PI?"beginning":"end").text(n=>n.data.percent.toFixed(1)+"%")}drawRiskLabel(e){const i=this.labelG.selectAll("text.units").data(e,this.key);i.exit().remove(),i.enter().append("text").attr("class","units").attr("transform",n=>"translate("+Math.cos((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)+","+Math.sin((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)+")").attr("dy",n=>(n.startAngle+n.endAngle)/2>Math.PI/2&&(n.startAngle+n.endAngle)/2<1.5*Math.PI?17:5).attr("text-anchor",n=>(n.startAngle+n.endAngle)/2<Math.PI?"beginning":"end").text(n=>n.data.name),i.transition().duration(750).attr("transform",n=>"translate("+Math.cos((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)+","+Math.sin((n.startAngle+n.endAngle-Math.PI)/2)*(this.radius+this.textOffset)+")").attr("dy",n=>(n.startAngle+n.endAngle)/2>Math.PI/2&&(n.startAngle+n.endAngle)/2<1.5*Math.PI?17:5).attr("text-anchor",n=>(n.startAngle+n.endAngle)/2<Math.PI?"beginning":"end").text(n=>n.data.name)}key(e){return e.data.name}findNeighborArc(e,i,n,s){const a=this.findPreceding(e,i,n,s);if(a)return{startAngle:a.endAngle,endAngle:a.endAngle};const c=this.findFollowing(e,i,n,s);return c?{startAngle:c.startAngle,endAngle:c.startAngle}:null}findPreceding(e,i,n,s){const a=i.length;for(;--e>=0;){const c=this.key(n[e]);for(let l=0;l<a;++l)if(this.key(i[l])===c)return i[l]}}findFollowing(e,i,n,s){const a=n.length,c=i.length;for(;++e<a;){const l=this.key(n[e]);for(let u=0;u<c;++u)if(this.key(i[u])===l)return i[u]}}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(z.Ou),t.LFG(t.R0b))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac})}return r})();const p=["chart"];let v=(()=>{class r{constructor(){this.ui=(0,t.f3M)(Ut)}ngOnInit(){this.ui.init(this.width,this.height,this.id,this.chart.nativeElement)}ngOnDestroy(){this.ui.destroy()}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-risk-donut"]],viewQuery:function(i,n){if(1&i&&t.Gf(p,7),2&i){let s;t.iGM(s=t.CRH())&&(n.chart=s.first)}},inputs:{id:"id",width:"width",height:"height"},features:[t._Bn([Ut])],decls:2,vars:0,consts:[[1,"risk-donut"],["chart",""]],template:function(i,n){1&i&&t._UZ(0,"div",0,1)},styles:["cp-risk-donut .value{font-size:18px;font-weight:700}cp-risk-donut .crit-label{font-size:16px}cp-risk-donut .criticality{font-size:20px;font-weight:700}cp-risk-donut svg{background-color:#fff}cp-risk-donut .missing-data{font-weight:700}\n"],encapsulation:2})}return r})();var y=_(2497);class f{create(){return{svg:null,mainG:null,innerWidth:null,innerHeight:null,margin:{top:60,right:90,bottom:100,left:90},scales:null,activityReg:null,fibReg:null,criticalReg:null,secondDerivativeZero:null,bisectFloat:null,freeze:!1,frozenPoint:null}}}var h=_(4861);let d=(()=>{class r{constructor(e){this.calc=e}getRiskOptions(e){let i=0;const n=[];for(;i<F.qD;){const a=this.calc.getRiskStats(i*F.Ct-e.profile.risk.decompressAmount,e);isNaN(a.activity)||n.push(a),i++}return n}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(h.b))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),m=(()=>{class r{constructor(e,i,n,s){this.dashboard=e,this.eventService=i,this.ngZone=n,this.decompressor=s,this.decompressAmount$=this.eventService.get(F.GL),this.decompAmtSub=this.decompressAmount$.pipe((0,X.h)(a=>!!a)).subscribe(a=>{this.decompressProject(a)}),this.triggerSecondDerivative$=this.eventService.get(F.Ji),this.secDerivTriggerSub=this.triggerSecondDerivative$.pipe((0,X.h)(a=>!!a)).subscribe(a=>{this.setSecondDerivative()}),this.riskLocator=T.YFb(a=>a),this.riskCurveType$=this.eventService.get(F.vY),this.curveTypeSub=this.riskCurveType$.pipe((0,X.h)(a=>!!a&&!!this.st)).subscribe(a=>{const c=this.decompressAmount$.getValue();c&&this.decompressProject(c)})}init(e,i,n,s){this.id=n,this.st=(new f).create(),this.st.innerHeight=i-this.st.margin.top-this.st.margin.bottom,this.st.innerWidth=e-this.st.margin.left-this.st.margin.right,this.initSvg(e,i,s),this.data=this.dashboard.activeProject$,this.sub=this.data.pipe((0,X.h)(a=>!!a)).subscribe(a=>{this.ngZone.runOutsideAngular(()=>{this.project=a,this.createChart(a)})})}destroy(){this.sub&&this.sub.unsubscribe(),this.decompAmtSub&&this.decompAmtSub.unsubscribe(),this.curveTypeSub&&this.curveTypeSub.unsubscribe(),this.secDerivTriggerSub&&this.secDerivTriggerSub.unsubscribe()}setProjIsEmpty(e){this.projIsEmpty=e}initSvg(e,i,n){const s="risk-curve-"+this.id;T.Ys(n).select("svg").remove();const a=T.Ys(n).append("svg").attr("class",s);this.st.svg=a.style("width","100%").style("height",null).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${e} ${i}`).append("g"),this.st.mainG=this.st.svg.append("g").attr("transform",`translate(${this.st.margin.left},${this.st.margin.top})`),this.xScale=T.BYU().range([0,this.st.innerWidth]),this.yScale=T.BYU().range([this.st.innerHeight,0]),this.riskLineGen=T.jvg().x(c=>this.xScale(c.extraFloat)).y(c=>this.yScale(c.risk))}createChart(e){const i=0===e.integrations.length;if(this.projIsEmpty.next(i),i)return;const n=this.decompressor.getRiskOptions(e);this.riskOptions=n,this.drawChart(n)}drawChart(e){this.colorScale=T.PKp(T.Cn1),this.colorScale.domain(["criticality","fibonacci","activity"]);const n=this.colorScale.domain().map(c=>{const l=e.map(u=>({extraFloat:u.extraFloat,risk:+u[c]}));return{name:c,values:l}});this.riskTypes=n,this.buildPolynomialRegression(e),this.xScale.domain(T.Wem(e,c=>c.extraFloat)),this.yScale.domain([0,1]),this.initChartClip();const s=this.st.mainG.append("g").attr("class","top-chart");this.renderChart(n,s);const a=this.addMouseOverInfoElements();this.initMouseOverAndBrushEvents(a,e,n),this.initFrozenPoint(e)}buildPolynomialRegression(e){const n=ft.regressionPoly().x(c=>c.extraFloat).y(c=>c.activity).order(3).domain(void 0),s=ft.regressionPoly().x(c=>c.extraFloat).y(c=>c.fibonacci).order(3).domain(void 0),a=ft.regressionPoly().x(c=>c.extraFloat).y(c=>c.criticality).order(3).domain(void 0);this.st.activityReg=n(e),this.st.fibReg=s(e),this.st.criticalReg=a(e)}initMouseOverAndBrushEvents(e,i,n){const s=this.st.innerWidth,a=this.st.innerHeight;this.st.mainG.append("rect").attr("width",s+this.st.margin.left+this.st.margin.right).attr("height",a+this.st.margin.top+this.st.margin.bottom).style("fill","none").style("pointer-events","all").on("mouseover",()=>{e.style("display",null)}).on("mouseout",()=>{this.st.freeze||e.style("display","none")}).on("mousemove",c=>{const l=T.Ys(c.currentTarget),u=T.cx$(c,l.node())[0];this.mousemove(i,u,n)}).on("mousedown",()=>{if(this.mousedown(),this.st.freeze){const c=i.find(l=>l.extraFloat===this.st.frozenPoint);if(c){const l=this.getRiskValue(c);this.decompressAmount$.next(l)}}else this.project.profile.risk.decompressAmount=0,this.dashboard.updateProject(this.project,!0)})}mousedown(){this.st.freeze=!this.st.freeze;const e=this.st.mainG.select(".info");this.st.freeze?(e.select("circle.x").attr("style","fill: grey"),e.select("circle.y").attr("style","fill: grey"),e.select("circle.z").attr("style","fill: grey")):(e.select("circle.x").attr("style","fill: none"),e.select("circle.y").attr("style","fill: none"),e.select("circle.z").attr("style","fill: none"))}mousemove(e,i,n){if(this.st.freeze)return;const s=this.xScale.invert(i),a=this.st.bisectFloat(e,s,1),c=e[a-1];let l=e[a],u=null;void 0===l&&(l=c),u=s-c.extraFloat>l.extraFloat-s?l:c,this.st.frozenPoint=u.extraFloat,T.Fp7(n,function(g){return T.Fp7(g.values,function(b){return b.risk})}),this.updateMouseOverCircles(u)}initChartClip(){const e=this.st.innerWidth,i=this.st.innerHeight;this.st.mainG.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",e).attr("height",i)}renderChart(e,i){const n=i.selectAll(".risk").data(e).enter().append("g").attr("class","risk");return n.append("path").attr("class","line").attr("d",s=>this.riskLineGen(s.values)).style("stroke",s=>this.colorScale(s.name)).attr("clip-path","url(#clip)"),this.createAxes(i),n.append("text").datum(s=>({name:s.name,value:s.values[s.values.length-1]})).attr("transform",s=>"translate("+this.xScale(s.value.extraFloat)+","+this.yScale(s.value.risk)+")").attr("x",3).attr("dy",".35em").text(s=>s.name),e.forEach(s=>{n.append("g").attr("class","circles").selectAll("circle").data(s.values).enter().append("circle").attr("clip-path","url(#clip)").attr("cx",a=>this.xScale(a.extraFloat)).attr("cy",a=>this.yScale(a.risk)).style("stroke",a=>this.colorScale(s.name)).attr("r",1)}),this.renderRegressions(i),this.st.secondDerivativeZero=this.secondDerivativeZero(),this.drawSecondDerivativeLine(i),this.st.bisectFloat=T.YFb(function(s){return s.extraFloat}).left,n}renderRegressions(e){this.renderRegLine(e,this.st.criticalReg,"criticality"),this.renderRegLine(e,this.st.activityReg,"activity"),this.renderRegLine(e,this.st.fibReg,"fibonacci")}initFrozenPoint(e){if(!0===this.st.freeze&&null!==this.st.frozenPoint){const i=e.find(n=>n.extraFloat===this.st.frozenPoint);this.updateMouseOverCircles(i,!0),this.st.freeze=!1,this.mousedown()}}updateMouseOverCircles(e,i=!1){const n=this.st.mainG.select(".info");i&&n.style("display",null),n.select("circle.y").style("stroke",this.colorScale("criticality")).attr("transform","translate("+this.xScale(e.extraFloat)+","+this.yScale(e.criticality)+")"),n.select("circle.x").style("stroke",this.colorScale("activity")).attr("transform","translate("+this.xScale(e.extraFloat)+","+this.yScale(e.activity)+")"),n.select("circle.z").style("stroke",this.colorScale("fibonacci")).attr("transform","translate("+this.xScale(e.extraFloat)+","+this.yScale(e.fibonacci)+")"),n.select("text.y").style("stroke",this.colorScale("criticality")).text("Criticality: "+e.criticality).attr("transform","translate("+this.xScale(22)+","+this.yScale(1)+")"),n.select("text.x").style("stroke",this.colorScale("activity")).text("Activity: "+e.activity).attr("transform","translate("+this.xScale(10)+","+this.yScale(1)+")"),n.select("text.z").style("stroke",this.colorScale("fibonacci")).text("Fibonacci: "+e.fibonacci).attr("transform","translate("+this.xScale(36)+","+this.yScale(1)+")"),n.select("text.a").style("stroke","#555").text("Days Decompressed: "+e.extraFloat).attr("transform","translate("+this.xScale(50)+","+this.yScale(1)+")")}renderRegLine(e,i,n){const s=i.map(c=>({extraFloat:c[0],risk:c[1]}));e.append("g").attr("class","regression "+n).append("path").attr("class","line").attr("d",c=>this.riskLineGen(s)).style("stroke",c=>this.colorScale(n)).attr("clip-path","url(#clip)")}secondDerivativeZero(){const e=this.st.activityReg.coefficients;return 2*e[2]*-1/(3*e[3]*2)}drawSecondDerivativeLine(e){const i=this.st.secondDerivativeZero,n=this.st.activityReg.coefficients,s=n[0]+n[1]*i+n[2]*i*i+n[3]*Math.pow(i,3);if(i){const a=[{extraFloat:i,risk:s},{extraFloat:i,risk:0}];e.append("path").attr("class","regression sec-derivative").attr("d",c=>this.riskLineGen(a)).style("stroke","black").attr("clip-path","url(#clip)")}}addMouseOverInfoElements(){const e=this.st.mainG.append("g").attr("class","info").style("display","none");return e.append("circle").attr("class","y").style("fill","none").style("stroke","blue").attr("r",4),e.append("circle").attr("class","x").style("fill","none").style("stroke","blue").attr("r",4),e.append("circle").attr("class","z").style("fill","none").style("stroke","blue").attr("r",4),e.append("text").attr("class","y").style("fill","none").style("stroke","blue").attr("r",4),e.append("text").attr("class","z").style("fill","none").style("stroke","blue").attr("r",4),e.append("text").attr("class","x").style("fill","none").style("stroke","blue").attr("r",4),e.append("text").attr("class","a").style("fill","none").style("stroke","blue").attr("r",4),e}createAxes(e){const i=T.LLu(this.xScale),n=T.y4O(this.yScale),s=+this.st.innerHeight;e.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(i).append("text").attr("x",this.st.innerWidth).attr("y",-6).attr("dx",".71em").style("text-anchor","end").text("Days decompressed"),e.append("g").attr("class","y axis").call(n).append("text").attr("transform","rotate(-90)").attr("y",-42).attr("dy",".71em").style("text-anchor","end").text("Risk")}decompressProject(e){if(e&&this.riskTypes){const i=this.riskCurveType$.getValue(),n=this.riskTypes.find(s=>s.name===i)?.values.sort((s,a)=>s.risk-a.risk);if(n){const s=n.map(u=>u.risk),a=this.riskLocator.left(s,+e);let c=null;c=a===s.length?s[s.length-1]:0===a?s[a]:e-s[a-1]<s[a]-e?s[a-1]:s[a];const l=n.find(u=>u.risk===c);if(l){const u=this.riskOptions.find(g=>g.extraFloat===l.extraFloat);this.project.profile.risk.decompressAmount=l.extraFloat,this.updateMouseOverCircles(u,!0),this.st.freeze=!1,this.mousedown(),this.st.frozenPoint=l.extraFloat,this.dashboard.updateProject(this.project,!0)}}}}getRiskForDays(e,i){let n;switch(i){case F.Qe:n=this.st.activityReg.coefficients;break;case F.rG:n=this.st.criticalReg.coefficients;break;case F.QH:n=this.st.fibReg.coefficients;break;default:n=this.st.activityReg.coefficients}return n[0]+n[1]*e+n[2]*e*e+n[3]*Math.pow(e,3)}setSecondDerivative(){this.st.secondDerivativeZero=this.secondDerivativeZero();const e=this.riskCurveType$.getValue(),i=this.getRiskForDays(this.st.secondDerivativeZero,e);this.decompressAmount$.next(+i.toFixed(3))}getRiskValue(e){let n;switch(this.riskCurveType$.getValue()){case F.Qe:n=e.activity;break;case F.rG:n=e.criticality;break;case F.QH:n=e.fibonacci;break;default:n=e.activity}return n}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(z.Ou),t.LFG(z.WO),t.LFG(t.R0b),t.LFG(d))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const x=["chart"];let C=(()=>{class r{constructor(){this.isEmpty=new Lt.X(!0),this.ui=(0,t.f3M)(m)}ngOnInit(){this.ui.setProjIsEmpty(this.isEmpty),this.ui.init(this.width,this.height,this.id,this.chart.nativeElement)}ngOnDestroy(){this.ui.destroy()}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-risk-curve"]],viewQuery:function(i,n){if(1&i&&t.Gf(x,7),2&i){let s;t.iGM(s=t.CRH())&&(n.chart=s.first)}},inputs:{id:"id",width:"width",height:"height"},features:[t._Bn([m])],decls:7,vars:6,consts:[[1,"risk-curve-component-wrapper"],[1,"risk-curve-empty-message",3,"hidden"],[1,"risk-curve-container",3,"hidden"],["chart",""]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.ALo(2,"async"),t._uU(3," Risk curve diagram: Add at least one activity with a Duration and Planned Completion Date "),t.qZA(),t._UZ(4,"div",2,3),t.ALo(6,"async"),t.qZA()),2&i&&(t.xp6(1),t.Q6J("hidden",!t.lcZ(2,2,n.isEmpty)),t.xp6(3),t.Q6J("hidden",t.lcZ(6,4,n.isEmpty)))},dependencies:[J.Ov],styles:["cp-risk-curve .shallow-s-container{width:auto;height:auto;position:relative}cp-risk-curve .shallow-s-empty{position:absolute;top:25%;left:50%;transform:translate(-50%,-50%);font-weight:700}cp-risk-curve svg{background-color:#fff}cp-risk-curve .line{fill:none;stroke:#4682b4;stroke-width:2px}cp-risk-curve .planned{stroke:#4682b4}cp-risk-curve .actual{stroke:#cd5c5c}cp-risk-curve .regression{opacity:.6;stroke-dasharray:3 3}cp-risk-curve .overrun{opacity:.2}cp-risk-curve .over{fill:#cd5c5c}cp-risk-curve .planned.coord{stroke:#4682b4;fill:#4682b4}cp-risk-curve .actual.coord{stroke:#cd5c5c;fill:#cd5c5c}cp-risk-curve .overlay{fill:none;pointer-events:all}cp-risk-curve line.actual-marker{stroke:#cd5c5c;stroke-dasharray:3 3}cp-risk-curve line.x0{stroke:#4682b4;stroke-dasharray:3 3}cp-risk-curve text.actual-marker{stroke:#cd5c5c}cp-risk-curve text.planned-marker{stroke:#4682b4}cp-risk-curve circle.click-circle{fill:none}cp-risk-curve circle.actual-marker{fill:none;stroke:#cd5c5c}cp-risk-curve .risk-curve-component-wrapper{position:relative;top:0;left:0;background-color:#fff}cp-risk-curve .risk-curve-component-wrapper .risk-curve-empty-message{position:absolute;top:33%;left:50%;transform:translate(-50%,-50%);font-weight:700}cp-risk-curve .risk-curve-component-wrapper svg{background-color:#fff}\n"],encapsulation:2})}return r})();var M=_(581),R=_(2816),S=_(6702),A=_(2831),k=_(2495),L=_(5643),P=_(8645),w=_(7394),D=_(6321),Z=_(4825),N=_(927),U=_(5592),$=_(3019),H=_(9773),nt=_(7398),ot=_(8180),K=_(7921),st=_(9397),et=_(4664),it=_(9388);function Y(r,o,e){for(let i in o)if(o.hasOwnProperty(i)){const n=o[i];n?r.setProperty(i,n,e?.has(i)?"important":""):r.removeProperty(i)}return r}function W(r,o){const e=o?"":"none";Y(r.style,{"touch-action":o?"":"none","-webkit-user-drag":o?"":"none","-webkit-tap-highlight-color":o?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function rt(r,o,e){Y(r.style,{position:o?"":"fixed",top:o?"":"0",opacity:o?"":"0",left:o?"":"-999em"},e)}function yt(r,o){return o&&"none"!=o?r+" "+o:r}function wt(r){const o=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*o}function Dt(r,o){return r.getPropertyValue(o).split(",").map(i=>i.trim())}function xt(r){const o=r.getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,width:o.width,height:o.height,x:o.x,y:o.y}}function ht(r,o,e){const{top:i,bottom:n,left:s,right:a}=r;return e>=i&&e<=n&&o>=s&&o<=a}function lt(r,o,e){r.top+=o,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function kt(r,o,e,i){const{top:n,right:s,bottom:a,left:c,width:l,height:u}=r,g=l*o,b=u*o;return i>n-b&&i<a+b&&e>c-g&&e<s+g}class pe{constructor(o){this._document=o,this.positions=new Map}clear(){this.positions.clear()}cache(o){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),o.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:xt(e)})})}handleScroll(o){const e=(0,A.sA)(o),i=this.positions.get(e);if(!i)return null;const n=i.scrollPosition;let s,a;if(e===this._document){const u=this.getViewportScrollPosition();s=u.top,a=u.left}else s=e.scrollTop,a=e.scrollLeft;const c=n.top-s,l=n.left-a;return this.positions.forEach((u,g)=>{u.clientRect&&e!==g&&e.contains(g)&&lt(u.clientRect,c,l)}),n.top=s,n.left=a,{top:c,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function ue(r){const o=r.cloneNode(!0),e=o.querySelectorAll("[id]"),i=r.nodeName.toLowerCase();o.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return"canvas"===i?_e(r,o):("input"===i||"select"===i||"textarea"===i)&&fe(r,o),ge("canvas",r,o,_e),ge("input, textarea, select",r,o,fe),o}function ge(r,o,e,i){const n=o.querySelectorAll(r);if(n.length){const s=e.querySelectorAll(r);for(let a=0;a<n.length;a++)i(n[a],s[a])}}let Be=0;function fe(r,o){"file"!==o.type&&(o.value=r.value),"radio"===o.type&&o.name&&(o.name=`mat-clone-${o.name}-${Be++}`)}function _e(r,o){const e=o.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}const me=(0,A.i$)({passive:!0}),qt=(0,A.i$)({passive:!1}),ie=new Set(["position"]);class He{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(o){o!==this._disabled&&(this._disabled=o,this._toggleNativeDragInteractions(),this._handles.forEach(e=>W(e,o)))}constructor(o,e,i,n,s,a){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new P.x,this._pointerMoveSubscription=w.w0.EMPTY,this._pointerUpSubscription=w.w0.EMPTY,this._scrollSubscription=w.w0.EMPTY,this._resizeSubscription=w.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new P.x,this.started=new P.x,this.released=new P.x,this.ended=new P.x,this.entered=new P.x,this.exited=new P.x,this.dropped=new P.x,this.moved=this._moveEvents,this._pointerDown=c=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,c)}else this.disabled||this._initializeDragSequence(this._rootElement,c)},this._pointerMove=c=>{const l=this._getPointerPositionOnPage(c);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const G=Date.now()>=this._dragStartTime+this._getDragStartDelay(c),q=this._dropContainer;if(!G)return void this._endDragSequence(c);(!q||!q.isDragging()&&!q.isReceiving())&&(c.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(c)))}return}c.preventDefault();const u=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(u),this._dropContainer)this._updateActiveDropContainer(u,l);else{const g=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,b=this._activeTransform;b.x=u.x-g.x+this._passiveTransform.x,b.y=u.y-g.y+this._passiveTransform.y,this._applyRootElementTransform(b.x,b.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:u,event:c,distance:this._getDragDistance(u),delta:this._pointerDirectionDelta})})},this._pointerUp=c=>{this._endDragSequence(c)},this._nativeDragStart=c=>{if(this._handles.length){const l=this._getTargetHandle(c);l&&!this._disabledHandles.has(l)&&!this.disabled&&c.preventDefault()}else this.disabled||c.preventDefault()},this.withRootElement(o).withParent(e.parentDragRef||null),this._parentPositions=new pe(i),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(o){this._handles=o.map(i=>(0,k.fI)(i)),this._handles.forEach(i=>W(i,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(o){return this._previewTemplate=o,this}withPlaceholderTemplate(o){return this._placeholderTemplate=o,this}withRootElement(o){const e=(0,k.fI)(o);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,qt),e.addEventListener("touchstart",this._pointerDown,me),e.addEventListener("dragstart",this._nativeDragStart,qt)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(o){return this._boundaryElement=o?(0,k.fI)(o):null,this._resizeSubscription.unsubscribe(),o&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(o){return this._parentDragRef=o,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(o){!this._disabledHandles.has(o)&&this._handles.indexOf(o)>-1&&(this._disabledHandles.add(o),W(o,!0))}enableHandle(o){this._disabledHandles.has(o)&&(this._disabledHandles.delete(o),W(o,this.disabled))}withDirection(o){return this._direction=o,this}_withDropContainer(o){this._dropContainer=o}getFreeDragPosition(){const o=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:o.x,y:o.y}}setFreeDragPosition(o){return this._activeTransform={x:0,y:0},this._passiveTransform.x=o.x,this._passiveTransform.y=o.y,this._dropContainer||this._applyRootElementTransform(o.x,o.y),this}withPreviewContainer(o){return this._previewContainer=o,this}_sortFromLastPointerPosition(){const o=this._lastKnownPointerPosition;o&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(o),o)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(o){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:o}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(o),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(o);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:o})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(o){Mt(o)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const i=this._rootElement,n=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),c=this._getShadowRoot();n.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),rt(i,!1,ie),this._document.body.appendChild(n.replaceChild(s,i)),this._getPreviewInsertionPoint(n,c).appendChild(this._preview),this.started.next({source:this,event:o}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this,event:o}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(o,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),n=Mt(e),s=!n&&0!==e.button,a=this._rootElement,c=(0,A.sA)(e),l=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),u=n?(0,L.yG)(e):(0,L.X6)(e);if(c&&c.draggable&&"mousedown"===e.type&&e.preventDefault(),i||s||l||u)return;if(this._handles.length){const O=a.style;this._rootElementTapHighlight=O.webkitTapHighlightColor||"",O.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(O=>this._updateOnScroll(O)),this._boundaryElement&&(this._boundaryRect=xt(this._boundaryElement));const g=this._previewTemplate;this._pickupPositionInElement=g&&g.template&&!g.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,o,e);const b=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:b.x,y:b.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(o){rt(this._rootElement,!0,ie),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(o),s=this._getDragDistance(n),a=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s,dropPoint:n,event:o}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:s,dropPoint:n,event:o}),e.drop(this,i,this._initialIndex,this._initialContainer,a,s,n,o),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:o,y:e},{x:i,y:n}){let s=this._initialContainer._getSiblingContainerFromPosition(this,o,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(o,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,o,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,o,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(o,e):this._applyPreviewTransform(o-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const o=this._previewTemplate,e=this.previewClass,i=o?o.template:null;let n;if(i&&o){const s=o.matchSize?this._initialClientRect:null,a=o.viewContainer.createEmbeddedView(i,o.context);a.detectChanges(),n=ye(a,this._document),this._previewRef=a,o.matchSize?xe(n,s):n.style.transform=Nt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=ue(this._rootElement),xe(n,this._initialClientRect),this._initialTransform&&(n.style.transform=this._initialTransform);return Y(n.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},ie),W(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>n.classList.add(s)):n.classList.add(e)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const o=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(o.left,o.top);const e=function ee(r){const o=getComputedStyle(r),e=Dt(o,"transition-property"),i=e.find(c=>"transform"===c||"all"===c);if(!i)return 0;const n=e.indexOf(i),s=Dt(o,"transition-duration"),a=Dt(o,"transition-delay");return wt(s[n])+wt(a[n])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const n=a=>{(!a||(0,A.sA)(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",n),i(),clearTimeout(s))},s=setTimeout(n,1.5*e);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const o=this._placeholderTemplate,e=o?o.template:null;let i;return e?(this._placeholderRef=o.viewContainer.createEmbeddedView(e,o.context),this._placeholderRef.detectChanges(),i=ye(this._placeholderRef,this._document)):i=ue(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(o,e,i){const n=e===this._rootElement?null:e,s=n?n.getBoundingClientRect():o,a=Mt(i)?i.targetTouches[0]:i,c=this._getViewportScrollPosition();return{x:s.left-o.left+(a.pageX-s.left-c.left),y:s.top-o.top+(a.pageY-s.top-c.top)}}_getPointerPositionOnPage(o){const e=this._getViewportScrollPosition(),i=Mt(o)?o.touches[0]||o.changedTouches[0]||{pageX:0,pageY:0}:o,n=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const c=this._ownerSVGElement.createSVGPoint();return c.x=n,c.y=s,c.matrixTransform(a.inverse())}}return{x:n,y:s}}_getConstrainedPointerPosition(o){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:n}=this.constrainPosition?this.constrainPosition(o,this,this._initialClientRect,this._pickupPositionInElement):o;if("x"===this.lockAxis||"x"===e?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===e)&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,c=this._boundaryRect,{width:l,height:u}=this._getPreviewRect(),g=c.top+a,b=c.bottom-(u-a);i=ve(i,c.left+s,c.right-(l-s)),n=ve(n,g,b)}return{x:i,y:n}}_updatePointerDirectionDelta(o){const{x:e,y:i}=o,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,a=Math.abs(e-s.x),c=Math.abs(i-s.y);return a>this._config.pointerDirectionChangeThreshold&&(n.x=e>s.x?1:-1,s.x=e),c>this._config.pointerDirectionChangeThreshold&&(n.y=i>s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const o=this._handles.length>0||!this.isDragging();o!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=o,W(this._rootElement,o))}_removeRootElementListeners(o){o.removeEventListener("mousedown",this._pointerDown,qt),o.removeEventListener("touchstart",this._pointerDown,me),o.removeEventListener("dragstart",this._nativeDragStart,qt)}_applyRootElementTransform(o,e){const i=Nt(o,e),n=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=n.transform&&"none"!=n.transform?n.transform:""),n.transform=yt(i,this._initialTransform)}_applyPreviewTransform(o,e){const i=this._previewTemplate?.template?void 0:this._initialTransform,n=Nt(o,e);this._preview.style.transform=yt(n,i)}_getDragDistance(o){const e=this._pickupPositionOnPage;return e?{x:o.x-e.x,y:o.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:o,y:e}=this._passiveTransform;if(0===o&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===i.width&&0===i.height)return;const s=n.left-i.left,a=i.right-n.right,c=n.top-i.top,l=i.bottom-n.bottom;n.width>i.width?(s>0&&(o+=s),a>0&&(o-=a)):o=0,n.height>i.height?(c>0&&(e+=c),l>0&&(e-=l)):e=0,(o!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:o})}_getDragStartDelay(o){const e=this.dragStartDelay;return"number"==typeof e?e:Mt(o)?e.touch:e?e.mouse:0}_updateOnScroll(o){const e=this._parentPositions.handleScroll(o);if(e){const i=(0,A.sA)(o);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&lt(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,A.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(o,e){const i=this._previewContainer||"global";if("parent"===i)return o;if("global"===i){const n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return(0,k.fI)(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(o){return this._handles.find(e=>o.target&&(o.target===e||e.contains(o.target)))}}function Nt(r,o){return`translate3d(${Math.round(r)}px, ${Math.round(o)}px, 0)`}function ve(r,o,e){return Math.max(o,Math.min(e,r))}function Mt(r){return"t"===r.type[0]}function ye(r,o){const e=r.rootNodes;if(1===e.length&&e[0].nodeType===o.ELEMENT_NODE)return e[0];const i=o.createElement("div");return e.forEach(n=>i.appendChild(n)),i}function xe(r,o){r.style.width=`${o.width}px`,r.style.height=`${o.height}px`,r.style.transform=Nt(o.left,o.top)}function be(r,o,e){const i=At(o,r.length-1),n=At(e,r.length-1);if(i===n)return;const s=r[i],a=n<i?-1:1;for(let c=i;c!==n;c+=a)r[c]=r[c+a];r[n]=s}function At(r,o){return Math.max(0,Math.min(o,r))}class Ye{constructor(o,e){this._element=o,this._dragDropRegistry=e,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(o){this.withItems(o)}sort(o,e,i,n){const s=this._itemPositions,a=this._getItemIndexFromPointerPosition(o,e,i,n);if(-1===a&&s.length>0)return null;const c="horizontal"===this.orientation,l=s.findIndex(Q=>Q.drag===o),u=s[a],b=u.clientRect,O=l>a?1:-1,G=this._getItemOffsetPx(s[l].clientRect,b,O),q=this._getSiblingOffsetPx(l,s,O),B=s.slice();return be(s,l,a),s.forEach((Q,Qt)=>{if(B[Qt]===Q)return;const St=Q.drag===o,vt=St?G:q,Ot=St?o.getPlaceholderElement():Q.drag.getRootElement();Q.offset+=vt,c?(Ot.style.transform=yt(`translate3d(${Math.round(Q.offset)}px, 0, 0)`,Q.initialTransform),lt(Q.clientRect,0,vt)):(Ot.style.transform=yt(`translate3d(0, ${Math.round(Q.offset)}px, 0)`,Q.initialTransform),lt(Q.clientRect,vt,0))}),this._previousSwap.overlaps=ht(b,e,i),this._previousSwap.drag=u.drag,this._previousSwap.delta=c?n.x:n.y,{previousIndex:l,currentIndex:a}}enter(o,e,i,n){const s=null==n||n<0?this._getItemIndexFromPointerPosition(o,e,i):n,a=this._activeDraggables,c=a.indexOf(o),l=o.getPlaceholderElement();let u=a[s];if(u===o&&(u=a[s+1]),!u&&(null==s||-1===s||s<a.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(u=a[0]),c>-1&&a.splice(c,1),u&&!this._dragDropRegistry.isDragging(u)){const g=u.getRootElement();g.parentElement.insertBefore(l,g),a.splice(s,0,o)}else(0,k.fI)(this._element).appendChild(l),a.push(o);l.style.transform="",this._cacheItemPositions()}withItems(o){this._activeDraggables=o.slice(),this._cacheItemPositions()}withSortPredicate(o){this._sortPredicate=o}reset(){this._activeDraggables.forEach(o=>{const e=o.getRootElement();if(e){const i=this._itemPositions.find(n=>n.drag===o)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(o){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===o)}updateOnScroll(o,e){this._itemPositions.forEach(({clientRect:i})=>{lt(i,o,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const o="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(e=>{const i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:xt(i)}}).sort((e,i)=>o?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(o,e,i){const n="horizontal"===this.orientation;let s=n?e.left-o.left:e.top-o.top;return-1===i&&(s+=n?e.width-o.width:e.height-o.height),s}_getSiblingOffsetPx(o,e,i){const n="horizontal"===this.orientation,s=e[o].clientRect,a=e[o+-1*i];let c=s[n?"width":"height"]*i;if(a){const l=n?"left":"top",u=n?"right":"bottom";-1===i?c-=a.clientRect[l]-s[u]:c+=s[l]-a.clientRect[u]}return c}_shouldEnterAsFirstChild(o,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,n="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const a=i[i.length-1].clientRect;return n?o>=a.right:e>=a.bottom}{const a=i[0].clientRect;return n?o<=a.left:e<=a.top}}_getItemIndexFromPointerPosition(o,e,i,n){const s="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:c,clientRect:l})=>c!==o&&((!n||c!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?n.x:n.y)!==this._previousSwap.delta)&&(s?e>=Math.floor(l.left)&&e<Math.floor(l.right):i>=Math.floor(l.top)&&i<Math.floor(l.bottom))));return-1!==a&&this._sortPredicate(a,o)?a:-1}}class Qe{constructor(o,e,i,n,s){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new P.x,this.entered=new P.x,this.exited=new P.x,this.dropped=new P.x,this.sorted=new P.x,this.receivingStarted=new P.x,this.receivingStopped=new P.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=w.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new P.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function E(r=0,o=D.z){return r<0&&(r=0),(0,Z.H)(r,r,o)}(0,N.Z).pipe((0,H.R)(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,c=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-c):2===this._verticalScrollDirection&&a.scrollBy(0,c),1===this._horizontalScrollDirection?a.scrollBy(-c,0):2===this._horizontalScrollDirection&&a.scrollBy(c,0)})},this.element=(0,k.fI)(o),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new pe(i),this._sortStrategy=new Ye(this.element,e),this._sortStrategy.withSortPredicate((a,c)=>this.sortPredicate(a,c,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(o,e,i,n){this._draggingStarted(),null==n&&this.sortingDisabled&&(n=this._draggables.indexOf(o)),this._sortStrategy.enter(o,e,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:o,container:this,currentIndex:this.getItemIndex(o)})}exit(o){this._reset(),this.exited.next({item:o,container:this})}drop(o,e,i,n,s,a,c,l={}){this._reset(),this.dropped.next({item:o,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:s,distance:a,dropPoint:c,event:l})}withItems(o){const e=this._draggables;return this._draggables=o,o.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>-1===o.indexOf(n))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(o){return this._sortStrategy.direction=o,this}connectedTo(o){return this._siblings=o.slice(),this}withOrientation(o){return this._sortStrategy.orientation=o,this}withScrollableParents(o){const e=(0,k.fI)(this.element);return this._scrollableElements=-1===o.indexOf(e)?[e,...o]:o.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(o){return this._isDragging?this._sortStrategy.getItemIndex(o):this._draggables.indexOf(o)}isReceiving(){return this._activeSiblings.size>0}_sortItem(o,e,i,n){if(this.sortingDisabled||!this._clientRect||!kt(this._clientRect,.05,e,i))return;const s=this._sortStrategy.sort(o,e,i,n);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:o})}_startScrollingIfNecessary(o,e){if(this.autoScrollDisabled)return;let i,n=0,s=0;if(this._parentPositions.positions.forEach((a,c)=>{c===this._document||!a.clientRect||i||kt(a.clientRect,.05,o,e)&&([n,s]=function Ve(r,o,e,i){const n=we(o,i),s=De(o,e);let a=0,c=0;if(n){const l=r.scrollTop;1===n?l>0&&(a=1):r.scrollHeight-l>r.clientHeight&&(a=2)}if(s){const l=r.scrollLeft;1===s?l>0&&(c=1):r.scrollWidth-l>r.clientWidth&&(c=2)}return[a,c]}(c,a.clientRect,o,e),(n||s)&&(i=c))}),!n&&!s){const{width:a,height:c}=this._viewportRuler.getViewportSize(),l={width:a,height:c,top:0,right:a,bottom:c,left:0};n=we(l,e),s=De(l,o),i=window}i&&(n!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const o=(0,k.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=o.msScrollSnapType||o.scrollSnapType||"",o.scrollSnapType=o.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const o=(0,k.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(o).clientRect}_reset(){this._isDragging=!1;const o=(0,k.fI)(this.element).style;o.scrollSnapType=o.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(o,e){return null!=this._clientRect&&ht(this._clientRect,o,e)}_getSiblingContainerFromPosition(o,e,i){return this._siblings.find(n=>n._canReceive(o,e,i))}_canReceive(o,e,i){if(!this._clientRect||!ht(this._clientRect,e,i)||!this.enterPredicate(o,this))return!1;const n=this._getShadowRoot().elementFromPoint(e,i);if(!n)return!1;const s=(0,k.fI)(this.element);return n===s||s.contains(n)}_startReceiving(o,e){const i=this._activeSiblings;!i.has(o)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(o),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:o,receiver:this,items:e}))}_stopReceiving(o){this._activeSiblings.delete(o),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:o,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(o=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(o);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const o=(0,A.kV)((0,k.fI)(this.element));this._cachedShadowRoot=o||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const o=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,o))}}function we(r,o){const{top:e,bottom:i,height:n}=r,s=.05*n;return o>=e-s&&o<=e+s?1:o>=i-s&&o<=i+s?2:0}function De(r,o){const{left:e,right:i,width:n}=r,s=.05*n;return o>=e-s&&o<=e+s?1:o>=i-s&&o<=i+s?2:0}const Bt=(0,A.i$)({passive:!1,capture:!0});let $e=(()=>{class r{constructor(e,i){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=n=>n.isDragging(),this.pointerMove=new P.x,this.pointerUp=new P.x,this.scroll=new P.x,this._preventDefaultWhileDragging=n=>{this._activeDragInstances.length>0&&n.preventDefault()},this._persistentTouchmoveListener=n=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&n.preventDefault(),this.pointerMove.next(n))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Bt)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Bt)}startDragging(e,i){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const n=i.type.startsWith("touch");this._globalListeners.set(n?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Bt}),n||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:Bt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(e){const i=this._activeDragInstances.indexOf(e);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const i=[this.scroll];return e&&e!==this._document&&i.push(new U.y(n=>this._ngZone.runOutsideAngular(()=>{const a=c=>{this._activeDragInstances.length&&n.next(c)};return e.addEventListener("scroll",a,!0),()=>{e.removeEventListener("scroll",a,!0)}}))),(0,$.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(t.R0b),t.LFG(J.K0))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const Ke={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let ne=(()=>{class r{constructor(e,i,n,s){this._document=e,this._ngZone=i,this._viewportRuler=n,this._dragDropRegistry=s}createDrag(e,i=Ke){return new He(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new Qe(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(J.K0),t.LFG(t.R0b),t.LFG(S.rL),t.LFG($e))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();const se=new t.OlP("CDK_DRAG_PARENT"),re=new t.OlP("CdkDragHandle");let ke=(()=>{class r{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}constructor(e,i){this.element=e,this._stateChanges=new P.x,this._disabled=!1,this._parentDrag=i}ngOnDestroy(){this._stateChanges.complete()}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(t.SBq),t.Y36(se,12))};static#e=this.\u0275dir=t.lG2({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled",t.VuI]},standalone:!0,features:[t._Bn([{provide:re,useExisting:r}]),t.Xq5]})}return r})();const Me=new t.OlP("CdkDragPlaceholder"),Ae=new t.OlP("CdkDragPreview"),Te=new t.OlP("CDK_DRAG_CONFIG"),Se=new t.OlP("CdkDropList");let Oe=(()=>{class r{static#t=this._dragInstances=[];get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}constructor(e,i,n,s,a,c,l,u,g,b,O){this.element=e,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=a,this._dir=l,this._changeDetectorRef=g,this._selfHandle=b,this._parentDrag=O,this._destroyed=new P.x,this.started=new t.vpe,this.released=new t.vpe,this.ended=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.dropped=new t.vpe,this.moved=new U.y(G=>{const q=this._dragRef.moved.pipe((0,nt.U)(B=>({source:this,pointerPosition:B.pointerPosition,event:B.event,delta:B.delta,distance:B.distance}))).subscribe(G);return()=>{q.unsubscribe()}}),this._dragRef=u.createDrag(e,{dragStartThreshold:c&&null!=c.dragStartThreshold?c.dragStartThreshold:5,pointerDirectionChangeThreshold:c&&null!=c.pointerDirectionChangeThreshold?c.pointerDirectionChangeThreshold:5,zIndex:c?.zIndex}),this._dragRef.data=this,r._dragInstances.push(this),c&&this._assignDefaults(c),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,ot.q)(1),(0,H.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(e){const i=e.rootElementSelector,n=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=r._dragInstances.indexOf(this);e>-1&&r._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const e=this.element.nativeElement;let i=e;this.rootElementSelector&&(i=void 0!==e.closest?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){const e=this.boundaryElement;return e?"string"==typeof e?this.element.nativeElement.closest(e):(0,k.fI)(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const i=this._dir,n=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof n&&n?n:(0,k.su)(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe((0,ot.q)(1)).subscribe(()=>{if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){e.withParent(r._dragInstances.find(n=>n.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){const{lockAxis:i,dragStartDelay:n,constrainPosition:s,previewClass:a,boundaryElement:c,draggingDisabled:l,rootElementSelector:u,previewContainer:g}=e;this.disabled=l??!1,this.dragStartDelay=n||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),a&&(this.previewClass=a),c&&(this.boundaryElement=c),u&&(this.rootElementSelector=u),g&&(this.previewContainer=g)}_setupHandlesListener(){this._handles.changes.pipe((0,K.O)(this._handles),(0,st.b)(e=>{const i=e.filter(n=>n._parentDrag===this).map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),(0,et.w)(e=>(0,$.T)(...e.map(i=>i._stateChanges.pipe((0,K.O)(i))))),(0,H.R)(this._destroyed)).subscribe(e=>{const i=this._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})}static#e=this.\u0275fac=function(i){return new(i||r)(t.Y36(t.SBq),t.Y36(Se,12),t.Y36(J.K0),t.Y36(t.R0b),t.Y36(t.s_b),t.Y36(Te,8),t.Y36(it.Is,8),t.Y36(ne),t.Y36(t.sBO),t.Y36(re,10),t.Y36(se,12))};static#i=this.\u0275dir=t.lG2({type:r,selectors:[["","cdkDrag",""]],contentQueries:function(i,n,s){if(1&i&&(t.Suo(s,Ae,5),t.Suo(s,Me,5),t.Suo(s,re,5)),2&i){let a;t.iGM(a=t.CRH())&&(n._previewTemplate=a.first),t.iGM(a=t.CRH())&&(n._placeholderTemplate=a.first),t.iGM(a=t.CRH())&&(n._handles=a)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){2&i&&t.ekj("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled",t.VuI],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[t._Bn([{provide:se,useExisting:r}]),t.Xq5,t.TTD]})}return r})();const oe=new t.OlP("CdkDropListGroup");let ii=0,Ze=(()=>{class r{static#t=this._dropLists=[];get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}constructor(e,i,n,s,a,c,l){this.element=e,this._changeDetectorRef=n,this._scrollDispatcher=s,this._dir=a,this._group=c,this._destroyed=new P.x,this.connectedTo=[],this.id="cdk-drop-list-"+ii++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new t.vpe,this.entered=new t.vpe,this.exited=new t.vpe,this.sorted=new t.vpe,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(u,g)=>this.enterPredicate(u.data,g.data),this._dropListRef.sortPredicate=(u,g,b)=>this.sortPredicate(u,g.data,b.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),c&&c._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=r._dropLists.indexOf(this);e>-1&&r._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,K.O)(this._dir.value),(0,H.R)(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{const i=(0,k.Eq)(this.connectedTo).map(n=>"string"==typeof n?r._dropLists.find(a=>a.id===n):n);if(this._group&&this._group._items.forEach(n=>{-1===i.indexOf(n)&&i.push(n)}),!this._scrollableParentsResolved){const n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=(0,k.su)(this.autoScrollStep,2),e.connectedTo(i.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),(0,$.T)(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){const{lockAxis:i,draggingDisabled:n,sortingDisabled:s,listAutoScrollDisabled:a,listOrientation:c}=e;this.disabled=n??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=a??!1,this.orientation=c||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static#e=this.\u0275fac=function(i){return new(i||r)(t.Y36(t.SBq),t.Y36(ne),t.Y36(t.sBO),t.Y36(S.mF),t.Y36(it.Is,8),t.Y36(oe,12),t.Y36(Te,8))};static#i=this.\u0275dir=t.lG2({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,n){2&i&&(t.uIk("id",n.id),t.ekj("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled",t.VuI],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled",t.VuI],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled",t.VuI],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[t._Bn([{provide:oe,useValue:void 0},{provide:Se,useExisting:r}]),t.Xq5]})}return r})(),ni=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({providers:[ne],imports:[S.ZD]})}return r})();var Re=_(4734),_t=_(9844),si=_(4961),Ie=_(2787);let ri=(()=>{class r{constructor(e,i,n,s){this.dashboard=e,this.eventService=i,this.milestoneFactory=n,this.depCrawler=s}set id(e){this._id=e}get id(){return this._id}init(){this.project$=this.dashboard.activeProject$,this.viewDummies$=this.eventService.get(F.ws)}startEditDeps(e,i){const n=e.profile.depends_on.split(",").map(s=>+s);this.editDepsClicked(e,i),i.activities.forEach(s=>{s.processInfo.inDependencyBucket=n.indexOf(s.profile.id)>-1})}submitEditDepsClicked(e,i){const n=i.activities.filter(s=>s.processInfo.inDependencyBucket).map(s=>s.profile.id).join();e.profile.depends_on=n,this.dashboard.updateProject(i,!1),this.editDepsClicked(e,i)}cancelEditDepsClicked(e,i){i.activities.filter(n=>n.processInfo.inDependencyBucket).forEach(n=>{n.processInfo.inDependencyBucket=!1}),this.editDepsClicked(e,i)}editDepsClicked(e,i){i.activities.filter(s=>s.profile.id!==e.profile.id).forEach(s=>{s.processInfo.inDependencyBucket=!1,s.processInfo.editingDependencies=!1,s.processInfo.showBucket=!s.processInfo.showBucket}),e.processInfo.editingDependencies=!e.processInfo.editingDependencies,e.processInfo.inDependencyBucket=!1,e.processInfo.showBucket=!1}drop(e,i){be(i.activities,e.previousIndex-7,e.currentIndex-7),i.activities.forEach((n,s)=>{n.profile.sortOrder=s})}updateDate(e,i,n,s){if(e){switch(n){case"finish":i.finish=(0,ct.Z)(e,_t.R7),i.finish_dt=e;break;case"start_date":i.start_date=(0,ct.Z)(e,_t.R7),i.start_date_dt=e;break;case"pcd":i.planned_completion_date=(0,ct.Z)(e,_t.R7),i.planned_completion_date_dt=e}this.dashboard.updateProject(s,!0)}}updatePCD(e,i,n){if(!(0,ct.Z)(e,_t.R7))return i.profile.start_date="",void(i.profile.start_date_dt=null);const a=n.activities.find(c=>c.profile.id===i.profile.id);if(a){if(a.profile.planned_completion_date=(0,ct.Z)(e,_t.R7),a.profile.planned_completion_date_dt=e,i.profile.duration){const c=(0,Re.Z)(a.profile.planned_completion_date_dt,+i.profile.duration-1);a.profile.start_date=(0,ct.Z)(e,_t.R7),a.profile.start_date_dt=new Date(c)}this.dashboard.updateProject(n,!0)}}updateDuration(e,i,n){if(e.profile.duration=i,""!==e.profile.planned_completion_date){const a=new Date(e.profile.planned_completion_date),c=(0,Re.Z)(a,+i-1);e.profile.start_date=(0,ct.Z)(c,_t.R7),e.profile.start_date_dt=new Date(c)}this.dashboard.updateProject(n,!0)}removeActivity(e,i){if(null!==e.chartInfo.milestoneNodeId)return this.milestoneFactory.removeMilestoneByActivity(e,i),void this.dashboard.updateProject(i,!0);const n=i.activities.find(g=>g.profile.id===e.profile.id);if(null==n)return;const{source:s,target:a}=n.chartInfo;if(!s||!a)return;const c=i.activities.indexOf(n);i.activities.splice(c,1);const l=i.activities.find(g=>g.chartInfo.source_id===s.id||g.chartInfo.target_id===s.id),u=i.activities.find(g=>g.chartInfo.source_id===a.id||g.chartInfo.target_id===a.id);if(null==l){const g=i.integrations.indexOf(s);i.integrations.splice(g,1)}if(null==u){const g=i.integrations.indexOf(a);i.integrations.splice(g,1)}this.dashboard.updateProject(i,!0)}updateProject(e,i){this.dashboard.updateProject(e,i)}sortBy(e,i){switch(this.isAscending=e!==this.lastSearch||!this.isAscending,e){case"id":i.activities.sort(this.isAscending?(s,a)=>s.profile.id-a.profile.id:(s,a)=>a.profile.id-s.profile.id);break;case"name":i.activities.sort((s,a)=>{const c=s.profile.name?s.profile.name.toUpperCase():"",l=a.profile.name?a.profile.name.toUpperCase():"";if(this.isAscending){if(c<l)return-1;if(c>l)return 1}else{if(c<l)return 1;if(c>l)return-1}return 0});break;case"start":i.activities.sort((s,a)=>{const c=s.profile.start_date_dt??"",l=a.profile.start_date_dt??"";if(this.isAscending){if(c<l)return-1;if(c>l)return 1}else{if(c<l)return 1;if(c>l)return-1}return 0});break;case"pcd":{i.activities.sort((l,u)=>{const g=l.profile.planned_completion_date_dt??"",b=u.profile.planned_completion_date_dt??"";if(this.isAscending){if(g<b)return-1;if(g>b)return 1}else{if(g<b)return 1;if(g>b)return-1}return 0});const s=i.activities.filter(l=>null!==l.profile.planned_completion_date),a=i.activities.filter(l=>null===l.profile.planned_completion_date),c=s.concat(a);i.activities=c,i.activities.forEach((l,u)=>{l.profile.id=u+1}),this.depCrawler.setDependencyDataFromGraph(i);break}}this.lastSearch=e,i.activities.forEach((s,a)=>{s.profile.sortOrder=a})}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(z.Ou),t.LFG(z.WO),t.LFG(si.y),t.LFG(Ie.v))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Tt=_(5616),ae=_(617),zt=_(2032),Ht=_(4170),tt=_(6223);const oi=r=>({color:r,"font-weight":"bold"});function ai(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"tr",12)(1,"td",13)(2,"div",14),t._UZ(3,"i",15),t.qZA()(),t.TgZ(4,"td")(5,"span"),t._uU(6),t.qZA(),t.TgZ(7,"span",16),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"td")(10,"input",17),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.profile.name=n)})("blur",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updatName())}),t.qZA(),t._UZ(11,"div",18)(12,"span",19),t.TgZ(13,"div",20)(14,"i",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.cancelEditDepsClicked(s))}),t.qZA(),t.TgZ(15,"i",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.submitEditDepsClicked(s))}),t.qZA()(),t.TgZ(16,"div",23)(17,"span")(18,"input",24),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.processInfo.inDependencyBucket=n)}),t.qZA()()()(),t.TgZ(19,"td")(20,"div",25)(21,"i",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.startEditDeps(s))}),t.qZA(),t._UZ(22,"div",27),t.TgZ(23,"input",28),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.profile.depends_on=n)}),t.qZA()()(),t.TgZ(24,"td")(25,"input",29,30),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.profile.duration=n)})("blur",function(){const s=t.CHM(e).$implicit,a=t.MAs(26),c=t.oxw(2);return t.KtG(c.updateDuration(s,a.value))}),t.qZA()(),t.TgZ(27,"td")(28,"mat-datepicker-toggle",31),t._UZ(29,"mat-icon",32),t.qZA(),t.TgZ(30,"input",33,34),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.profile.start_date_dt=n)})("ngModelChange",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.updateStartDate(s.profile.start_date_dt,s.profile))}),t.qZA(),t.TgZ(32,"mat-datepicker",35,36),t.NdJ("closed",function(){t.CHM(e);const n=t.MAs(31);return t.KtG(n.blur())}),t.qZA()(),t.TgZ(34,"td")(35,"mat-datepicker-toggle",31),t._UZ(36,"mat-icon",32),t.qZA(),t.TgZ(37,"input",37,38),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.profile.planned_completion_date_dt=n)})("ngModelChange",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.updatePCD(s.profile.planned_completion_date_dt,s))}),t.qZA(),t.TgZ(39,"mat-datepicker",35,39),t.NdJ("closed",function(){t.CHM(e);const n=t.MAs(38);return t.KtG(n.blur())}),t.qZA()(),t.TgZ(41,"td")(42,"mat-datepicker-toggle",31),t._UZ(43,"mat-icon",32),t.qZA(),t.TgZ(44,"input",37,40),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.profile.finish_dt=n)})("ngModelChange",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.updateFinishDate(s.profile.finish_dt,s.profile))}),t.qZA(),t.TgZ(46,"mat-datepicker",35,41),t.NdJ("closed",function(){t.CHM(e);const n=t.MAs(38);return t.KtG(n.blur())}),t.qZA()(),t.TgZ(48,"td")(49,"input",42),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.subProject.subGraphId=n)})("blur",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateProject())}),t.qZA()(),t.TgZ(50,"td")(51,"input",43),t.NdJ("ngModelChange",function(n){const a=t.CHM(e).$implicit;return t.KtG(a.profile.minEST=n)})("blur",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateProject())}),t.qZA()(),t.TgZ(52,"td")(53,"div",44)(54,"span",45),t._uU(55),t.qZA()()(),t.TgZ(56,"td")(57,"span",46),t._uU(58,"5"),t.qZA(),t.TgZ(59,"span",47),t._uU(60,"M"),t.qZA(),t.TgZ(61,"span",48),t._uU(62,"A"),t.qZA()(),t.TgZ(63,"td")(64,"div",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.removeActivity(s))}),t._uU(65,"x"),t.qZA()()()}if(2&r){const e=o.$implicit,i=t.MAs(33),n=t.MAs(40),s=t.MAs(47),a=t.oxw(2);t.Q6J("hidden",e.chartInfo.isDummy&&!a.showDummies&&null===e.chartInfo.milestoneNodeId),t.xp6(5),t.Udp("font-weight",e.assign.noGoto||e.assign.noDependencies||null!==e.chartInfo.milestoneNodeId?"bold":"")("color",e.assign.noDependencies?"blue":e.assign.noGoto?"red":""),t.xp6(1),t.Oqu(e.profile.id),t.xp6(1),t.Q6J("hidden",null===e.chartInfo.milestoneNodeId),t.xp6(3),t.Q6J("value",e.profile.name)("ngModel",e.profile.name),t.xp6(1),t.Q6J("hidden",e.processInfo.editingDependencies||e.processInfo.showBucket),t.xp6(1),t.Q6J("hidden",e.processInfo.editingDependencies||e.processInfo.showBucket),t.xp6(2),t.Q6J("hidden",!e.processInfo.editingDependencies||e.processInfo.showBucket),t.xp6(1),t.Q6J("hidden",!e.processInfo.editingDependencies||e.processInfo.showBucket),t.xp6(1),t.Q6J("hidden",!e.processInfo.showBucket),t.xp6(2),t.Q6J("ngModel",e.processInfo.inDependencyBucket),t.xp6(3),t.Q6J("hidden",e.processInfo.editingDependencies||e.processInfo.showBucket),t.xp6(1),t.Q6J("hidden",!(e.processInfo.editingDependencies||e.processInfo.showBucket)),t.xp6(1),t.Q6J("value",e.profile.depends_on)("ngModel",e.profile.depends_on),t.xp6(2),t.Q6J("value",e.profile.duration)("disabled",!(-1===e.subProject.subGraphId||0===e.subProject.subGraphId))("ngModel",e.profile.duration),t.xp6(3),t.Q6J("for",i),t.xp6(2),t.Q6J("matDatepicker",i)("ngModel",e.profile.start_date_dt)("matDatepickerFilter",a.dateFilter),t.xp6(5),t.Q6J("for",n),t.xp6(2),t.Q6J("matDatepicker",n)("ngModel",e.profile.planned_completion_date_dt)("matDatepickerFilter",a.dateFilter),t.xp6(5),t.Q6J("for",s),t.xp6(2),t.Q6J("matDatepicker",s)("ngModel",e.profile.finish_dt)("matDatepickerFilter",a.dateFilter),t.xp6(5),t.Q6J("value",e.subProject.subGraphId)("ngModel",e.subProject.subGraphId),t.xp6(2),t.Q6J("value",e.profile.minEST)("ngModel",e.profile.minEST),t.xp6(3),t.Q6J("ngStyle",t.VKq(43,oi,0==+e.chartInfo.risk?"#1c1":1===e.chartInfo.risk?"#ffd800":2===e.chartInfo.risk?"red":"#aaa")),t.xp6(1),t.Oqu(e.chartInfo.tf),t.xp6(2),t.Q6J("hidden",!e.errors.showDivisibleBy5Error),t.xp6(2),t.Q6J("hidden",!e.errors.showMondayStartError),t.xp6(2),t.Q6J("hidden",!e.errors.showAbnormalError)}}function ci(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t._uU(2," This project has no activities. Either click 'Add Activity' in the side bar or go to the Arrow diagram to draw some. "),t.qZA(),t.TgZ(3,"table",3)(4,"thead")(5,"tr"),t._UZ(6,"th"),t.TgZ(7,"th",4),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortBy("id"))}),t._uU(8,"Id"),t.qZA(),t.TgZ(9,"th",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortBy("name"))}),t._uU(10,"Activity"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Dependencies"),t.qZA(),t.TgZ(13,"th",6),t._uU(14,"Duration"),t.qZA(),t.TgZ(15,"th",4),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortBy("start"))}),t._uU(16,"Calculated Start Date"),t.qZA(),t.TgZ(17,"th",4),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortBy("pcd"))}),t._uU(18,"Planned Compl Date"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Finish Date"),t.qZA(),t.TgZ(21,"th",7),t._uU(22,"SubProj"),t.qZA(),t.TgZ(23,"th",8),t._uU(24,"Min EST"),t.qZA(),t.TgZ(25,"th",9),t._uU(26,"Float"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Error"),t.qZA()()(),t.TgZ(29,"tbody",10),t.NdJ("cdkDropListDropped",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.drop(n))}),t.YNc(30,ai,66,45,"tr",11),t.qZA()()()}if(2&r){const e=t.oxw();t.xp6(1),t.Q6J("hidden",0!==e.project.activities.length),t.xp6(2),t.Q6J("hidden",0===e.project.activities.length),t.xp6(27),t.Q6J("ngForOf",e.project.activities)}}let li=(()=>{class r{constructor(e,i){this.zone=e,this.events=i,this.showDummies=!1,this.subscription=null,this.viewDumSub=null}ngOnInit(){this.events.id=this.id,this.showDummies=!1,this.events.init(),this.subscription=this.events.project$.pipe((0,X.h)(e=>!!e)).subscribe(e=>{this.zone.run(()=>{this.project=e})}),this.viewDumSub=this.events.viewDummies$.pipe((0,X.h)(e=>null!=e)).subscribe(e=>{this.showDummies=e})}ngOnDestroy(){this.subscription?.unsubscribe(),this.viewDumSub?.unsubscribe()}startEditDeps(e){this.events.startEditDeps(e,this.project)}submitEditDepsClicked(e){this.events.submitEditDepsClicked(e,this.project)}cancelEditDepsClicked(e){this.events.cancelEditDepsClicked(e,this.project)}editDepsClicked(e){this.events.editDepsClicked(e,this.project)}drop(e){this.events.drop(e,this.project)}updateStartDate(e,i){this.events.updateDate(e,i,"start_date",this.project)}updateFinishDate(e,i){this.events.updateDate(e,i,"finish",this.project)}updatePCD(e,i){e&&this.events.updatePCD(e,i,this.project)}updateDuration(e,i){this.events.updateDuration(e,+i,this.project)}updateProject(){this.events.updateProject(this.project,!0)}removeActivity(e){this.events.removeActivity(e,this.project)}dateFilter(e){const i=function j(r){return(0,R.Z)(1,arguments),(0,M.Z)(r).getDay()}(e||new Date);return 0!==i&&6!==i}updatName(){this.events.updateProject(this.project,!1)}sortBy(e){this.events.sortBy(e,this.project)}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(t.R0b),t.Y36(ri))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-activity-grid"]],inputs:{id:"id"},decls:1,vars:1,consts:[["class","table-container",4,"ngIf"],[1,"table-container"],[1,"list-empty",3,"hidden"],[1,"table-fixed",3,"hidden"],[1,"pointer",3,"click"],[1,"pointer","activity-name",3,"click"],[1,"duration"],[1,"subproj"],[1,"min-est"],[1,"float"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",3,"hidden",4,"ngFor","ngForOf"],["cdkDrag","",3,"hidden"],[2,"padding-right","20px"],["cdkDragHandle","",1,"example-handle"],[1,"fa","fa-bars"],[3,"hidden"],["placeholder","",1,"name-txt",3,"value","ngModel","ngModelChange","blur"],[1,"dependency-button","click-to-edit",3,"hidden"],[1,"dependency-button","dep-edit",3,"hidden"],[1,"confirm-btns"],[1,"dependency-button","dep-edit","cancel-edit","fa","fa-times",3,"hidden","click"],[1,"dependency-button","dep-edit","ok-edit","fa","fa-check",3,"hidden","click"],[1,"dependency-button","full-button",3,"hidden"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"d-flex"],[1,"dependency-button","click-to-edit-dep","fas","fa-pencil-alt",3,"hidden","click"],[1,"dependency-button","click-to-edit-dep",3,"hidden"],["matInput","","placeholder","-",1,"depends-on-input",3,"value","ngModel","ngModelChange"],["matInput","","placeholder","-","type","number",3,"value","disabled","ngModel","ngModelChange","blur"],["duration",""],["matSuffix","",1,"icon","picker-toggle",3,"for"],[1,"mat-icon-rtl-mirror"],["placeholder","---","disabled","",1,"dateinput",3,"matDatepicker","ngModel","matDatepickerFilter","ngModelChange"],["input",""],[3,"closed"],["picker",""],["placeholder","---",1,"dateinput",3,"matDatepicker","ngModel","matDatepickerFilter","ngModelChange"],["input2",""],["picker2",""],["input3",""],["picker3",""],["placeholder","","type","number",3,"value","ngModel","ngModelChange","blur"],["matInput","","placeholder","-","type","number",3,"value","ngModel","ngModelChange","blur"],[1,"risk-cell"],[1,"shadow",3,"ngStyle"],[1,"divisible-error",3,"hidden"],[1,"monday-error",3,"hidden"],[1,"abnormal-error",3,"hidden"],[1,"remove-activity",3,"click"]],template:function(i,n){1&i&&t.YNc(0,ci,31,3,"div",0),2&i&&t.Q6J("ngIf",!!n.project)},dependencies:[J.sg,J.O5,J.PC,Ze,Oe,ke,Tt.Mq,Tt.hl,Tt.nW,ae.Hw,zt.Nt,Ht.R9,tt.Fj,tt.wV,tt.Wl,tt.JJ,tt.On],styles:[".table-fixed[_ngcontent-%COMP%]{width:100%}.table-fixed[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:999}.table-fixed[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:999;color:#666;padding-bottom:3px;background:#fafafa}.table-container[_ngcontent-%COMP%]{margin-top:3px;margin-left:5px;min-width:1199px;height:683px;overflow-y:auto;overflow-x:auto;position:relative}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-left:10px;padding-top:5px;padding-bottom:5px;border:1px solid #ccc!important}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input.name-txt[_ngcontent-%COMP%]{width:84%;border-right:1px solid white!important}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input.dateinput[_ngcontent-%COMP%]{padding-left:27px}svg.mat-datepicker-toggle-default-icon[_ngcontent-%COMP%]{height:15px;margin-right:0}.icon[_ngcontent-%COMP%]{font-size:14px}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input.dateinput[_ngcontent-%COMP%]{width:100%}  .mat-icon-button{height:17px!important;width:17px!important;line-height:16px!important}input.mat-input-element[_ngcontent-%COMP%]{margin-top:0!important}  button.mat-icon-button{height:25px!important;width:27px!important}.picker-toggle[_ngcontent-%COMP%]{height:10px;float:left;margin-right:-33px;margin-top:5px}.table-fixed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-collapse:collapse;border:none}table.table-fixed[_ngcontent-%COMP%]{border-collapse:collapse}.table-fixed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-fixed[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0}.remove-activity[_ngcontent-%COMP%]{cursor:pointer}.risk-cell[_ngcontent-%COMP%], .remove-activity[_ngcontent-%COMP%]{padding-left:7px}.list-empty[_ngcontent-%COMP%]{position:absolute;z-index:10000;left:50%;top:35%;transform:translate(-50%,-50%)}.shadow[_ngcontent-%COMP%]{text-shadow:1px 1px #555}.pointer[_ngcontent-%COMP%]{cursor:pointer}.quick-activity[_ngcontent-%COMP%]{width:400px}.dependency-button[_ngcontent-%COMP%]{width:10%;height:31px;float:right;background-color:#fff;padding-left:10px;padding-top:5px;padding-bottom:5px;border:1px solid #ccc!important;border-right:1px solid white!important;border-left:1px solid white!important}.dep-edit[_ngcontent-%COMP%]{width:6%;height:31px;float:right;background-color:#fff;padding-left:5px;padding-top:5px;padding-bottom:5px;border:1px solid #ccc!important;border-right:1px solid white!important;border-left:1px solid white!important}.ok-edit[_ngcontent-%COMP%]{width:44%}.cancel-edit[_ngcontent-%COMP%]{width:56%}.click-to-edit[_ngcontent-%COMP%]{width:10%;color:#999}.full-button[_ngcontent-%COMP%]{width:16%}.create-txt[_ngcontent-%COMP%]{position:absolute;z-index:1000}.add-arrow[_ngcontent-%COMP%]{position:relative;height:67px}.dependency-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-left:5px!important}.activity-name[_ngcontent-%COMP%]{width:300px}.duration[_ngcontent-%COMP%]{width:72px}.confirm-btns[_ngcontent-%COMP%]{width:16%;float:right;background-color:#fff;border:1px 0px 1px 0px solid #ccc!important}.depends-on-input[_ngcontent-%COMP%]{width:80%!important;float:right}.table-fixed[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   input.depends-on-input[_ngcontent-%COMP%]{border-left:1px solid white!important}.click-to-edit-dep[_ngcontent-%COMP%]{width:20%;border-left:1px solid #ccc!important;border-right:1px solid white!important;color:#666}input[type=text][_ngcontent-%COMP%]{padding-left:5px;width:150px}  .mat-form-field-infix{width:120px!important}  svg.mat-datepicker-toggle-default-icon{height:15px!important;width:14px!important;margin-right:0;display:block}.icon[_ngcontent-%COMP%]{transform:scale(1)}input.dateinput[_ngcontent-%COMP%]{padding-left:27px;width:150px}  .mat-icon-button{height:17px!important;width:27px!important;line-height:16px!important}.picker-toggle[_ngcontent-%COMP%]{height:10px;float:left;margin-right:-33px;margin-top:-9px;position:absolute}.confirm-btns[_ngcontent-%COMP%]   .cancel-edit[_ngcontent-%COMP%]{color:red}.confirm-btns[_ngcontent-%COMP%]   .ok-edit[_ngcontent-%COMP%]{color:green}.subproj[_ngcontent-%COMP%]{width:60px}.min-est[_ngcontent-%COMP%]{width:90px}.float[_ngcontent-%COMP%]{padding-right:10px}.divisible-error[_ngcontent-%COMP%]{color:red;font-size:15px;font-weight:700}.monday-error[_ngcontent-%COMP%]{color:orange;font-size:15px;font-weight:700}.abnormal-error[_ngcontent-%COMP%]{color:green;font-size:15px;font-weight:700}"]})}return r})();var di=_(8885);function hi(r,o){if(1&r&&(t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"span",7)(4,"span",8),t._uU(5),t.qZA()(),t.TgZ(6,"span",7)(7,"span",8),t._uU(8,"[No Name]"),t.qZA()(),t._uU(9," > "),t.TgZ(10,"span",7)(11,"span",8),t._uU(12,"[No Name]"),t.qZA()(),t.TgZ(13,"span",7)(14,"span",8),t._uU(15),t.qZA()()(),t.TgZ(16,"div"),t._UZ(17,"div",9),t.TgZ(18,"div",10)(19,"div",11)(20,"div",12),t._uU(21,"Low Risk:"),t.qZA(),t.TgZ(22,"div"),t._uU(23),t.qZA()(),t.TgZ(24,"div",13)(25,"div",12),t._uU(26,"Medium Risk :"),t.qZA(),t.TgZ(27,"div"),t._uU(28),t.qZA()(),t.TgZ(29,"div",14)(30,"div",12),t._uU(31,"High Risk :"),t.qZA(),t.TgZ(32,"div"),t._uU(33),t.qZA()(),t.TgZ(34,"div",15)(35,"div",12),t._uU(36,"Critical Risk:"),t.qZA(),t.TgZ(37,"div"),t._uU(38),t.qZA()()()()()()),2&r){const e=t.oxw();t.xp6(3),t.Q6J("hidden",""===e.parentProject.profile.name),t.xp6(2),t.Oqu(e.parentProject.profile.name),t.xp6(1),t.Q6J("hidden",""!==e.parentProject.profile.name),t.xp6(4),t.Q6J("hidden",""!==e.project.profile.name),t.xp6(3),t.Q6J("hidden",""===e.project.profile.name),t.xp6(2),t.Oqu(e.project.profile.name),t.xp6(8),t.Oqu(e.parentProject.profile.risk.greenCount),t.xp6(5),t.Oqu(e.parentProject.profile.risk.yellowCount),t.xp6(5),t.Oqu(e.parentProject.profile.risk.redCount),t.xp6(5),t.Oqu(e.parentProject.profile.risk.criticalCount)}}let pi=(()=>{class r{constructor(e,i){this.dashboard=e,this.compiler=i,this.parentProject=null}ngOnInit(){null!=this.id&&(this.data=this.dashboard.activeProject$,this.subscription=this.data.pipe((0,X.h)(e=>!!e)).subscribe(e=>{this.project=e,this.parentProject=e.profile.parentProject}))}ngOnDestroy(){this.subscription.unsubscribe()}loadParent(){const e=this.project.profile.parentProject;if(null!==e){e.profile.view.autoZoom=!0,this.dashboard.updateProject(e,!1);const i=e.profile.parentProject;null!==i&&this.compiler.compile(i),this.dashboard.secondaryProject$.next(i)}}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(z.Ou),t.Y36(di.N))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-parent-project"]],inputs:{id:"id",width:"width",height:"height"},decls:4,vars:4,consts:[[1,"parent"],[3,"click"],[3,"slot","width","height"],["class","stats",4,"ngIf"],[1,"stats"],[1,"main-stats"],[1,"arrowParent","arrow-parent","breadcrumb"],[3,"hidden"],[1,"arrowParentName"],[1,"parent-risk-container"],[1,"arrow-parent-details"],[1,"parent-count","low"],[1,"count-label"],[1,"parent-count","medium"],[1,"parent-count","high"],[1,"parent-count","critical"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.loadParent()}),t._UZ(2,"cp-arrow-snapshot",2),t.qZA(),t.YNc(3,hi,39,10,"div",3),t.qZA()),2&i&&(t.xp6(2),t.Q6J("slot","secondary")("width",390)("height",250),t.xp6(1),t.Q6J("ngIf",null!=n.parentProject))},dependencies:[J.O5,Et.J],styles:[".parent[_ngcontent-%COMP%]{display:flex;flex-direction:column}.low[_ngcontent-%COMP%], .medium[_ngcontent-%COMP%], .high[_ngcontent-%COMP%], .critical[_ngcontent-%COMP%]{font-weight:700}.low[_ngcontent-%COMP%]{color:#7c7}.medium[_ngcontent-%COMP%]{color:#c0c00f}.high[_ngcontent-%COMP%]{color:#f44}.critical[_ngcontent-%COMP%]{color:#555}.parent-count[_ngcontent-%COMP%]{display:flex;flex-direction:row}.parent-count[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:94px}"]})}return r})();var Yt=function(r){return r.ADD="Add",r.REMOVE="Remove",r}(Yt||{}),ui=_(5698),gi=_(12),fi=_(4156),ce=_(6381),le=_(3680);function _i(r,o){if(1&r&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&r){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function mi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",3)(1,"div"),t._uU(2,"Search Lists"),t.qZA(),t.TgZ(3,"div",17)(4,"mat-form-field",18)(5,"input",19),t.NdJ("keydown.enter",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addToList())}),t.qZA(),t.TgZ(6,"mat-autocomplete",20,21),t.YNc(8,_i,2,2,"mat-option",22),t.ALo(9,"async"),t.qZA()(),t.TgZ(10,"button",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addToList())}),t._uU(11,"Add List"),t.qZA()()()}if(2&r){const e=t.MAs(7),i=t.oxw();t.xp6(5),t.Q6J("formControl",i.myControl)("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",t.lcZ(9,4,i.filteredOptions)),t.xp6(2),t.Q6J("disabled",!i.allowAdd)}}function vi(r,o){1&r&&(t.TgZ(0,"span"),t._uU(1,"\xa0 (new)"),t.qZA())}function yi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"i",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.setAction(s.ListAction.REMOVE,n))}),t.qZA()}}function xi(r,o){if(1&r&&(t.TgZ(0,"button",27)(1,"span"),t._uU(2),t.qZA(),t.YNc(3,vi,2,0,"span",28)(4,yi,1,0,"i",29),t.qZA()),2&r){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.isNew),t.xp6(1),t.Q6J("ngIf",i.isAdmin)}}function bi(r,o){1&r&&(t.TgZ(0,"span"),t._uU(1,"\xa0 (new)"),t.qZA())}function Ci(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"i",33),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.setAction(s.ListAction.ADD,n))}),t.qZA()}}const Pi=r=>({strikethrough:r});function wi(r,o){if(1&r&&(t.TgZ(0,"button",27)(1,"span",31),t._uU(2),t.qZA(),t.YNc(3,bi,2,0,"span",28)(4,Ci,1,0,"i",32),t.qZA()),2&r){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(4,Pi,!e.isNew)),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.isNew),t.xp6(1),t.Q6J("ngIf",i.isAdmin)}}function Di(r,o){if(1&r&&(t.TgZ(0,"div")(1,"div",25)(2,"div"),t.YNc(3,xi,5,3,"button",26)(4,wi,5,6,"button",26),t.qZA()()()),2&r){const e=o.$implicit;t.xp6(3),t.Q6J("ngIf","Remove"!==e.action),t.xp6(1),t.Q6J("ngIf","Remove"===e.action)}}function ki(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.processProjectLists())}),t._uU(1,"Update Lists"),t.qZA()}}let Mi=(()=>{class r{constructor(e,i,n,s){this.dashboard=e,this.claimsService=i,this.projectListApi=n,this.envService=s,this.isAdmin=!1,this.groupList=[],this.ListAction=Yt,this.allowAdd=!1,this.myControl=new tt.NI,this.initializedProjectLists=!1}ngOnInit(){this.isAdmin=this.claimsService.isAdmin()||this.envService.isElectron,this.dashboard.activeProject$.pipe((0,X.h)(e=>!!e)).subscribe(e=>{this.project=e,e?.profile?.id&&!this.initializedProjectLists&&(this.getProjectLists(),this.initializedProjectLists=!0)}),this.filteredOptions=this.myControl.valueChanges.pipe((0,K.O)(""),(0,st.b)(e=>this.onListValueChange(e)),(0,et.w)(e=>this.getOptions(e)))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateProject(){this.dashboard.updateProject(this.project,!0)}onListValueChange(e){if(e){if(!this.groupList.find(i=>i.name===e))return this.allowAdd=!0,e;this.allowAdd=!1}else this.allowAdd=!1}addToList(){const e=this.myControl.value;if(e){if(this.groupList.find(n=>n.name===e))return void this.myControl.setValue("");this.groupList.push({name:e,id:0,isNew:!0,action:Yt.ADD}),this.myControl.setValue("")}}setAction(e,i){if(e===Yt.REMOVE&&i.isNew)return this.groupList=this.groupList.filter(n=>n.id!==i.id),i.action=e,void(i.isNew=!1);i.action=e}getOptions(e){return this.projectListApi.getGroupLists(e).pipe((0,nt.U)(i=>i.filter(n=>!this.groupList.find(s=>s.name===n))))}getProjectLists(){this.projectListApi.getProjectLists(this.project.profile.id).subscribe(e=>{this.groupList=[],e.forEach(i=>{this.groupList.push({name:i,id:-1,isNew:!1})})})}processProjectLists(){this.projectListApi.processProjectList(this.project.profile.id,this.groupList).subscribe(e=>{this.groupList=[],e.forEach(i=>{this.groupList.push({name:i,id:-1,isNew:!1})})})}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(z.Ou),t.Y36(ui.U),t.Y36(gi.e),t.Y36(fi.L))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-project-metadata"]],decls:83,vars:14,consts:[[1,"stats-container"],[1,"left"],[1,"inner-left"],[1,"text-form"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["id","projDescription","rows","3",1,"form-control",3,"ngModel","ngModelChange"],[1,"risk-range"],[1,"range-title"],[1,"start-range"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,""],[1,"standard-dev"],[1,"right"],["class","text-form",4,"ngIf"],[1,"list-container"],[4,"ngFor","ngForOf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"search-lists"],[1,"small-height"],["type","text","placeholder","Pick one","aria-label","Number","matInput","",3,"formControl","matAutocomplete","keydown.enter"],["autoActiveFirstOption",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-secondary",3,"disabled","click"],[3,"value"],[1,"list-item"],["class","btn btn-secondary",4,"ngIf"],[1,"btn","btn-secondary"],[4,"ngIf"],["class","fa fa-times",3,"click",4,"ngIf"],[1,"fa","fa-times",3,"click"],[3,"ngClass"],["class","fa fa-plus",3,"click",4,"ngIf"],[1,"fa","fa-plus",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),t._uU(5,"Project Name"),t.qZA(),t.TgZ(6,"input",4),t.NdJ("ngModelChange",function(a){return n.project.profile.name=a}),t.qZA()(),t.TgZ(7,"div",3)(8,"div"),t._uU(9,"Description"),t.qZA(),t.TgZ(10,"textarea",5),t.NdJ("ngModelChange",function(a){return n.project.profile.description=a}),t.qZA()(),t.TgZ(11,"div",6)(12,"div")(13,"div")(14,"div",7),t._uU(15,"Risk Range (Float)"),t.qZA()(),t.TgZ(16,"div")(17,"div"),t._uU(18,"Red: "),t.TgZ(19,"span",8),t._uU(20,"1 -"),t.qZA()(),t.TgZ(21,"div")(22,"input",9),t.NdJ("ngModelChange",function(a){return n.project.profile.redLimit=a})("ngModelChange",function(){return n.updateProject()}),t.qZA()()(),t.TgZ(23,"div")(24,"div"),t._uU(25,"Yellow:"),t.TgZ(26,"span",8),t._uU(27),t.qZA()(),t.TgZ(28,"div")(29,"input",9),t.NdJ("ngModelChange",function(a){return n.project.profile.yellowLimit=a})("ngModelChange",function(){return n.updateProject()}),t.qZA()()(),t.TgZ(30,"div")(31,"div"),t._uU(32,"Green:"),t.qZA(),t.TgZ(33,"div")(34,"span",10),t._uU(35),t.qZA()()(),t.TgZ(36,"div"),t._UZ(37,"div")(38,"div"),t.qZA(),t.TgZ(39,"div"),t._UZ(40,"div")(41,"div"),t.qZA()(),t.TgZ(42,"div")(43,"div")(44,"div")(45,"div",7),t._uU(46,"Risk Weight"),t.qZA()()(),t.TgZ(47,"div")(48,"div"),t._uU(49,"Red:"),t.qZA(),t.TgZ(50,"div")(51,"input",9),t.NdJ("ngModelChange",function(a){return n.project.profile.risk.redWeight=a})("ngModelChange",function(){return n.updateProject()}),t.qZA()()(),t.TgZ(52,"div")(53,"div"),t._uU(54,"Yellow:"),t.qZA(),t.TgZ(55,"div")(56,"input",9),t.NdJ("ngModelChange",function(a){return n.project.profile.risk.yellowWeight=a})("ngModelChange",function(){return n.updateProject()}),t.qZA()()(),t.TgZ(57,"div")(58,"div"),t._uU(59,"Green:"),t.qZA(),t.TgZ(60,"div")(61,"input",9),t.NdJ("ngModelChange",function(a){return n.project.profile.risk.greenWeight=a})("ngModelChange",function(){return n.updateProject()}),t.qZA()()(),t.TgZ(62,"div")(63,"div"),t._uU(64,"Critical:"),t.qZA(),t.TgZ(65,"div")(66,"input",9),t.NdJ("ngModelChange",function(a){return n.project.profile.risk.criticalWeight=a})("ngModelChange",function(){return n.updateProject()}),t.qZA()()(),t.TgZ(67,"div")(68,"div")(69,"span",11),t._uU(70,"Abnormal Standard Deviation: "),t.qZA()(),t.TgZ(71,"div")(72,"input",9),t.NdJ("ngModelChange",function(a){return n.project.profile.numStDev=a})("ngModelChange",function(){return n.updateProject()}),t.qZA()()()()()()(),t.TgZ(73,"div",12)(74,"div",2),t.YNc(75,mi,12,6,"div",13),t.TgZ(76,"div",3)(77,"div"),t._uU(78,"Project Lists"),t.qZA(),t.TgZ(79,"div",14),t.YNc(80,Di,5,2,"div",15),t.qZA(),t.TgZ(81,"div"),t.YNc(82,ki,2,0,"button",16),t.qZA()()()()()),2&i&&(t.xp6(6),t.Q6J("ngModel",n.project.profile.name),t.xp6(4),t.Q6J("ngModel",n.project.profile.description),t.xp6(12),t.Q6J("ngModel",n.project.profile.redLimit),t.xp6(5),t.hij("",n.project.profile.redLimit+1," -"),t.xp6(2),t.Q6J("ngModel",n.project.profile.yellowLimit),t.xp6(6),t.hij("+",n.project.profile.yellowLimit+1," "),t.xp6(16),t.Q6J("ngModel",n.project.profile.risk.redWeight),t.xp6(5),t.Q6J("ngModel",n.project.profile.risk.yellowWeight),t.xp6(5),t.Q6J("ngModel",n.project.profile.risk.greenWeight),t.xp6(5),t.Q6J("ngModel",n.project.profile.risk.criticalWeight),t.xp6(6),t.Q6J("ngModel",n.project.profile.numStDev),t.xp6(3),t.Q6J("ngIf",n.isAdmin),t.xp6(5),t.Q6J("ngForOf",n.groupList),t.xp6(2),t.Q6J("ngIf",n.isAdmin))},dependencies:[J.mk,J.sg,J.O5,tt.Fj,tt.wV,tt.JJ,tt.On,tt.oH,zt.Nt,Ht.KE,ce.XC,le.ey,ce.ZL,J.Ov],styles:[".proj-form[_ngcontent-%COMP%]{padding-left:45px}.risk-settings[_ngcontent-%COMP%]{padding-left:53px;margin-top:30px}.red-range[_ngcontent-%COMP%]{margin-left:-19px}.inner-left[_ngcontent-%COMP%]{grid-column:1/2;grid-row:1/2;display:grid;grid-template-rows:80px 120px 2fr}.stats-container[_ngcontent-%COMP%]{width:1180px;display:grid;grid-template-rows:1fr;grid-template-columns:repeat(2,1fr);background-color:#fff}.left[_ngcontent-%COMP%]{margin:30px;background-color:#f9f9f9;border-radius:4px;border:1px solid #ddd}.left[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:17px}.right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:33px 33px 33px 27px}.right[_ngcontent-%COMP%]{grid-column:2/3;grid-row:1/2}.text-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.risk-range[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr}.risk-range[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.risk-range[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1;display:flex;padding:13px;align-items:center}.risk-range[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:75px;align-self:right}.risk-range[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:100px;align-self:right}.standard-dev[_ngcontent-%COMP%]{padding-right:10px}.right[_ngcontent-%COMP%]{display:grid;grid-template-rows:300px 1fr 240px;border-left:none}.right[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}.sub-projects[_ngcontent-%COMP%]{margin:10px 10px 10px 0}.sub-projects[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .sub-projects[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:7px 7px 7px 0}.sub-projects[_ngcontent-%COMP%]   .subproj-name[_ngcontent-%COMP%]{width:290px}.subproj-risk[_ngcontent-%COMP%], .subproj-eft[_ngcontent-%COMP%]{text-align:right}.config-stats[_ngcontent-%COMP%]{display:flex;flex-direction:row}.config-stats-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:2}.config-stats-col[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;height:35px}.other-risk-title[_ngcontent-%COMP%]{height:35px;font-weight:700}.other-risk[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px;margin-top:0}.start-range[_ngcontent-%COMP%]{float:right;padding-right:10px}.risk-range[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div.range-title[_ngcontent-%COMP%]{width:100%;align-self:right}.right[_ngcontent-%COMP%]{background-color:#fcfcfc;border:1px solid #ddd}.search-lists[_ngcontent-%COMP%]{display:flex;flex-direction:row}.search-lists[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:4;margin-right:10px}.search-lists[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:35px}.small-height[_ngcontent-%COMP%]{height:55px}  .mat-form-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-input-element{height:55px}  .mdc-text-field--no-label:not(.mdc-text-field--outlined):not(.mdc-text-field--textarea) .mat-mdc-form-field-infix{padding:0}.strikethrough[_ngcontent-%COMP%]{text-decoration:line-through}.list-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.list-item[_ngcontent-%COMP%]{margin-bottom:5px}.list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px}.list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}.space-left[_ngcontent-%COMP%]{margin-left:5px}"]})}return r})();function Ai(r,o){if(1&r&&t._UZ(0,"cp-activity-grid",4),2&r){const e=t.oxw(2);t.Q6J("id",e.id)}}function Ti(r,o){if(1&r&&t._UZ(0,"cp-shallow-s",7),2&r){const e=t.oxw(2);t.Q6J("id",e.id)("width",1214)("height",700)}}function Si(r,o){if(1&r&&t._UZ(0,"cp-risk-curve",7),2&r){const e=t.oxw(2);t.Q6J("id",e.id)("width",1214)("height",700)}}const Oi=()=>({top:20,right:50,left:20,bottom:130});function Zi(r,o){if(1&r&&t._UZ(0,"cp-stacked-resources",17),2&r){const e=t.oxw(2);t.Q6J("id",e.id)("width",1214)("height",700)("barWidth",60)("showAxes",!0)("margin",t.DdM(6,Oi))}}function Ri(r,o){if(1&r&&t._UZ(0,"cp-project-metadata",4),2&r){const e=t.oxw(2);t.Q6J("id",e.id)}}const Ee=r=>["arrow",r],bt=r=>({sidebar:r}),Ct=r=>({outlets:r}),Pt=r=>["/profile",r],Ii=r=>["shallows",r],Ei=r=>["metadata",r],Fi=r=>["risk",r],Li=r=>["stacked",r],ji=()=>({top:15,right:15,left:15,bottom:15});function Gi(r,o){if(1&r&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3),t._UZ(3,"cp-action-buttons",4),t.qZA(),t.TgZ(4,"div",5)(5,"a",6),t._UZ(6,"cp-arrow-snapshot",7),t.qZA()(),t.TgZ(7,"div",5)(8,"a",6),t._UZ(9,"cp-shallow-s-snapshot",7),t.qZA()(),t.TgZ(10,"div",5)(11,"a",6),t._UZ(12,"cp-score-board",4),t.qZA()(),t.TgZ(13,"div",8),t._UZ(14,"cp-arrow-chart",9),t.ynx(15,10),t.YNc(16,Ai,1,1,"cp-activity-grid",11)(17,Ti,1,3,"cp-shallow-s",12)(18,Si,1,3,"cp-risk-curve",12)(19,Zi,1,7,"cp-stacked-resources",13)(20,Ri,1,1,"cp-project-metadata",11),t.BQk(),t.qZA(),t.TgZ(21,"div",14)(22,"div",15)(23,"a",6),t._UZ(24,"cp-risk-donut",16),t.qZA()(),t.TgZ(25,"div",15)(26,"a",6),t._UZ(27,"cp-stacked-resources",17),t.qZA()(),t.TgZ(28,"div",15)(29,"a",6),t._UZ(30,"cp-parent-project",16),t.qZA()()()(),t.BQk()),2&r){const e=t.oxw();t.xp6(3),t.Q6J("id",e.id),t.xp6(2),t.Q6J("routerLink",t.VKq(43,Pt,t.VKq(41,Ct,t.VKq(39,bt,t.VKq(37,Ee,e.id))))),t.xp6(1),t.Q6J("id",e.id)("width",390)("height",250),t.xp6(2),t.Q6J("routerLink",t.VKq(51,Pt,t.VKq(49,Ct,t.VKq(47,bt,t.VKq(45,Ii,e.id))))),t.xp6(1),t.Q6J("id",e.id)("width",390)("height",250),t.xp6(2),t.Q6J("routerLink",t.VKq(59,Pt,t.VKq(57,Ct,t.VKq(55,bt,t.VKq(53,Ei,e.id))))),t.xp6(1),t.Q6J("id",e.id),t.xp6(2),t.Q6J("hidden","arrow"!==e.subRoute)("id",e.id)("width",1214)("height",700)("rebuild",!0),t.xp6(1),t.Q6J("ngSwitch",e.subRoute),t.xp6(1),t.Q6J("ngSwitchCase","grid"),t.xp6(1),t.Q6J("ngSwitchCase","shallows"),t.xp6(1),t.Q6J("ngSwitchCase","risk"),t.xp6(1),t.Q6J("ngSwitchCase","stacked"),t.xp6(1),t.Q6J("ngSwitchCase","metadata"),t.xp6(3),t.Q6J("routerLink",t.VKq(67,Pt,t.VKq(65,Ct,t.VKq(63,bt,t.VKq(61,Fi,e.id))))),t.xp6(1),t.Q6J("width",390)("height",320)("id",e.id),t.xp6(2),t.Q6J("routerLink",t.VKq(75,Pt,t.VKq(73,Ct,t.VKq(71,bt,t.VKq(69,Li,e.id))))),t.xp6(1),t.Q6J("id",e.id)("width",390)("height",250)("barWidth",10)("showAxes",!1)("margin",t.DdM(77,ji)),t.xp6(2),t.Q6J("routerLink",t.VKq(84,Pt,t.VKq(82,Ct,t.VKq(80,bt,t.VKq(78,Ee,e.id))))),t.xp6(1),t.Q6J("width",390)("height",250)("id",e.id)}}function Ji(r,o){1&r&&(t.TgZ(0,"div",18),t._uU(1,"Loading..."),t.qZA())}let Ui=(()=>{class r extends dt{constructor(e,i,n,s){super(),this.route=e,this.router=i,this.dashboard=n,this.eventService=s,this.refresh=0,this.id=+e.snapshot.params.id,this.project=this.dashboard.activeProject$}ngOnInit(){this.id=+this.route.snapshot.params.id,this.subRoute=this.getSubpage(window.location.href),this.router.events.subscribe(e=>{if(null!=e&&null!=e.url){const n=this.getSubpage(e.url);""!==n&&(this.subRoute=n)}}),this.eventService.get(It.CK).pipe((0,X.h)(e=>!!e)).subscribe(e=>this.refresh=0),this.subscription=this.project.pipe((0,X.h)(e=>!!e)).subscribe(e=>this.refresh++)}getSubpage(e){const i=e.split("sidebar:");if(null!=i&&i.length>1){const n=i[1].split("/");if(null!=n)return n[0]}return""}canDeactivate(){return this.refresh<2}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(V.gz),t.Y36(V.F0),t.Y36(z.Ou),t.Y36(z.WO))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-profile"]],features:[t.qOj],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"page-content"],[1,"action-buttons"],[3,"id"],[1,"small-chart"],[3,"routerLink"],[3,"id","width","height"],[1,"current-view"],[3,"hidden","id","width","height","rebuild"],[3,"ngSwitch"],[3,"id",4,"ngSwitchCase"],[3,"id","width","height",4,"ngSwitchCase"],[3,"id","width","height","barWidth","showAxes","margin",4,"ngSwitchCase"],[1,"right-content"],[1,"right-chart"],[3,"width","height","id"],[3,"id","width","height","barWidth","showAxes","margin"],[1,"loader"]],template:function(i,n){if(1&i&&(t.YNc(0,Gi,31,86,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Ji,2,0,"ng-template",null,1,t.W1O)),2&i){const s=t.MAs(3);t.Q6J("ngIf",!!t.lcZ(1,2,n.project))("ngIfElse",s)}},dependencies:[V.rH,J.O5,J.RF,J.n9,ut.O,gt.w,Et.J,Ft.M,Wt,te,v,y.b,C,li,pi,Mi,J.Ov],styles:["cp-profile{z-index:0}cp-profile *{padding:0;margin:0}cp-profile .small-chart{background-color:#fff}cp-profile .current-view{grid-row:3/-1;grid-column:1/4}cp-profile .page-content{grid-row:2/-1;grid-column:2/-1;display:grid;grid-gap:20px;margin:12px;min-width:1650px}cp-profile .page-content{grid-template-columns:repeat(4,1fr);grid-template-rows:18px auto auto repeat(2,1fr);background-color:#f9f9f9}cp-profile .page-content{padding:15px}cp-profile .action-buttons{grid-row:1/2;grid-column:1/4}cp-profile .action-buttons{margin-top:-5px}cp-profile .right-content{display:flex;flex-direction:column;grid-row:1/-1}cp-profile .right-chart{margin-bottom:16px}cp-profile .fake-right{width:380px;height:250px}cp-profile [hidden]{display:none}cp-profile .loader{position:absolute;top:48%;left:calc(50% + 115px);transform:translate(-50%,-50%)}\n"],encapsulation:2})}return r})();const mt=r=>({active:r});function qi(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t._uU(2,"Shallow S"),t.qZA(),t.TgZ(3,"div",3)(4,"label",4)(5,"input",5),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setChartType("line"))}),t.qZA(),t._uU(6," Line "),t.qZA(),t.TgZ(7,"label",6)(8,"input",7),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setChartType("step"))}),t.qZA(),t._uU(9," Step "),t.qZA()(),t.TgZ(10,"div",8)(11,"div",9),t._uU(12,"Trendlines"),t.qZA()(),t.TgZ(13,"div",10)(14,"div",11)(15,"label",6),t.ALo(16,"async"),t.ALo(17,"async"),t.TgZ(18,"input",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setRegressionType("linear"))}),t.qZA(),t._uU(19," Linear "),t.qZA(),t.TgZ(20,"label",6),t.ALo(21,"async"),t.TgZ(22,"input",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setRegressionType("polynomial"))}),t.qZA(),t._uU(23," Polynomial "),t.qZA()(),t.TgZ(24,"div",14)(25,"label",15),t._UZ(26,"input",16),t._uU(27," Best Fit "),t.qZA()()(),t.TgZ(28,"div",17)(29,"label",18)(30,"input",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setExtrapolate(!n.project.profile.view.showOverrun))}),t.qZA(),t._uU(31," Extrapolate "),t.qZA()(),t.TgZ(32,"div",8)(33,"div",9),t._uU(34,"First Point"),t.qZA()(),t.TgZ(35,"div",20)(36,"div",21)(37,"label",4)(38,"input",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setStartType("completion"))}),t.qZA(),t._uU(39," First Completion "),t.qZA()(),t.TgZ(40,"div",21)(41,"label",6)(42,"input",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.setStartType("start"))}),t.qZA(),t._uU(43," Earilest Start "),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(4),t.Q6J("ngClass",t.VKq(13,mt,!e.project.profile.view.showStepChart)),t.xp6(3),t.Q6J("ngClass",t.VKq(15,mt,e.project.profile.view.showStepChart)),t.xp6(8),t.Q6J("ngClass",t.VKq(17,mt,"linear"===t.lcZ(16,7,e.regType$)||!t.lcZ(17,9,e.regType$))),t.xp6(5),t.Q6J("ngClass",t.VKq(19,mt,"polynomial"===t.lcZ(21,11,e.regType$))),t.xp6(9),t.Q6J("ngClass",t.VKq(21,mt,e.project.profile.view.showOverrun)),t.xp6(8),t.Q6J("ngClass",t.VKq(23,mt,!e.project.profile.view.useStartDates)),t.xp6(4),t.Q6J("ngClass",t.VKq(25,mt,e.project.profile.view.useStartDates))}}let Ni=(()=>{class r{constructor(e,i,n){this.route=e,this.dashboard=i,this.eventService=n,this.regType$=this.eventService.get(F.Bd)}ngOnInit(){this.id=this.route.snapshot.params.id,this.extrapolate=!1,this.chartType="line",this.startType="completion",this.id&&(this.data=this.dashboard.activeProject$,this.subscription=this.data.subscribe(e=>{this.project=e}))}ngOnDestroy(){this.subscription.unsubscribe()}setExtrapolate(e){this.project.profile.view.showOverrun=e,this.dashboard.updateProject(this.project,!1)}setChartType(e){"step"===e&&(this.project.profile.view.showStepChart=!0),"line"===e&&(this.project.profile.view.showStepChart=!1),this.dashboard.updateProject(this.project,!1)}setRegressionType(e){this.regType$.next(e)}setStartType(e){"start"===e&&(this.project.profile.view.useStartDates=!0),"completion"===e&&(this.project.profile.view.useStartDates=!1),this.dashboard.updateProject(this.project,!1)}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(V.gz),t.Y36(z.Ou),t.Y36(z.WO))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-shallow-s-bar"]],decls:1,vars:1,consts:[["class","shallow-s-bar",4,"ngIf"],[1,"shallow-s-bar"],[1,"title-top"],["data-toggle","buttons",1,"btn-group-toggle","btn-group"],[1,"btn","btn-secondary","active",3,"ngClass"],["type","radio","value","line","name","type",1,"form-check-input",3,"click"],[1,"btn","btn-secondary",3,"ngClass"],["type","radio","value","step","name","type",1,"form-check-input",3,"click"],[1,"t-container"],[1,"title"],["data-toggle","buttons",1,"btn-group-toggle"],[1,"btn-group","active"],["type","radio","id","name","value","name","name","reg",1,"form-check-input",3,"click"],["type","radio","id","id","value","id","name","reg",1,"form-check-input",3,"click"],[1,"btn-group"],["disabled","",1,"btn","btn-secondary"],["disabled","","type","radio","id","duration","value","duration","name","reg",1,"form-check-input"],[1,"btn-group-toggle","behaviors"],[1,"btn","btn-secondary","exprapolate",3,"ngClass"],["type","checkbox",3,"click"],["data-toggle","buttons",1,"btn-group-toggle","behaviors"],[1,"btn-group","full"],["type","radio","value","completion","name","start",1,"form-check-input",3,"click"],["type","radio","value","start","name","start",1,"form-check-input",3,"click"]],template:function(i,n){1&i&&t.YNc(0,qi,44,27,"div",0),2&i&&t.Q6J("ngIf",!!n.project)},dependencies:[J.mk,J.O5,J.Ov],styles:[".shallow-s-bar[_ngcontent-%COMP%]{padding-left:27px;padding-right:16px}.shallow-s-bar[_ngcontent-%COMP%]   .title-top[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.shallow-s-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}.shallow-s-bar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:20px}.shallow-s-bar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:not(label){color:#bbb}.shallow-s-bar[_ngcontent-%COMP%]   .behaviors[_ngcontent-%COMP%]{margin-left:-28px;width:226px;padding-bottom:0}.shallow-s-bar[_ngcontent-%COMP%]   .behaviors[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;text-align:left;margin-top:2px;padding-left:27px;color:#fff}.shallow-s-bar[_ngcontent-%COMP%]   .behaviors[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{width:100%}.shallow-s-bar[_ngcontent-%COMP%]   .exprapolate[_ngcontent-%COMP%]{background-color:#6c757d;border-color:#6c757d}.shallow-s-bar[_ngcontent-%COMP%]   .exprapolate.active[_ngcontent-%COMP%]{background-color:#414549;border-color:#50585f}.shallow-s-bar[_ngcontent-%COMP%]   .t-container[_ngcontent-%COMP%]{margin-bottom:5px}"]})}return r})(),Bi=(()=>{class r{constructor(e,i){this.dashboard=e,this.eventService=i}ngOnInit(){this.decompressAmount=0,this.eventService.get(F.vY).next(F.Qe),this.sub=this.eventService.get(F.GL).subscribe(e=>{this.decompressAmount=e})}secondDervative(){this.eventService.get(F.Ji).next(!0)}changeRisk(e){this.decompressAmount=+e.value,this.eventService.get(F.GL).next(+e.value)}changeRiskType(e){this.eventService.get(F.vY).next(e)}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(z.Ou),t.Y36(z.WO))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-risk-bar"]],decls:26,vars:1,consts:[[1,"risk-bar"],[1,"title"],[1,"risk-decomp",3,"ngModel","change","ngModelChange"],[1,"behaviors"],["data-toggle","buttons",1,"btn-group-toggle"],[1,"btn","btn-secondary",3,"click"],[1,"type-title"],[1,"btn-group"],[1,"btn","btn-secondary","active"],["type","radio","value","act","name","risk-type",1,"form-check-input",3,"click"],[1,"btn","btn-secondary"],["type","radio","value","fib","name","risk-type",1,"form-check-input",3,"click"],["type","radio","value","critc","name","risk-type",1,"form-check-input",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Risk Composition"),t.qZA(),t.TgZ(3,"div")(4,"div"),t._uU(5,"Decompress"),t.qZA(),t.TgZ(6,"div")(7,"input",2),t.NdJ("change",function(a){return n.changeRisk(a.target)})("ngModelChange",function(a){return n.decompressAmount=a}),t.qZA()()(),t.TgZ(8,"div",3)(9,"div",4)(10,"label",5),t.NdJ("click",function(){return n.secondDervative()}),t._uU(11," Second Derivative "),t.qZA()()(),t.TgZ(12,"div",6),t._uU(13,"Risk Type"),t.qZA(),t.TgZ(14,"div",4)(15,"div",7)(16,"label",8)(17,"input",9),t.NdJ("click",function(){return n.changeRiskType("activity")}),t.qZA(),t._uU(18," Activity "),t.qZA(),t.TgZ(19,"label",10)(20,"input",11),t.NdJ("click",function(){return n.changeRiskType("fibonacci")}),t.qZA(),t._uU(21," Fibonaci "),t.qZA()(),t.TgZ(22,"div",7)(23,"label",10)(24,"input",12),t.NdJ("click",function(){return n.changeRiskType("criticality")}),t.qZA(),t._uU(25," Crtiticality "),t.qZA()()()()),2&i&&(t.xp6(7),t.Q6J("ngModel",n.decompressAmount))},dependencies:[tt.Fj,tt.JJ,tt.On],styles:["*[_ngcontent-%COMP%]{color:#bbb}.risk-bar[_ngcontent-%COMP%]{padding-left:27px;padding-right:16px}.risk-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.risk-bar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:10px}.risk-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#444}.risk-bar[_ngcontent-%COMP%]   .behaviors[_ngcontent-%COMP%]{margin-left:-28px;width:226px;padding-bottom:0}.risk-bar[_ngcontent-%COMP%]   .behaviors[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;text-align:left;margin-top:2px;padding-left:27px}.risk-bar[_ngcontent-%COMP%]   .type-title[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:5px}.risk-bar[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#fff}"]})}return r})(),zi=(()=>{class r{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-stacked-resources-bar"]],decls:2,vars:0,template:function(i,n){1&i&&(t.TgZ(0,"p"),t._uU(1,"stacked-resources-bar works!"),t.qZA())}})}return r})();var at=_(1486),pt=_(4403),Fe=_(2119),Yi=_(9304),Qi=_(9989),Vi=_(7399);let $i=(()=>{class r{constructor(e,i,n,s){this.projFactory=e,this.activityFactory=i,this.integrationFactory=n,this.chartFactory=s}createActivities(e,i){return e.map(n=>{const s=this.activityFactory.fromJson(),a=s.profile,c=Object.keys(n);for(const u of c)a.hasOwnProperty(u)&&this.setProp(a,n,u);s.profile=a;const l=i.find(u=>u.id===n.id);if(l){const u=this.chartFactory.fromJson(),g=Object.keys(l);for(const b of g)u.hasOwnProperty(b)&&this.setProp(u,l,b);s.chartInfo=u}return this.setActivityDates(s),s})}setProp(e,i,n){return e[n]=i[n]}setActivityDates(e){}getCritPathProject(e){const i=this.projFactory.fromJson();if(e.length>0){const n=e[0],s=Object.keys(n);for(const a of s)i.profile.hasOwnProperty(a)&&this.setProp(i.profile,n,a)}return i}createIntegrations(e){return e.map(i=>{const n=this.integrationFactory.fromJson(),s=Object.keys(i);for(const a of s)n.hasOwnProperty(a)&&this.setProp(n,i,a);return n})}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(Fe.z),t.LFG(Yi.w),t.LFG(Qi.i),t.LFG(Vi.I))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Le=_(9680);let Ki=(()=>{class r{constructor(e,i,n){this.mapper=e,this.serializer=i,this.projSanitizer=n}export(e){const i=e.activities.map(O=>({...O.profile,graphId:e.profile.id})),n=e.activities.map(O=>({...O.chartInfo,id:O.profile.id,graphId:e.profile.id})),s=e.integrations,a=e.profile.name||"critical-pass-project",c=at.P6.json_to_sheet(i),l=at.P6.json_to_sheet(s),u=at.P6.json_to_sheet(n),g=at.P6.json_to_sheet([e.profile]),b=at.P6.book_new();at.P6.book_append_sheet(b,c,pt.SI),at.P6.book_append_sheet(b,u,pt.tu),at.P6.book_append_sheet(b,l,pt.dt),at.P6.book_append_sheet(b,g,pt.nE),at.NC(b,a+".xlsx")}import(e){return new Promise((i,n)=>{const s=new FileReader;s.readAsBinaryString(e),s.onload=a=>{const l=at.ij(a.target.result,{type:"binary",cellDates:!0}),u=this.getWorksheetData(l,pt.SI),g=this.getWorksheetData(l,pt.tu),b=this.getWorksheetData(l,pt.dt),O=this.getWorksheetData(l,pt.nE),G=this.mapper.createActivities(u,g),q=this.mapper.createIntegrations(b),B=this.mapper.getCritPathProject(O);B.activities=G,B.integrations=q,i(B)}})}getWorksheetData(e,i){return at.P6.sheet_to_json(e.Sheets[i])}exportToJSON(e){let i="",n="critical-pass-project";if(Array.isArray(e)){n="critical-pass-projects";const l=e.map(u=>{const g=this.serializer.fromJson(u);return this.projSanitizer.sanatizeForSave(g),g});i=JSON.stringify(l)}else{const l=this.serializer.fromJson(e);this.projSanitizer.sanatizeForSave(l),i=JSON.stringify(l)}const s=new Blob([i],{type:"application/json"}),a=window.URL.createObjectURL(s),c=document.createElement("a");c.download=n+".json",c.href=a,c.click()}importFromJSON(e){return new Promise((i,n)=>{const s=new FileReader;s.readAsText(e),s.onload=a=>{const l=JSON.parse(a.target.result);if(Array.isArray(l)){const u=l.map(g=>this.serializer.fromJson(g));i(u)}else{const u=this.serializer.fromJson(l);i(u)}}})}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG($i),t.LFG(Fe.z),t.LFG(Le.B))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Wi=_(155),Xi=_(7649);let tn=(()=>{class r{constructor(e,i,n){this.zametekApi=e,this.projectSanitizer=i,this.fCompiler=n}compileMsProject(e){return this.zametekApi.compileMsProject(e).pipe((0,st.b)(i=>(i&&this.fCompiler.compileProjectFromFile(i),i)))}compileArrowGraph(e){return this.projectSanitizer.sanitizeNumbers(e),this.zametekApi.compileArrowGraph(e).pipe((0,st.b)(i=>(i&&this.fCompiler.compileProjectFromFile(i),i)))}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(Wi.v),t.LFG(Le.B),t.LFG(Xi.h))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var en=_(1339),nn=_(9127),sn=_(6140);let rn=(()=>{class r{constructor(){}resetIds(e){if(!e.profile.start||!e.profile.end)return;e.activities.forEach(s=>{s.profile.id=1/0});let n=this.setIds(e,e.profile.start,0);e.activities.filter(s=>s.profile.id===1/0).forEach(s=>{n++,s.profile.id=n})}setIds(e,i,n){const s=e.activities.filter(a=>a.chartInfo.source_id===i);if(0===s.length)return n;for(const a of s)null===a.profile.id&&(n++,a.profile.id=n,n=this.setIds(e,a.chartInfo.target_id,n));return n}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var on=_(2425);const an=["fileUpload"],cn=r=>({active:r});let ln=(()=>{class r{constructor(e,i,n,s,a,c,l,u,g,b,O){this.fileManager=e,this.buttonEvents=i,this.dashboard=n,this.eventService=s,this.route=a,this.sorter=c,this.activityBuilder=l,this.pcdGenerator=u,this.idGenerator=g,this.toastr=b,this.depCrawler=O,this.isProcessing=!1,this.fileToUpload=null,this.showDummies=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.subscription=this.dashboard.activeProject$.pipe((0,X.h)(e=>!!e)).subscribe(e=>{this.project=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}addActivity(){this.project&&(this.activityBuilder.addActivity(this.project),this.dashboard.updateProject(this.project,!1))}buildArrowChart(){this.isProcessing=!0,this.buttonEvents.compileArrowGraph(this.project).subscribe(e=>{e?(this.dashboard.updateProject(e,!1),this.isProcessing=!1,this.toastr.success("Build Arrow Chart","Success!")):(this.isProcessing=!1,this.toastr.error("Build Arrow Chart","Project Missing."))},e=>{console.error(e),this.isProcessing=!1,this.toastr.error("Build Arrow Chart","Error occured.")})}processMsProjectFile(e){const i=e.files;if(i.length>0){this.isProcessing=!0;const n=i.item(0);null!==n?this.buttonEvents.compileMsProject(n).subscribe(s=>{this.dashboard.updateProject(s,!1),this.isProcessing=!1,this.toastr.success("Processing MS Project","Success!")},s=>{console.error(s),this.isProcessing=!1,this.toastr.error("Processing MS Project","Error occured.")}):(console.error("First file selected is null"),this.isProcessing=!1,this.toastr.error("First file selected is null","Error occured."))}}setDependencyDataFromGraph(){null!==this.project&&(this.depCrawler.setDependencyDataFromGraph(this.project),this.toastr.success("Dependency Update","Success!"))}autogeneratePcds(){null!==this.project&&(this.pcdGenerator.autogeneratePcds(this.project),this.toastr.success("Generating Planned Completion Dates","Success!"))}resetIds(){null!==this.project&&(this.idGenerator.resetIds(this.project),this.depCrawler.setDependencyDataFromGraph(this.project),this.sorter.reorderIds(this.project),this.dashboard.updateProject(this.project,!1))}processCritPathFile(e){const i=e.files,n=i.item(0);null!==n&&i.length>0?this.fileManager.import(n).then(s=>{this.dashboard.updateProject(s,!0),this.toastr.success("Processing File","Success!")}).catch(s=>this.toastr.success("Processing File","Error occured")):this.toastr.error("No file selected","Error occured")}downloadCritPathFile(){this.fileManager.export(this.project)}toggleDummies(){null!==this.project&&(this.showDummies=!this.showDummies,this.eventService.get("activity.grid.view.dumimes").next(this.showDummies))}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(Ki),t.Y36(tn),t.Y36(z.Ou),t.Y36(z.WO),t.Y36(V.gz),t.Y36(en.Z),t.Y36(nn.I),t.Y36(sn.z),t.Y36(rn),t.Y36(on._W),t.Y36(Ie.v))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-grid-buttons"]],viewQuery:function(i,n){if(1&i&&t.Gf(an,7),2&i){let s;t.iGM(s=t.CRH())&&(n.fileUpload=s.first)}},decls:32,vars:5,consts:[["ng-show","vm.projectDataVisible",1,"sidebar-inner"],[1,"btn","btn-secondary",3,"click"],[1,"btn-group-toggle"],[1,"btn","btn-secondary",3,"ngClass"],["type","checkbox","autocomplete","off",3,"click"],[1,"title"],["type","file","accept",".xlsx",1,"file-input",3,"change"],["crPaFileUpload",""],["type","file","accept",".mpp",1,"file-input",3,"change"],["msFileUpload",""],[1,"overlay",3,"hidden"],[1,"overlay-txt"]],template:function(i,n){if(1&i){const s=t.EpF();t.TgZ(0,"div",0)(1,"a",1),t.NdJ("click",function(){return n.addActivity()}),t._uU(2,"Add Activity"),t.qZA(),t.TgZ(3,"span",2)(4,"label",3)(5,"input",4),t.NdJ("click",function(){return n.toggleDummies()}),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"div",5),t._uU(8,"Graph Building"),t.qZA(),t.TgZ(9,"a",1),t.NdJ("click",function(){return n.buildArrowChart()}),t._uU(10,"Generate Arrow Chart "),t.qZA(),t.TgZ(11,"a",1),t.NdJ("click",function(){t.CHM(s);const c=t.MAs(18);return c.value="",t.KtG(c.click())}),t._uU(12,"Upload MS Project File "),t.qZA(),t.TgZ(13,"a",1),t.NdJ("click",function(){t.CHM(s);const c=t.MAs(16);return c.value="",t.KtG(c.click())}),t._uU(14,"Load Critical Path File"),t.qZA(),t.TgZ(15,"input",6,7),t.NdJ("change",function(c){return n.processCritPathFile(c.target)}),t.qZA(),t.TgZ(17,"input",8,9),t.NdJ("change",function(c){return n.processMsProjectFile(c.target)}),t.qZA(),t.TgZ(19,"a",1),t.NdJ("click",function(){return n.downloadCritPathFile()}),t._uU(20,"Download Csv File "),t.qZA(),t.TgZ(21,"div",5),t._uU(22,"Data Population"),t.qZA(),t.TgZ(23,"a",1),t.NdJ("click",function(){return n.setDependencyDataFromGraph()}),t._uU(24,"Update Dependencies"),t.qZA(),t.TgZ(25,"a",1),t.NdJ("click",function(){return n.resetIds()}),t._uU(26,"Reset Ids"),t.qZA(),t.TgZ(27,"a",1),t.NdJ("click",function(){return n.autogeneratePcds()}),t._uU(28,"Gen PCD"),t.qZA(),t.TgZ(29,"div",10)(30,"div",11),t._uU(31,"Processing"),t.qZA()()()}2&i&&(t.xp6(4),t.Q6J("ngClass",t.VKq(3,cn,n.showDummies)),t.xp6(2),t.hij(" ",n.showDummies?"Hide Dummies":"Show Dummies"," "),t.xp6(23),t.Q6J("hidden",!n.isProcessing))},dependencies:[J.mk],styles:[".btn[_ngcontent-%COMP%]{width:100%;margin-bottom:2px;text-align:left;padding-left:26px}div[_ngcontent-%COMP%]{margin-top:26px;margin-bottom:6px}.title[_ngcontent-%COMP%]{padding-left:27px}.file-input[_ngcontent-%COMP%]{display:none}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;background-color:#00000080}.overlay-txt[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:20px;font-weight:700;color:#fff}"]})}return r})(),je=(()=>{class r{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["cp-activity-list-bar"]],decls:4,vars:0,consts:[[1,"grid-bar"],[1,"title"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Project Data"),t.qZA(),t._UZ(3,"cp-grid-buttons"),t.qZA())},dependencies:[ln],styles:["*[_ngcontent-%COMP%]{color:#bbb}.grid-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:27px;font-weight:700;font-size:1rem}"]})}return r})();var dn=_(9918),hn=_(4347);const pn=[{path:"",component:dn.r,children:[{path:":id",component:Ui,resolve:{items:Vt.D},canDeactivate:[$t.I]},{path:"arrow/:id",component:hn.m,outlet:"sidebar"},{path:"shallows/:id",component:Ni,outlet:"sidebar"},{path:"risk/:id",component:Bi,outlet:"sidebar"},{path:"stacked/:id",component:zi,outlet:"sidebar"},{path:"grid/:id",component:je,outlet:"sidebar"},{path:"metadata/:id",component:je,outlet:"sidebar"}]}];let un=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[V.Bz.forChild(pn),V.Bz]})}return r})();var gn=_(6724),fn=_(2381),de=_(2596),Ge=_(1281);let Je=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[J.ez]})}return r})(),_n=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[J.ez,de.AV,Ge.E,V.Bz,Je]})}return r})();var mn=_(40),vn=_(415);let yn=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[J.ez]})}return r})(),xn=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[J.ez]})}return r})(),bn=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[J.ez]})}return r})();var Cn=_(9810);let Pn=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[J.ez]})}return r})(),wn=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[J.ez,ni,Tt.FA,le.XK,ae.Ps,zt.c,Ht.lN,de.AV,tt.u5]})}return r})(),Dn=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[V.Bz,J.ez,un,gn.V,fn.m,tt.u5,tt.UX,Je,_n,Tt.FA,le.XK,ae.Ps,zt.c,Ht.lN,de.AV,ce.Bb,mn.S,Ge.E,vn.r,yn,xn,bn,Cn.M,Pn,wn]})}return r})()},9064:function(Ne,Rt){!function(_){"use strict";function V(p,v){return function Vt(p){if(Array.isArray(p))return p}(p)||function $t(p,v){var y=[],f=!0,h=!1,d=void 0;try{for(var x,m=p[Symbol.iterator]();!(f=(x=m.next()).done)&&(y.push(x.value),!v||y.length!==v);f=!0);}catch(C){h=!0,d=C}finally{try{!f&&null!=m.return&&m.return()}finally{if(h)throw d}}return y}(p,v)||function X(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function z(p,v,y,f){p=p.filter(function(k,L){var P=v(k,L),w=y(k,L);return null!=P&&isFinite(P)&&null!=w&&isFinite(w)}),f&&p.sort(function(k,L){return v(k)-v(L)});for(var M,R,j,h=p.length,d=new Float64Array(h),m=new Float64Array(h),x=0,C=0,S=0;S<h;)d[S]=M=+v(j=p[S],S,p),m[S]=R=+y(j,S,p),x+=(M-x)/++S,C+=(R-C)/S;for(var A=0;A<h;++A)d[A]-=x,m[A]-=C;return[d,m,x,C]}function t(p,v,y,f){for(var h=0,d=0,m=p.length;d<m;d++){var x=p[d],C=+v(x,d,p),M=+y(x,d,p);null!=C&&isFinite(C)&&null!=M&&isFinite(M)&&f(C,M,h++)}}function dt(p,v,y,f,h){var d=0,m=0;return t(p,v,y,function(x,C){var M=C-h(x),R=C-f;d+=M*M,m+=R*R}),1-d/m}function It(p){return 180*Math.atan2(p[1][1]-p[0][1],p[1][0]-p[0][0])/Math.PI}function J(p){return[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]}function ut(p,v,y){for(var f=Math.log(v-p)*Math.LOG10E+1|0,h=1*Math.pow(10,-f/2-1),m=[C(p),C(v)],x=0;M(m)&&x<1e4;);return m;function C(R){return[R,y(R)]}function M(R){x++;for(var j=R.length,S=!1,A=0;A<j-1;A++){var k=R[A],P=J([k,R[A+1]]),w=C(P[0]),D=It([k,P]),Z=It([k,w]);Math.abs(D-Z)>h&&(R.splice(A+1,0,w),S=!0)}return S}}function gt(p,v,y,f){var h=f-p*p,d=Math.abs(h)<1e-24?0:(y-p*v)/h;return[v-d*p,d]}function Ft(){var y,p=function(d){return d[0]},v=function(d){return d[1]};function f(h){var d=0,m=0,x=0,C=0,M=0,R=y?+y[0]:1/0,j=y?+y[1]:-1/0;t(h,p,v,function(D,Z){++d,m+=(D-m)/d,x+=(Z-x)/d,C+=(D*Z-C)/d,M+=(D*D-M)/d,y||(D<R&&(R=D),D>j&&(j=D))});var A=V(gt(m,x,C,M),2),k=A[0],L=A[1],P=function(Z){return L*Z+k},w=[[R,P(R)],[j,P(j)]];return w.a=L,w.b=k,w.predict=P,w.rSquared=dt(h,p,v,x,P),w}return f.domain=function(h){return arguments.length?(y=h,f):y},f.x=function(h){return arguments.length?(p=h,f):p},f.y=function(h){return arguments.length?(v=h,f):v},f}function Lt(p){p.sort(function(y,f){return y-f});var v=p.length/2;return v%1==0?(p[v-1]+p[v])/2:p[Math.floor(v)]}function ft(p){return(p=1-p*p*p)*p*p}function F(p,v,y){var f=p[v],h=y[0],d=y[1]+1;if(!(d>=p.length))for(;v>h&&p[d]-f<=f-p[h];)y[0]=++h,y[1]=d,++d}function Jt(){var y,p=function(d){return d[0]},v=function(d){return d[1]};function f(h){var w,D,Z,E,m=V(z(h,p,v),4),x=m[0],C=m[1],M=m[2],R=m[3],j=x.length,S=0,A=0,k=0,L=0,P=0;for(w=0;w<j;)D=x[w],Z=C[w++],S+=((E=D*D)-S)/w,A+=(E*D-A)/w,k+=(E*E-k)/w,L+=(D*Z-L)/w,P+=(E*Z-P)/w;var N=0,U=0,$=y?+y[0]:1/0,H=y?+y[1]:-1/0;t(h,p,v,function(W,rt){U++,N+=(rt-N)/U,y||(W<$&&($=W),W>H&&(H=W))});var nt=k-S*S,ot=S*nt-A*A,K=(P*S-L*A)/ot,st=(L*nt-P*A)/ot,et=-K*S,it=function(rt){return K*(rt-=M)*rt+st*rt+et+R},Y=ut($,H,it);return Y.a=K,Y.b=st-2*K*M,Y.c=et-st*M+K*M*M+R,Y.predict=it,Y.rSquared=dt(h,p,v,N,it),Y}return f.domain=function(h){return arguments.length?(y=h,f):y},f.x=function(h){return arguments.length?(p=h,f):p},f.y=function(h){return arguments.length?(v=h,f):v},f}_.regressionExp=function Et(){var y,p=function(d){return d[0]},v=function(d){return d[1]};function f(h){var d=0,m=0,x=0,C=0,M=0,R=0,j=y?+y[0]:1/0,S=y?+y[1]:-1/0;t(h,p,v,function(Z,E){var N=Math.log(E),U=Z*E;++d,m+=(E-m)/d,C+=(U-C)/d,R+=(Z*U-R)/d,x+=(E*N-x)/d,M+=(U*N-M)/d,y||(Z<j&&(j=Z),Z>S&&(S=Z))});var k=V(gt(C/m,x/m,M/m,R/m),2),L=k[0],P=k[1];L=Math.exp(L);var w=function(E){return L*Math.exp(P*E)},D=ut(j,S,w);return D.a=L,D.b=P,D.predict=w,D.rSquared=dt(h,p,v,m,w),D}return f.domain=function(h){return arguments.length?(y=h,f):y},f.x=function(h){return arguments.length?(p=h,f):p},f.y=function(h){return arguments.length?(v=h,f):v},f},_.regressionLinear=Ft,_.regressionLoess=function ct(){var p=function(d){return d[0]},v=function(d){return d[1]},y=.3;function f(h){for(var m=V(z(h,p,v,!0),4),x=m[0],C=m[1],M=m[2],R=m[3],j=x.length,S=Math.max(2,~~(y*j)),A=new Float64Array(j),k=new Float64Array(j),L=new Float64Array(j).fill(1),P=-1;++P<=2;){for(var w=[0,S-1],D=0;D<j;++D){for(var Z=x[D],E=w[0],N=w[1],$=0,H=0,nt=0,ot=0,K=0,st=1/Math.abs(x[Z-x[E]>x[N]-Z?E:N]-Z||1),et=E;et<=N;++et){var it=x[et],Y=C[et],W=ft(Math.abs(Z-it)*st)*L[et],rt=it*W;$+=W,H+=rt,nt+=Y*W,ot+=Y*rt,K+=it*rt}var wt=V(gt(H/$,nt/$,ot/$,K/$),2);A[D]=wt[0]+wt[1]*Z,k[D]=Math.abs(C[D]-A[D]),F(x,D+1,w)}if(2===P)break;var xt=Lt(k);if(Math.abs(xt)<1e-12)break;for(var lt,kt,ht=0;ht<j;++ht)L[ht]=(lt=k[ht]/(6*xt))>=1?1e-12:(kt=1-lt*lt)*kt}return function Kt(p,v,y,f){for(var M,h=p.length,d=[],m=0,x=0,C=[];m<h;++m)C[0]===(M=p[m]+y)?C[1]+=(v[m]-C[1])/++x:(x=0,C[1]+=f,d.push(C=[M,v[m]]));return C[1]+=f,d}(x,A,M,R)}return f.bandwidth=function(h){return arguments.length?(y=h,f):y},f.x=function(h){return arguments.length?(p=h,f):p},f.y=function(h){return arguments.length?(v=h,f):v},f},_.regressionLog=function Gt(){var f,p=function(m){return m[0]},v=function(m){return m[1]},y=Math.E;function h(d){var m=0,x=0,C=0,M=0,R=0,j=f?+f[0]:1/0,S=f?+f[1]:-1/0,A=Math.log(y);t(d,p,v,function(E,N){var U=Math.log(E)/A;++m,x+=(U-x)/m,C+=(N-C)/m,M+=(U*N-M)/m,R+=(U*U-R)/m,f||(E<j&&(j=E),E>S&&(S=E))});var L=V(gt(x,C,M,R),2),P=L[0],w=L[1],D=function(N){return w*Math.log(N)/A+P},Z=ut(j,S,D);return Z.a=w,Z.b=P,Z.predict=D,Z.rSquared=dt(d,p,v,C,D),Z}return h.domain=function(d){return arguments.length?(f=d,h):f},h.x=function(d){return arguments.length?(p=d,h):p},h.y=function(d){return arguments.length?(v=d,h):v},h.base=function(d){return arguments.length?(y=d,h):y},h},_.regressionPoly=function Wt(){var f,p=function(m){return m[0]},v=function(m){return m[1]},y=3;function h(d){if(1===y){var m=Ft().x(p).y(v).domain(f)(d);return m.coefficients=[m.b,m.a],delete m.a,delete m.b,m}if(2===y){var x=Jt().x(p).y(v).domain(f)(d);return x.coefficients=[x.c,x.b,x.a],delete x.a,delete x.b,delete x.c,x}var U,$,H,nt,ot,M=V(z(d,p,v),4),R=M[0],j=M[1],S=M[2],A=M[3],k=R.length,L=[],P=[],w=y+1,D=0,Z=0,E=f?+f[0]:1/0,N=f?+f[1]:-1/0;for(t(d,p,v,function(it,Y){++Z,D+=(Y-D)/Z,f||(it<E&&(E=it),it>N&&(N=it))}),U=0;U<w;++U){for(H=0,nt=0;H<k;++H)nt+=Math.pow(R[H],U)*j[H];for(L.push(nt),ot=new Float64Array(w),$=0;$<w;++$){for(H=0,nt=0;H<k;++H)nt+=Math.pow(R[H],U+$);ot[$]=nt}P.push(ot)}P.push(L);var K=function te(p){var f,h,d,m,x,v=p.length-1,y=[];for(f=0;f<v;++f){for(m=f,h=f+1;h<v;++h)Math.abs(p[f][h])>Math.abs(p[f][m])&&(m=h);for(d=f;d<v+1;++d)x=p[d][f],p[d][f]=p[d][m],p[d][m]=x;for(h=f+1;h<v;++h)for(d=v;d>=f;d--)p[d][h]-=p[d][f]*p[f][h]/p[f][f]}for(h=v-1;h>=0;--h){for(x=0,d=h+1;d<v;++d)x+=p[d][h]*y[d];y[h]=(p[v][h]-x)/p[h][h]}return y}(P),st=function(Y){var W=A+K[0]+K[1]*(Y-=S)+K[2]*Y*Y;for(U=3;U<w;++U)W+=K[U]*Math.pow(Y,U);return W},et=ut(E,N,st);return et.coefficients=function Xt(p,v,y,f){var d,m,x,C,h=Array(p);for(d=0;d<p;++d)h[d]=0;for(d=p-1;d>=0;--d)for(C=1,h[d]+=x=v[d],m=1;m<=d;++m)C*=(d+1-m)/m,h[d-m]+=x*Math.pow(y,m)*C;return h[0]+=f,h}(w,K,-S,A),et.predict=st,et.rSquared=dt(d,p,v,D,st),et}return h.domain=function(d){return arguments.length?(f=d,h):f},h.x=function(d){return arguments.length?(p=d,h):p},h.y=function(d){return arguments.length?(v=d,h):v},h.order=function(d){return arguments.length?(y=d,h):y},h},_.regressionPow=function Ut(){var y,p=function(d){return d[0]},v=function(d){return d[1]};function f(h){var d=0,m=0,x=0,C=0,M=0,R=0,j=y?+y[0]:1/0,S=y?+y[1]:-1/0;t(h,p,v,function(Z,E){var N=Math.log(Z),U=Math.log(E);++d,m+=(N-m)/d,x+=(U-x)/d,C+=(N*U-C)/d,M+=(N*N-M)/d,R+=(E-R)/d,y||(Z<j&&(j=Z),Z>S&&(S=Z))});var k=V(gt(m,x,C,M),2),L=k[0],P=k[1];L=Math.exp(L);var w=function(E){return L*Math.pow(E,P)},D=ut(j,S,w);return D.a=L,D.b=P,D.predict=w,D.rSquared=dt(h,p,v,R,w),D}return f.domain=function(h){return arguments.length?(y=h,f):y},f.x=function(h){return arguments.length?(p=h,f):p},f.y=function(h){return arguments.length?(v=h,f):v},f},_.regressionQuad=Jt,Object.defineProperty(_,"__esModule",{value:!0})}(Rt)}}]);