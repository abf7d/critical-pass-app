<ng-container *ngIf="!showLoading; else loadingMsg">
    <div class="page">
        <main>
            <div class="container">
                <div class="row video-ui">
                    <div class="col-3" [hidden]="isAuthorized || loginError">
                        <div>
                            <div>Welcome</div>
                            <h4 class="alert-text">You are not yet authorized</h4>
                            <div>You have created an account but still need to request authorization.</div>
                            <div class="contact">Contact <span class="address"> info&#64;criticalpath.design </span> to request access</div>
                            <button class="logout-btn" (click)="logout()">Logout</button>
                        </div>
                    </div>
                    <div class="col-3" [hidden]="!isAuthorized && !loginError">
                        <div>
                            <h2>Welcome {{ name }}</h2>
                            <div>
                                To get started a watch a training video or dive into an example project. Click the right menu to see more videos. A link to the
                                library of examples is provided below. Once you are ready open the app with the button below.
                            </div>
                            <div>
                                <button class="lib-btn" [ngClass]="{ disabled: !isAuthorized }" (click)="loadLibrary()">Open App</button>
                            </div>
                            <div>
                                <button class="logout-btn" (click)="logout()">Logout</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div *ngIf="isAuthorized && !loginError" class="materials">
                            <div>
                                <h3>Training Videos</h3>
                                <div class="video">
                                    <div>
                                        @switch (activeVideo) { @case ("arrow1") {

                                        <iframe
                                            width="860"
                                            height="505"
                                            src="https://www.youtube.com/embed/6vb-MKcynoM?vq=hd720p&amp;hd=1&amp;si=zGOsVuxj4lIEGBtL"
                                            title="Draw an Arrow Diagram"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                            referrerpolicy="strict-origin-when-cross-origin"
                                            allowfullscreen
                                        ></iframe>
                                        } @case ("arrowControls") {
                                        <iframe
                                            width="860"
                                            height="505"
                                            src="https://www.youtube.com/embed/cB35uUIFoP8?vq=hd720p&amp;hd=1&amp;si=jIsxPNEwoc-cbh1L"
                                            title="Arrow Diagram Controls"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                            referrerpolicy="strict-origin-when-cross-origin"
                                            allowfullscreen
                                        ></iframe>

                                        } @case("plannedCompletionDate") {
                                        <div class="video-title">3) Planned Completion Date (remove this)</div>
                                        <iframe
                                            width="760"
                                            height="455"
                                            src="https://www.youtube.com/embed/9tYdMbOTQh0"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen
                                        ></iframe>
                                        } @case("applicationLayout") {
                                        <iframe
                                            width="860"
                                            height="505"
                                            src="https://www.youtube.com/embed/R3kPmTzawCE?vq=hd720p&amp;hd=1&amp;si=HmDHijxNQPRuTAhI"
                                            title="YouTube video player"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                            referrerpolicy="strict-origin-when-cross-origin"
                                            allowfullscreen
                                        ></iframe>

                                        } @case("addSubprojects") {
                                        <div class="video-title">5) Creating / Viewing Subprojects</div>
                                        <iframe
                                            width="860"
                                            height="505"
                                            height="455"
                                            src="https://www.youtube.com/embed/EyuTQOcZ8Qs"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen
                                        ></iframe>

                                        } @case("projectNameDescription") {
                                        <div class="video-title">6) Project Name / Description and Shallow S</div>
                                        <iframe
                                            width="860"
                                            height="505"
                                            src="https://www.youtube.com/embed/xgHVsDu_omU"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen
                                        ></iframe>
                                        } @case("historyTracking") {
                                        <div class="video-title">7) History Tracking</div>
                                        <iframe
                                            width="860"
                                            height="505"
                                            src="https://www.youtube.com/embed/_gQTjtjEt30"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen
                                        ></iframe>
                                        } @case("uploadMSProjectFile") {
                                        <div class="video-title">8) Upload MS Project File</div>
                                        <iframe
                                            width="860"
                                            height="505"
                                            src="https://www.youtube.com/embed/Wx08PECJM4I"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen
                                        ></iframe>
                                        } @case("uploadExcelFile") {
                                        <iframe
                                            width="860"
                                            height="505"
                                            src="https://www.youtube.com/embed/tRR8aRHb4L4?vq=hd720p&amp;hd=1&amp;si=LPBhkhIOGu3Vu_JP"
                                            title="YouTube video player"
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                            referrerpolicy="strict-origin-when-cross-origin"
                                            allowfullscreen
                                        ></iframe>
                                        }}
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3>Example Projects</h3>
                                <a (click)="navigateToExamples()" href="javascript:void(0)">Full Example Library</a>
                                <div>
                                    <div [ngSwitch]="projectLoadState">
                                        <div *ngSwitchCase="'loading'">
                                            <div class="page-content">
                                                <div class="loading-placeholder"></div>
                                                <div class="loading-txt">Loading</div>
                                            </div>
                                        </div>
                                        <div *ngSwitchCase="'error'">
                                            <div class="page-content">
                                                <div class="loading-txt error">Error</div>
                                            </div>
                                        </div>
                                        <div *ngSwitchCase="'success'">
                                            <div class="page-content">
                                                <div *ngFor="let project of projects" class="user-proj">
                                                    <a (click)="navigate(project.profile.id)">
                                                        <cp-arrow-snapshot [project]="project" [width]="330" [height]="220"></cp-arrow-snapshot>
                                                    </a>
                                                    <div class="simple-label">{{ project.profile.name }} <span class="is-writable"> (w)</span></div>
                                                    <div class="project-description">
                                                        <i class="fa fa-code-fork network-icon" (click)="navigateSketch(project.profile.id)"></i>
                                                        <i class="fas fa-male assign-icon" (click)="navigateAssign(project.profile.id)"></i>
                                                        <i class="fa fa-network-wired" (click)="navigateMetaGraph(project.profile.id)"></i>
                                                        {{ project.profile.description }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div *ngSwitchDefault>
                                            <div class="page-content">
                                                <div class="loading-txt error">Unloaded</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div *ngIf="!isAuthorized && !loginError" class="card rounded-2">
                            <div class="card-body">
                                <div class="video-title">Request Access</div>
                                <form data-action="contact-us" method="post" class="form-submit-init" novalidate="true">
                                    <div class="row g-gs">
                                        <div class="col-12">
                                            <div class="form-group">
                                                <label class="form-label">Full Name</label>
                                                <div class="form-control-wrap">
                                                    <input type="text" name="name" class="form-control" placeholder="Enter your name" required="" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-label">Email</label>
                                                <div class="form-control-wrap">
                                                    <input type="email" name="email" class="form-control" placeholder="Enter your email" required="" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label class="form-label">Phone</label>
                                                <div class="form-control-wrap">
                                                    <input type="text" name="phone" class="form-control" placeholder="(555) 222-1234" required="" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group">
                                                <div class="form-label-group">
                                                    <label class="form-label">Tell us a bit about your query</label>
                                                    <span> <span id="char-count">0</span>/ <span id="char-max" data-char-max="255">255</span> </span>
                                                </div>
                                                <div class="form-control-wrap">
                                                    <textarea
                                                        id="textarea-box"
                                                        name="message"
                                                        class="form-control"
                                                        placeholder="Enter your message"
                                                        required=""
                                                    ></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <div class="form-group msg">
                                                <button class="btn btn-primary" type="submit" id="submit-btn">Send Message</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col menu">
                        <div class="video-list">
                            <div (click)="activeVideo = 'arrow1'" [ngClass]="{'selected': activeVideo === 'arrow1'}">Draw a Project</div>
                            <div (click)="activeVideo = 'arrowControls'" [ngClass]="{'selected': activeVideo === 'arrowControls'}">Arrow Controls</div>
                            <div (click)="activeVideo = 'uploadExcelFile'" [ngClass]="{'selected': activeVideo === 'uploadExcelFile'}">Import Data</div>
                            <div (click)="activeVideo = 'applicationLayout'" [ngClass]="{'selected': activeVideo === 'applicationLayout'}">
                                Application Layout
                            </div>
                            <div>
                                <a routerLink="/tutorials">More Videos...</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</ng-container>
<ng-template #loadingMsg>
    <div class="loading-container">
        <div class="loading-msg">Loading...</div>
    </div>
</ng-template>
