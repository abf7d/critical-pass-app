"use strict";(self.webpackChunkcritical_web=self.webpackChunkcritical_web||[]).push([[592],{12:(E,A,i)=>{i.d(A,{e:()=>o});var t=i(9862),O=i(7631),T=i(3830),h=i(9500),e=i(9212);let o=(()=>{class n{constructor(c){this.httpClient=c,this.baseUrl=O.N.criticalPathApi}getProjectLists(c){return this.httpClient.get((0,h.Z)(this.baseUrl,T.cP,c.toString()))}getGroupLists(c){const d=(new t.LE).set("filterTxt",c||"");return this.httpClient.get((0,h.Z)(this.baseUrl,T.xr),{params:d})}processProjectList(c,d){const g=JSON.stringify(d),s=(new t.WM).set("Content-Type","application/json");return this.httpClient.post((0,h.Z)(this.baseUrl,T.w1,c.toString()),g,{headers:s})}static#t=this.\u0275fac=function(d){return new(d||n)(e.LFG(t.eN))};static#e=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},3954:(E,A,i)=>{i.d(A,{F:()=>c});var t=i(5861),O=i(1374),T=i(9397),h=i(3633),e=i(3830),o=i(9315),n=i(9212),a=i(8962);let c=(()=>{class d{constructor(s,_,l,v,p,P){this.dashboard=s,this.projectApi=_,this.storageApi=l,this.historyApi=v,this.eventService=p,this.nodeConnector=P}resolve(s){var _=this;return(0,t.Z)(function*(){if(_.dashboard.secondaryProject$.next(null),+s.params.id===e.ph){const l=yield _.storageApi.get(e._k);return null!==l&&(l.profile.view.autoZoom=!0,_.dashboard.cleanSlateForNewPage(l)),_.dashboard.activeProject$.pipe((0,O.P)()).toPromise()}{const l=_.projectApi.get(s.params.id),v=_.historyApi.get(s.params.id);return(0,o.D)([l,v]).pipe((0,T.b)(([p,P])=>{P&&P.length>0?(_.importHistory(P),_.eventService.get("project.tree.history.file").next(P)):(_.nodeConnector.connectArrowsToNodes(p),_.dashboard.initializeActiveProject(p),_.eventService.get("project.tree.history.file").next(null))}),(0,O.P)()).toPromise()}})()}importHistory(s){s.forEach(_=>{this.nodeConnector.connectArrowsToNodes(_.data)})}static#t=this.\u0275fac=function(_){return new(_||d)(n.LFG(h.Ou),n.LFG(h.$6),n.LFG(h.$y),n.LFG(h.gF),n.LFG(h.WO),n.LFG(a.E))};static#e=this.\u0275prov=n.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()},6724:(E,A,i)=>{i.d(A,{V:()=>a});var t=i(6814),O=i(6223),T=i(5616),h=i(617),e=i(3680),o=i(179),n=i(9212);let a=(()=>{class c{static#t=this.\u0275fac=function(s){return new(s||c)};static#e=this.\u0275mod=n.oAB({type:c});static#o=this.\u0275inj=n.cJS({imports:[t.ez,O.u5,T.FA,e.XK,h.Ps,o.g]})}return c})()},2671:(E,A,i)=>{i.d(A,{D:()=>g});var t=i(9212),O=i(4403),T=i(4156),h=i(2596),e=i(6814);function o(s,_){if(1&s){const l=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.isSelFileType=!1)}),t.qZA()}}function n(s,_){if(1&s){const l=t.EpF();t.TgZ(0,"i",19),t.NdJ("click",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.isSelFileType=!0)}),t.qZA()}}function a(s,_){if(1&s){const l=t.EpF();t.TgZ(0,"div",22)(1,"input",25),t.NdJ("change",function(){t.CHM(l);const p=t.oxw(2);return t.KtG(p.fileType="electron-save")}),t.qZA(),t.TgZ(2,"label",26),t._uU(3,"sql"),t.qZA()()}if(2&s){const l=t.oxw(2);t.xp6(1),t.Q6J("checked","electron-save"===l.fileType)}}const c=s=>({height:s});function d(s,_){if(1&s){const l=t.EpF();t.TgZ(0,"div",20),t.YNc(1,a,4,1,"div",21),t.TgZ(2,"div",22)(3,"input",23),t.NdJ("change",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.fileType="json")}),t.qZA(),t.TgZ(4,"label",24),t._uU(5,"json"),t.qZA()(),t.TgZ(6,"div",22)(7,"input",25),t.NdJ("change",function(){t.CHM(l);const p=t.oxw();return t.KtG(p.fileType="xslx")}),t.qZA(),t.TgZ(8,"label",26),t._uU(9,"xlsx"),t.qZA()()()}if(2&s){const l=t.oxw();t.Q6J("ngStyle",t.VKq(4,c,l.saveMenuHeight)),t.xp6(1),t.Q6J("ngIf",l.allowSave),t.xp6(2),t.Q6J("checked","json"===l.fileType),t.xp6(4),t.Q6J("checked","xlsx"===l.fileType)}}let g=(()=>{class s{constructor(l){this.envService=l,this.disableButtons=!1,this.enableSave=!0,this.save=new t.vpe,this.load=new t.vpe,this.showHelp=!1,this.fileType=O.S6.JSON,this.isSelFileType=!1,this.resourceCount=null,this.allowSave=!1,this.saveMenuHeight="50px",this.allowSave=this.envService.isElectron,this.saveMenuHeight=this.allowSave?"70px":"50px"}saveDataTo(){this.enableSave&&this.save.emit(this.fileType)}loadFile(l){const v=l.files,p=v.item(0);null!==p&&v.length>0&&this.load.emit(p)}static#t=this.\u0275fac=function(v){return new(v||s)(t.Y36(T.L))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["da-file-action-buttons"]],inputs:{disableButtons:"disableButtons",enableSave:"enableSave"},outputs:{save:"save",load:"load"},decls:78,vars:9,consts:[[1,"btn","btn-secondary",3,"click"],["type","file","accept",".xlsx, .json",1,"file-input",3,"change"],["uploadFile",""],[1,"right"],["matTooltip","Go to Parent to enable buttons. Your changes will be preserved.",3,"matTooltipDisabled"],["tooltip","matTooltip"],["title","Download as file or save to database",1,"btn","btn-primary"],[3,"click"],["href","javascript:void(0)",1,"btn","pos-rel"],["class","fas fa-chevron-up",3,"click",4,"ngIf"],["class","fas fa-chevron-down",3,"click",4,"ngIf"],["class","peek file-types",3,"ngStyle",4,"ngIf"],[1,"btns"],[1,"fas","fa-times"],[1,"fas","fa-question-circle","help-btn",3,"click"],[1,"help",3,"hidden"],[1,"fa","fa-times","help-close",3,"click"],[1,"help-list"],[1,"fas","fa-chevron-up",3,"click"],[1,"fas","fa-chevron-down",3,"click"],[1,"peek","file-types",3,"ngStyle"],["class","custom-control custom-radio",4,"ngIf"],[1,"custom-control","custom-radio"],["type","radio","id","multi","name","create","value","multi",1,"custom-control-input",3,"checked","change"],["for","multi",1,"custom-control-label"],["type","radio","id","arrange",1,"custom-control-input",3,"checked","change"],["for","arrange",1,"custom-control-label"]],template:function(v,p){if(1&v){const P=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){t.CHM(P);const S=t.MAs(3);return S.value="",t.KtG(S.click())}),t._uU(1,"Load File"),t.qZA(),t.TgZ(2,"input",1,2),t.NdJ("change",function(S){return p.loadFile(S.target)}),t.qZA(),t.TgZ(4,"div",3)(5,"div",4,5)(7,"button",6)(8,"span",7),t.NdJ("click",function(){return p.saveDataTo()}),t._uU(9,"Save to"),t.qZA(),t.TgZ(10,"a",8),t.YNc(11,o,1,0,"i",9)(12,n,1,0,"i",10)(13,d,10,6,"div",11),t.qZA()()(),t.TgZ(14,"div",12),t._UZ(15,"i",13),t.TgZ(16,"i",14),t.NdJ("click",function(){return p.showHelp=!p.showHelp}),t.qZA(),t.TgZ(17,"div",15)(18,"i",16),t.NdJ("click",function(){return p.showHelp=!p.showHelp}),t.qZA(),t.TgZ(19,"h4"),t._uU(20,"Help"),t.qZA(),t.TgZ(21,"ol",17)(22,"li")(23,"b"),t._uU(24,"Create Node:"),t.qZA(),t._uU(25," Double click on arrow diagram background"),t.qZA(),t.TgZ(26,"li")(27,"b"),t._uU(28,"Move Node:"),t.qZA(),t._uU(29," Hold Ctrl key + drag node. (On Mac: Hold Command key + drag node)"),t.qZA(),t.TgZ(30,"li")(31,"b"),t._uU(32,"Create Arrow:"),t.qZA(),t._uU(33," Single click on one node and drag to another"),t.qZA(),t.TgZ(34,"li")(35,"b"),t._uU(36,"Select / Deselect Node:"),t.qZA(),t._uU(37," Click on node"),t.qZA(),t.TgZ(38,"li")(39,"b"),t._uU(40,"Select / Deselect Arrow:"),t.qZA(),t._uU(41," Click on Arrow body or Click on Text above arrow."),t.qZA(),t.TgZ(42,"li")(43,"b"),t._uU(44,"Delete Node / Arrow:"),t.qZA(),t._uU(45," Click to select node / arrow, press Delete (Command + Delete on Mac)"),t.qZA(),t.TgZ(46,"li")(47,"b"),t._uU(48,"Join two Nodes:"),t.qZA(),t._uU(49," Drag one Node over another and release."),t.qZA(),t.TgZ(50,"li")(51,"b"),t._uU(52,"Split Node:"),t.qZA(),t._uU(53," Click to select a Node with multiple in / out arrows then press Ctrl + X keys (Command + X keys on Mac)"),t.qZA(),t.TgZ(54,"li")(55,"b"),t._uU(56,"Make Node Dummy:"),t.qZA(),t._uU(57," Click to select Node and press Ctrl + D keys.(Command + D keys on Mac)"),t.qZA(),t.TgZ(58,"li")(59,"b"),t._uU(60,"Make Node Milestone:"),t.qZA(),t._uU(61," Click to select Node and press Ctrl + M keys.(Command + M keys on Mac)"),t.qZA(),t.TgZ(62,"li")(63,"b"),t._uU(64,"Load Sub Project:"),t.qZA(),t._uU(65," Click to select an Arrow with a '*' in the text above arrow. Click on 'Load Sub Graph' button in selected Activity info on left hand side "),t.qZA(),t.TgZ(66,"li")(67,"b"),t._uU(68,"Pan the arrow chart:"),t.qZA(),t._uU(69," Single click and drag background"),t.qZA(),t.TgZ(70,"li")(71,"b"),t._uU(72,"Initalize Risk:"),t.qZA(),t._uU(73," To calculate the arrow diagram risk, add start / end nodes in the lower right hand corner. To auto set the start and end nodes click 'Calculate Risk' "),t.qZA(),t.TgZ(74,"li")(75,"b"),t._uU(76,"Arrange Nodes:"),t.qZA(),t._uU(77," To arrange the nodes in a readable format click the 'Arrange Nodes' button to the bottom left of the arrow diagram "),t.qZA()()()()()}2&v&&(t.ekj("disabled",p.disableButtons),t.xp6(5),t.Q6J("matTooltipDisabled",!p.disableButtons),t.xp6(2),t.ekj("disabled",p.disableButtons||!p.enableSave),t.xp6(4),t.Q6J("ngIf",p.isSelFileType),t.xp6(1),t.Q6J("ngIf",!p.isSelFileType),t.xp6(1),t.Q6J("ngIf",p.isSelFileType),t.xp6(4),t.Q6J("hidden",!p.showHelp))},dependencies:[h.gM,e.O5,e.PC],styles:["[_nghost-%COMP%]{width:253px;display:flex}.btn-secondary[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:2px;background-color:#f9f9f9;color:#666}.btn-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.btn[_ngcontent-%COMP%]{font-size:.87rem}.border-right[_ngcontent-%COMP%]{border-right:1px solid #333}.stash[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#45f}div.right[_ngcontent-%COMP%]{display:flex;flex-direction:row}div.right[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 7px}div.file-types[_ngcontent-%COMP%]{display:block}.right[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 5px}.stash[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.btns[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding-top:3px}.help-btn[_ngcontent-%COMP%]{color:#999;cursor:pointer}.peek[_ngcontent-%COMP%]{width:410px;height:270px;position:absolute;border:1px solid #e9e9e9;z-index:1;background-color:#f9f9f9;top:38px;display:flex;align-items:center;justify-content:center}.file-types[_ngcontent-%COMP%]{width:88px;height:70px;position:absolute;border:1px solid #e9e9e9;z-index:1;background-color:#f9f9f9;top:34px;margin-left:-20px}.stash[_ngcontent-%COMP%], .pos-rel[_ngcontent-%COMP%]{position:relative}.help[_ngcontent-%COMP%]{position:absolute;top:18px;right:0;width:400px;height:auto;background-color:#fff;border-radius:5px;z-index:1000;padding:20px;box-shadow:1px 3px 5px #0000006b}.help[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{position:absolute;padding-top:10px}.help-container[_ngcontent-%COMP%]{position:relative}.help-close[_ngcontent-%COMP%]{position:absolute;right:13px;cursor:pointer;top:13px}.help-pointer[_ngcontent-%COMP%]{cursor:pointer;color:#999}.help-list[_ngcontent-%COMP%]{padding:55px 49px 35px}.alert-msg[_ngcontent-%COMP%]{background:#4a4;border:1px solid #ddd;position:fixed;height:70px;width:102px;text-align:center;vertical-align:center;padding-top:19px;left:50%;color:#fff;top:50%;font-size:18px;border-radius:15px;z-index:2000}.saved[_ngcontent-%COMP%]{background:#4a4;border:1px solid #ddd}.error[_ngcontent-%COMP%]{background:#a44;border:1px solid #ddd}.save-proj[_ngcontent-%COMP%]{display:inline}a.btn-primary[_ngcontent-%COMP%]{color:#fff}.top-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.overlay[_ngcontent-%COMP%]{position:fixed;width:100vw;height:100vh;inset:0;color:#fff;background-color:#00000080;z-index:100000;cursor:pointer}.overlay-txt[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:20px;font-weight:700}.btn-secondary.disabled[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.file-input[_ngcontent-%COMP%]{display:none}.baseline[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline}.auto-resources[_ngcontent-%COMP%]{width:42px;height:30px;border:1px solid #ccc;text-align:right}.btn-row[_ngcontent-%COMP%]   div.baseline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 2px}.pos-rel[_ngcontent-%COMP%]{margin-top:-7px;padding:0 0 0 3px}"]})}return s})()},5488:(E,A,i)=>{i.d(A,{L:()=>o});var t=i(6814),O=i(6223),T=i(2596),h=i(7586),e=i(9212);let o=(()=>{class n{static#t=this.\u0275fac=function(d){return new(d||n)};static#e=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[T.AV,O.u5,t.ez,h.Bz]})}return n})()},3994:(E,A,i)=>{i.d(A,{l:()=>P});var t=i(3830),O=i(3633),T=i(2181),h=i(2433),e=i(9212),o=i(9989),n=i(2119),a=i(9304);let c=(()=>{class C{constructor(r,m,u){this.nodeSerializer=r,this.projectSerializer=m,this.activitySerializer=u}extractSubProject(r,m){if(r.profile.view.isSubProjSelected){const u=r.activities.filter(y=>r.profile.view.lassoedLinks.indexOf(y.profile.id)>-1);let f=null,b=null,x=r.integrations.filter(y=>(r.profile.view.lassoStart===y.id&&(f=y),r.profile.view.lassoEnd===y.id&&(b=y),r.profile.view.lassoedNodes.indexOf(y.id)>-1&&f?.id!==y.id&&b?.id!==y.id));if(b&&f){const y=this.nodeSerializer.fromJson(f),L=this.nodeSerializer.fromJson(b);u.forEach(M=>{M.chartInfo.target_id===f.id&&(M.chartInfo.target=y),M.chartInfo.source_id===f.id&&(M.chartInfo.source=y),M.chartInfo.target_id===b.id&&(M.chartInfo.target=L),M.chartInfo.source_id===b.id&&(M.chartInfo.source=L)}),r.activities=r.activities.filter(M=>-1===u.indexOf(M)),r.integrations=[...r.integrations.filter(M=>-1===x.indexOf(M))],x=x.map(M=>this.nodeSerializer.fromJson(M)),x.push(y,L);const Z=this.projectSerializer.fromJson();let w=m-1;w>=-1&&(w=-2);const U=`Sub Project ${w}`;Z.profile.id=w,Z.profile.name=U,Z.activities=u,Z.integrations=[...x];const k=this.activitySerializer.fromJson(),D=Math.max(...r.activities.map(M=>M.profile.id))+1;return k.profile.id=D,k.chartInfo.source_id=f.id,k.chartInfo.target_id=b.id,k.subProject.graphId=w,k.subProject.subGraphId=w,k.profile.name=U,r.activities.push(k),r.profile.view.lassoStart=null,r.profile.view.lassoEnd=null,r.profile.view.lassoedLinks=[],r.profile.view.lassoedNodes=[],Z}}return null}static#t=this.\u0275fac=function(m){return new(m||C)(e.LFG(o.i),e.LFG(n.z),e.LFG(a.w))};static#e=this.\u0275prov=e.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();var d=i(7586),g=i(9728),s=i(9862),_=i(6814),l=i(9707);const v=C=>({active:C}),p=C=>({disabled:C});let P=(()=>{class C{constructor(r,m,u,f,b,x){this.dashboard=r,this.eventService=m,this.projectExtractor=u,this.router=f,this.storageApi=b,this.httpClient=x,this.project=null,this.activity=null,this.showLoadBtn=!1,this.projectName="",this.isLasso=!1,this.isSubProjSelected=!1,this.sampleFile="network",this.networkArray$=this.eventService.get(h.Zs),this.filteredNetworkArray$=this.eventService.get(h.eB)}ngOnInit(){this.router.url.includes("history")&&(this.sampleFile="scenarios"),this.sub=this.dashboard.activeProject$.pipe((0,T.h)(r=>!!r)).subscribe(r=>{this.project=r,this.projectName=r.profile.name,this.activity=r.profile.view.selectedActivity,this.isLasso=r.profile.view.lassoOn,this.isSubProjSelected=r.profile.view.isSubProjSelected})}downloadFile(){this.httpClient.get(`assets/sample-data/${this.sampleFile}.xlsx`,{responseType:"blob"}).subscribe(m=>{const u=new Blob([m],{type:"text/plain"}),f=window.URL.createObjectURL(u),b=document.createElement("a");b.href=f,b.download=`${this.sampleFile}.xlsx`,b.click(),window.URL.revokeObjectURL(f)})}updateProjectName(r){this.projectName=r.target.value,this.project&&(this.project.profile.name=this.projectName)}keyPress(r){"Enter"===r.key&&this.updateProjectName(r)}toggleLasso(r){this.project&&(this.project.profile.view.lassoOn=r,this.project.profile.view.lassoedLinks=[],this.project.profile.view.lassoedNodes=[],this.dashboard.updateProject(this.project,!0))}extractSubProject(){if(this.isSubProjSelected&&this.project){const r=this.networkArray$.getValue()??[],m=this.filteredNetworkArray$.getValue()??[];let u=Math.min(...r.map(b=>b.profile.id));u===1/0&&!this.project.profile.id&&(this.project.profile.id=-2,this.project.profile.name="Origin Project",u=-2),0===m.length&&m.push(this.project),0===r.length&&r.push(this.project);const f=this.projectExtractor.extractSubProject(this.project,u);f&&(m.push(f),r.push(f),this.networkArray$.next(r),this.filteredNetworkArray$.next(m)),this.dashboard.updateProject(this.project,!0)}}storeToSnapshot(){if(null!==this.project){const r=this.networkArray$.getValue()??[],m=this.filteredNetworkArray$.getValue()??[],u=r.find(b=>b.profile.id===this.project.profile.id),f=m.find(b=>b.profile.id===this.project.profile.id);(null===this.project.profile.id||0===this.project.profile.id)&&(this.project.profile.id=-1*(r.length+1)),u?(r.splice(r.indexOf(u),1),r.push(this.project)):(r.push(this.project),this.networkArray$.next(r)),f?(m.splice(m.indexOf(f),1),m.push(this.project)):(m.push(this.project),this.filteredNetworkArray$.next(m))}}ngOnDestroy(){this.sub?.unsubscribe(),this.routerSub?.unsubscribe()}navToProjProfile(){this.storageApi.set(t._k,this.project),this.router.navigateByUrl(h.d4)}navToScenarioPlanning(){this.storageApi.set(t._k,this.project),this.router.navigateByUrl(h.au)}static#t=this.\u0275fac=function(m){return new(m||C)(e.Y36(O.Ou),e.Y36(O.WO),e.Y36(c),e.Y36(d.F0),e.Y36(g.K),e.Y36(s.eN))};static#e=this.\u0275cmp=e.Xpm({type:C,selectors:[["cp-lasso-bar"]],decls:32,vars:14,consts:[[1,"meta-bar"],["href","javascript:void(0)",1,"btn",3,"click"],["type","text",3,"value","keypress","blur"],["href","javescript::void(0)",1,"dwnld-link",3,"click"],[1,"title"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-secondary","active",3,"ngClass"],["type","radio","id","float","value","float","name","bottom-text",1,"form-check-input",3,"click"],[1,"btn","btn-secondary",3,"ngClass"],["type","radio","id","under-none","value","under-none","name","bottom-text",1,"form-check-input",3,"click"],[1,"btn","btn-secondary",3,"ngClass","click"],[3,"projectPool"]],template:function(m,u){1&m&&(e.TgZ(0,"div",0)(1,"div")(2,"a",1),e.NdJ("click",function(){return u.navToProjProfile()}),e._uU(3,"Load Project in Profile"),e.qZA()(),e.TgZ(4,"div")(5,"a",1),e.NdJ("click",function(){return u.navToScenarioPlanning()}),e._uU(6,"Load in Scenarios"),e.qZA()(),e.TgZ(7,"div")(8,"div"),e._uU(9,"Project Name"),e.qZA(),e.TgZ(10,"input",2),e.NdJ("keypress",function(b){return u.keyPress(b)})("blur",function(b){return u.updateProjectName(b)}),e.qZA()(),e.TgZ(11,"div")(12,"a",3),e.NdJ("click",function(){return u.downloadFile()}),e._uU(13),e.qZA()(),e.TgZ(14,"div")(15,"div",4),e._uU(16,"Lasso Tool"),e.qZA(),e.TgZ(17,"div",5)(18,"label",6)(19,"input",7),e.NdJ("click",function(){return u.toggleLasso(!1)}),e.qZA(),e._uU(20," Off "),e.qZA(),e.TgZ(21,"label",8)(22,"input",9),e.NdJ("click",function(){return u.toggleLasso(!0)}),e.qZA(),e._uU(23," On "),e.qZA()()(),e.TgZ(24,"div")(25,"div"),e._uU(26,"Sub Project"),e.qZA(),e.TgZ(27,"div")(28,"button",10),e.NdJ("click",function(){return u.extractSubProject()}),e._uU(29,"Extract Sub Project"),e.qZA()()(),e._UZ(30,"cp-selected-activity",11),e.ALo(31,"async"),e.qZA()),2&m&&(e.xp6(10),e.Q6J("value",u.projectName),e.xp6(3),e.hij("Get Sample ",u.sampleFile," Data"),e.xp6(5),e.Q6J("ngClass",e.VKq(8,v,!u.isLasso)),e.xp6(3),e.Q6J("ngClass",e.VKq(10,v,u.isLasso)),e.xp6(7),e.Q6J("ngClass",e.VKq(12,p,!u.isSubProjSelected)),e.xp6(2),e.Q6J("projectPool",e.lcZ(31,6,u.networkArray$)))},dependencies:[_.mk,l.Z,_.Ov],styles:[".meta-bar[_ngcontent-%COMP%]{padding-left:27px;padding-right:16px}.meta-bar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#bbb}.meta-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff}.meta-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.meta-bar[_ngcontent-%COMP%]   ccp-selected-activity[_ngcontent-%COMP%]{border-bottom:1px solid #fff;display:block}.meta-bar[_ngcontent-%COMP%]   cp-selected-activity[_ngcontent-%COMP%], .meta-bar[_ngcontent-%COMP%]   cp-risk-decompress[_ngcontent-%COMP%]{padding-top:20px;display:block}.meta-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%]{display:flex}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:4px}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px}.meta-bar[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{color:#000}.meta-bar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active.btn-secondary:focus, .meta-bar[_ngcontent-%COMP%]   .btn-secondary.focus[_ngcontent-%COMP%]{color:#fff;background-color:#545b62;border-color:#4e555b}.meta-bar[_ngcontent-%COMP%]   .btn-secondary.active[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active.btn-secondary.active:focus, .meta-bar[_ngcontent-%COMP%]   .btn-secondary.focus[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}.meta-bar[_ngcontent-%COMP%]   .dwnld-link[_ngcontent-%COMP%]{text-transform:capitalize}"]})}return C})()},3148:(E,A,i)=>{i.d(A,{c:()=>T});var t=i(9212),O=i(325);let T=(()=>{class h{constructor(o){this.colorFactory=o}addTagGroup(o,n,a){o.tags||(o.tags=[]),a=Array.from(new Set(a));const c=o.tags.length,d=this.colorFactory.getSchemeByIndex(0),g=d.colors[c%d.colors.length],s=this.colorFactory.getSchemeByIndex(c),_=a.map((v,p)=>{const P=s.colors[p%s.colors.length];return{name:v,color:P.color,backgroundcolor:P.backgroundcolor}});o.tags.push({color:g.color,backgroundcolor:g.backgroundcolor,name:n,tags:_})}addTagGroupToProject(o,n){o.tags=o.tags??[],o.tags=o.tags.filter(a=>a.name!==n.name),o.tags.push({name:n.name,tags:n.tags.map(a=>({name:a.name,color:a.color,backgroundcolor:a.backgroundcolor})),color:n.color,backgroundcolor:n.backgroundcolor})}removeTagFromActivities(o,n,a){o.activities.forEach(c=>{if(c.tags){const d=c.tags.find(g=>g.name===n);d&&(d.tags=d.tags.filter(g=>g.name!==a.name))}})}removeTagGroupFromProject(o,n){o.tags&&(o.tags=o.tags.filter(a=>a.name!==n.name),o.activities.forEach(a=>{a.tags=a.tags??[],a.tags=a.tags.filter(c=>c.name!==n.name)}),o.profile.view.selectedTagGroup===n.name&&(o.profile.view.selectedTagGroup=null),o.tags=o.tags?.filter(a=>a.name!==n.name))}addNewTagGroup(o,n){o.tags||(o.tags=[]);const a=o.tags.length,c=this.colorFactory.getSchemeByIndex(0),d=c.colors[a%c.colors.length];o.tags.push({color:d.color,backgroundcolor:d.backgroundcolor,name:n,tags:[]})}createNewTag(o,n,a){const c=o.tags?.findIndex(l=>l.name===n)??0,d=this.colorFactory.getSchemeByIndex(c),g=o.tags?.find(l=>l.name===n)?.tags?.length??0,s=d.colors[g%d.colors.length];return{name:a,color:s.color,backgroundcolor:s.backgroundcolor}}addTagToActivities(o,n,a,c){if(!o.tags?.find(g=>g.name===a)&&o.tags){this.addNewTagGroup(o,a);const g=this.createNewTag(o,a,n);o.tags.find(s=>s.name===a)?.tags?.push(g)}c.forEach(g=>{const s=g.tags?.find(P=>P.name===a);if(s?.tags?.find(P=>P.name===n))return;const l=o?.tags?.find(P=>P.name===a)?.tags.find(P=>P.name===n),v={name:n,color:l?.color??"black",backgroundcolor:l?.backgroundcolor??"white"};if(s)return void s.tags.push(v);const p={name:a,tags:[v]};g.tags=g.tags??[],g.tags.push(p)})}assignTagsToSelectedActivities(o,n,a){const c=o.profile.view?.lassoedLinks,d=a.tags.filter(g=>n.indexOf(g.name)>-1);c?.length>0&&o.activities.filter(s=>c.indexOf(s.profile.id)>-1).forEach(s=>{const _={name:a.name,tags:d.map(l=>({name:l.name,color:l.color,backgroundcolor:l.backgroundcolor}))};s.tags=s.tags??[],s.tags=s.tags.filter(l=>l.name!==a.name),s.tags.push(_)}),this.clearLasso(o)}unassignFromActivities(o,n){const a=n.profile.view?.lassoedLinks;a?.length>0&&n.activities.filter(d=>a.indexOf(d.profile.id)>-1).forEach(d=>{d.tags&&(d.tags=d.tags.filter(g=>g.name!=o))}),this.clearLasso(n)}clearLasso(o){o.profile.view.lassoStart=null,o.profile.view.lassoEnd=null,o.profile.view.lassoedLinks=[],o.profile.view.lassoedNodes=[],o.profile.view.isSubProjSelected=!1}loadTags(o,n){let a=[],c=[],d=null;o.tags&&(a=o.tags.map(g=>({name:g.name,backgroundcolor:g.backgroundcolor,color:g.color,isSelected:o.profile.view.selectedTagGroup===g.name})),c=o.tags.map(g=>({name:g.name,tags:g.tags?.map(s=>({name:s.name,color:s.color,backgroundcolor:s.backgroundcolor,isSelected:!1}))})),o.profile.view.selectedTagGroup&&(d=c.find(g=>g.name===o.profile.view.selectedTagGroup)??null)),n.tags=a,n.groups=c,n.activeGroup=d}static#t=this.\u0275fac=function(n){return new(n||h)(t.LFG(O.r))};static#e=this.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);