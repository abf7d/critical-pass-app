"use strict";(self.webpackChunkcritical_web=self.webpackChunkcritical_web||[]).push([[268],{4688:(te,R,p)=>{p.r(R),p.d(R,{NetworkModule:()=>Ht});var x=p(6814),M=p(7586),X=p(7778),q=p(4347),tt=p(5836),k=p(3633),J=p(2181),S=p(2433),t=p(9212),et=p(8885),ot=p(2357),rt=p(7007),Y=p(4902),g=p(4403),m=p(1486),Z=p(2119),st=p(96),B=p(9635),W=p(2069),it=p(6265),nt=p(580),V=p(9304),at=p(5233),ct=p(7399),Q=p(9989),lt=p(6289),dt=p(6562);let pt=(()=>{class a{constructor(e,o,r,s,i,c,n,d,u,v,_,h,P,f,T,I){this.projectSerializer=e,this.projProfSerializer=o,this.treeNodeSerializer=r,this.resProfSerializer=s,this.resSerializer=i,this.resSumSerializer=c,this.roleSerializer=n,this.phaseSerializer=d,this.roleSumSerializer=u,this.asResSerializer=v,this.actSerializer=_,this.actProfSerializer=h,this.chartSerializer=P,this.intSerializer=f,this.subprojSerializer=T,this.projectSubProjectSerializer=I}setProp(e,o,r){return e[r]=o[r]}mapProject(e,o){const r=this.projProfSerializer.fromJson(),s=this.treeNodeSerializer.fromJson();if(e){const U=Object.keys(e);for(const G of U)r.hasOwnProperty(G)&&this.setProp(r,e,G),s.hasOwnProperty(G)&&this.setProp(s,e,G),s.parentNodeId=e[g.cT]??null,s.id=e[g.v0]??null}const{activityData:i,arrowData:c,integrationData:n,activityResourceData:d,activityPhaseData:u,rolesData:v,resourcesData:_,phaseData:h,resourceRoleData:P,tagPoolData:f,activityTagData:T,subProjectData:I}=o,l=this.mapActivities(e,i,c),b=this.mapResources(e,_),A=this.mapPhases(e,h),F=this.mapIntegrations(e,n),z=this.mapRoles(e,v),L=this.mapTagPool(e,f),N=this.mapSubProject(e,I);this.mapActivityTags(e,T,l),this.mapActivityResources(e,d,l),this.mapActivityPhases(e,u,l),this.mapResourceRoles(e,P,b);const C=this.projectSerializer.fromJson();return C.activities=l,C.integrations=F,C.profile=r,C.resources=b,C.phases=A,C.roles=z,C.tags=L,null!==N&&(C.profile.subProject=N),C}mapTagPool(e,o){const r=new Map,s=[];return o.filter(c=>c.nodeId===e.nodeId).forEach(c=>{let n=r.get(c.group);n||(n={name:c.group,tags:[],color:c.groupColor,backgroundcolor:c.groupBackgroundcolor},r.set(c.group,n),s.push({index:c.index,group:n})),c.name&&n.tags.push({color:c.color,backgroundcolor:c.backgroundcolor,name:c.name})}),s.sort((c,n)=>c.index-n.index).map(c=>c.group)}mapActivityTags(e,o,r){const s=new Map;o.filter(i=>i.nodeId===e.nodeId).forEach(i=>{const c=r.find(n=>n.profile.id===i.activityId);if(c){let n=s.get(c.profile.id);n||(n=new Map,s.set(c.profile.id,n),c.tags=[]);let d=n.get(i.group);d||(d={name:i.group,tags:[]},n.set(i.group,d),c.tags?.push(d)),d.tags.push({color:i.color,backgroundcolor:i.backgroundcolor,name:i.name})}})}mapSubProject(e,o){const r=o.filter(s=>s.nodeId===e.nodeId).map(s=>{const i=this.projectSubProjectSerializer.fromJson(),c=Object.keys(s);for(const n of c)i.hasOwnProperty(n)&&this.setProp(i,s,n);return i});return 1===r.length?r[0]:null}mapResources(e,o){return o.filter(s=>s.nodeId===e.nodeId).map(s=>{const i=this.resProfSerializer.fromJson(),c=Object.keys(s);for(const d of c)i.hasOwnProperty(d)&&this.setProp(i,s,d);const n=this.resSerializer.fromJson();return n.profile=i,n.id=s.id,n.view.color.color=s.colorV,n.view.color.backgroundcolor=s.backgroundcolor,n})}mapRoles(e,o){return o.filter(s=>s.nodeId===e.nodeId).map(s=>{const i=this.roleSerializer.fromJson(),c=Object.keys(s);for(const n of c)i.hasOwnProperty(n)&&this.setProp(i,i,n);return i.view.color=s.backgroundcolor,i})}mapPhases(e,o){return o.filter(s=>s.nodeId===e.nodeId).map(s=>{const i=this.phaseSerializer.fromJson(),c=Object.keys(s);for(const n of c)i.hasOwnProperty(n)&&this.setProp(i,s,n);return i.view.color.color=s.colorV,i.view.color.backgroundcolor=s.backgroundcolor,i})}mapResourceRoles(e,o,r){const s=this.roleSumSerializer;o.filter(i=>i.nodeId===e.nodeId).forEach(i=>{const c=r.find(u=>u.id===i.resourceId),n=s.fromJson(),d=Object.keys(i);for(const u of d)n.hasOwnProperty(u)&&this.setProp(n,i,u);n.color=i.colorV,c?.assign.roles.push(n)})}mapActivityResources(e,o,r){const s=this.resSumSerializer;o.filter(i=>i.nodeId===e.nodeId).forEach(i=>{const c=r.find(u=>u.profile.id===i.activityId),n=s.fromJson(),d=Object.keys(i);for(const u of d)n.hasOwnProperty(u)&&this.setProp(n,i,u);n.color.color=i.colorV,n.color.backgroundcolor=i.backgroundcolor,c?.assign.resources.push(n)})}mapActivityPhases(e,o,r){}mapActivities(e,o,r){const s=this.asResSerializer;return o.filter(c=>c.nodeId===e.nodeId).map(c=>{const n=this.actSerializer.fromJson(),d=this.actProfSerializer.fromJson(),u=Object.keys(c);for(const h of u)d.hasOwnProperty(h)&&this.setProp(d,c,h);const v=this.subprojSerializer.fromJson();v.isParent=c.isParent,v.subGraphId=c.subGraphId,v.graphId=c.graphId,n.profile=d,n.subProject=v;const _=r.filter(h=>h.nodeId===e.nodeId).find(h=>h.id===c.id);if(_){const h=this.chartSerializer.fromJson(),P=Object.keys(_);for(const f of P)h.hasOwnProperty(f)&&this.setProp(h,_,f);n.chartInfo=h}return c.assign=s.fromJson(),this.setActivityDates(n),n}).filter(c=>void 0!==c.chartInfo.source_id&&c.chartInfo.source_id!==c.chartInfo.target_id||void 0===c.chartInfo.source_id)}setActivityDates(e){}mapIntegrations(e,o){return o.filter(s=>s.nodeId===e.nodeId).map(s=>{const i=this.intSerializer.fromJson(),c=Object.keys(s);for(const n of c)i.hasOwnProperty(n)&&this.setProp(i,s,n);return i})}getHistoryEntryWorkbook(e){const o=e,r={name:e.profile.name,nodeId:e.profile.id},s=o.activities.map(l=>({...l.profile,graphId:o.profile.id,nodeId:r.nodeId,subGraphId:l.subProject.subGraphId,isParent:l.subProject.isParent})),i=o.activities.map(l=>({...l.chartInfo,id:l.profile.id,graphId:o.profile.id,nodeId:r.nodeId})),c=o.integrations.map(l=>({...l,nodeId:r.nodeId})),n={...o.profile,...r},d={...o.profile.subProject,graphId:o.profile.id,nodeId:r.nodeId},u=o.phases.map(l=>({...l,backgroundcolor:l.view.color?.backgroundcolor,colorV:l.view.color?.color,view:void 0,graphId:o.profile.id,nodeId:r.nodeId})),v=o.resources.map(l=>({...l.profile,colorV:l.view.color?.color,backgroundcolor:l.view.color?.backgroundcolor,id:l.id,graphId:o.profile.id,nodeId:r.nodeId})),_=o.roles.map(l=>({...l,backgroundcolor:l.view.color?.backgroundcolor,colorV:l.view.color?.color,view:void 0,graphId:o.profile.id,nodeId:r.nodeId}));let h=[],P=[];o.tags&&o.tags.map((l,b)=>l.tags?.length?l.tags.map(A=>({...A,group:l.name,graphId:o.profile.id,nodeId:r.nodeId,groupColor:l.color,groupBackgroundcolor:l.backgroundcolor,index:b})):[{group:l.name,graphId:o.profile.id,nodeId:r.nodeId,groupColor:l.color,groupBackgroundcolor:l.backgroundcolor,index:b}]).map(l=>P=[...l,...P]),o.activities.map(l=>l.assign.phases.map(b=>({...b,activityId:l.profile.id,graphId:o.profile.id,nodeId:r.nodeId}))).map(l=>h=[...l,...h]);let f=[];o.activities.map(l=>l.assign.resources.map(b=>({...b,colorV:b.color.color,backgroundcolor:b.color.backgroundcolor,activityId:l.profile.id,graphId:o.profile.id,nodeId:r.nodeId}))).map(l=>f=[...l,...f]);let T=[];o.resources.map(l=>l.assign.roles.map(b=>({...b,resourceId:l.id,graphId:o.profile.id,nodeId:r.nodeId}))).map(l=>T=[...l,...T]);const I=[];return o.activities.forEach(l=>{l.tags?.forEach(b=>{b.tags.forEach(A=>{I.push({...A,group:b.name,activityId:l.profile.id,graphId:o.profile.id,nodeId:r.nodeId})})})}),{profiles:s,nodes:c,chartInfos:i,projProfile:n,subProject:d,phases:u,resources:v,roles:_,activityPhases:h,activityResources:f,resourceRoles:T,tagPool:P,activityTags:I}}static#t=this.\u0275fac=function(o){return new(o||a)(t.LFG(Z.z),t.LFG(Z._),t.LFG(st.Q),t.LFG(B.Ne),t.LFG(B.H4),t.LFG(B.k1),t.LFG(W.Jl),t.LFG(it.Ek),t.LFG(W.tB),t.LFG(nt.e),t.LFG(V.w),t.LFG(at.C),t.LFG(ct.I),t.LFG(Q.i),t.LFG(lt.j),t.LFG(dt.M))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),ut=(()=>{class a{constructor(e){this.mapper=e}export(e,o="network"){let r=[],s=[],i=[],c=[],n=[],d=[],u=[],v=[],_=[],h=[],P=[],f=[],T=[];for(const qt of e){const y=this.mapper.getHistoryEntryWorkbook(qt);r=[...r,...y.profiles],s=[...s,...y.chartInfos],i=[...i,...y.nodes],c=[...c,y.projProfile],n=[...n,y.subProject],d=[...d,...y.phases],u=[...u,...y.roles],v=[...v,...y.resources],_=[..._,...y.activityResources],h=[...h,...y.activityPhases],P=[...P,...y.resourceRoles],T=[...T,...y.tagPool],f=[...f,...y.activityTags]}const I=m.P6.json_to_sheet(r),l=m.P6.json_to_sheet(i),b=m.P6.json_to_sheet(s),A=m.P6.json_to_sheet(c),F=m.P6.json_to_sheet(n),z=m.P6.json_to_sheet(d),L=m.P6.json_to_sheet(u),N=m.P6.json_to_sheet(v),C=m.P6.json_to_sheet(_),U=m.P6.json_to_sheet(h),G=m.P6.json_to_sheet(P),Kt=m.P6.json_to_sheet(T),Et=m.P6.json_to_sheet(f),w=m.P6.book_new();m.P6.book_append_sheet(w,I,g.SI),m.P6.book_append_sheet(w,b,g.tu),m.P6.book_append_sheet(w,l,g.dt),m.P6.book_append_sheet(w,A,g.nE),m.P6.book_append_sheet(w,F,g.N4),m.P6.book_append_sheet(w,z,g.nQ),m.P6.book_append_sheet(w,L,g.FU),m.P6.book_append_sheet(w,N,g.u_),m.P6.book_append_sheet(w,C,g.vx),m.P6.book_append_sheet(w,U,g.Lc),m.P6.book_append_sheet(w,G,g._w),m.P6.book_append_sheet(w,Kt,g.Nz),m.P6.book_append_sheet(w,Et,g.MP),m.NC(w,`${o}.cp.xlsx`)}import(e){return new Promise((o,r)=>{const s=new FileReader;s.readAsBinaryString(e),s.onload=i=>{const n=m.ij(i.target.result,{type:"binary",cellDates:!0}),d=this.getWorksheetData(n,g.SI),u=this.getWorksheetData(n,g.tu),v=this.getWorksheetData(n,g.dt),_=this.getWorksheetData(n,g.nE),h=this.getWorksheetData(n,g.N4),z={phaseData:this.getWorksheetData(n,g.nQ),rolesData:this.getWorksheetData(n,g.FU),resourcesData:this.getWorksheetData(n,g.u_),activityResourceData:this.getWorksheetData(n,g.vx),activityPhaseData:this.getWorksheetData(n,g.Lc),resourceRoleData:this.getWorksheetData(n,g._w),activityData:d,arrowData:u,integrationData:v,tagPoolData:this.getWorksheetData(n,g.Nz),activityTagData:this.getWorksheetData(n,g.MP),subProjectData:h},L=_.map(N=>this.mapper.mapProject(N,z));o(L)}})}getWorksheetData(e,o){return m.P6.sheet_to_json(e.Sheets[o])}static#t=this.\u0275fac=function(o){return new(o||a)(t.LFG(pt))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var ht=p(9680),D=p(8962);let gt=(()=>{class a{constructor(e,o,r){this.projSerializer=e,this.sanitizer=o,this.nodeConnector=r}import(e){return this.importFromProjectList(e)}importFromProjectList(e){return new Promise((o,r)=>{const s=new FileReader;s.readAsText(e),s.onload=i=>{const n=JSON.parse(i.target.result),d=new Z.z,u=n.map(v=>{const _=d.fromJson(v);return this.nodeConnector.connectArrowsToNodes(_),_});o(u)}})}export(e,o="network"){const r=e.map(n=>{const d=this.projSerializer.fromJson(n);return this.sanitizer.sanatizeForSave(d),d}),s=JSON.stringify(r),i=new Blob([s],{type:"application/json"}),c=document.createElement("a");c.href=window.URL.createObjectURL(i),c.download=`${o}.cp.json`,c.click()}static#t=this.\u0275fac=function(o){return new(o||a)(t.LFG(Z.z),t.LFG(ht.B),t.LFG(D.E))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var H=p(2425),ft=p(2671);let mt=(()=>{class a{constructor(e,o,r,s,i,c,n,d,u,v){this.eventService=e,this.networkApi=o,this.dashboard=r,this.route=s,this.router=i,this.fileManager=c,this.jsonFileManager=n,this.nodeConnector=d,this.toastr=u,this.ngZone=v,this.networkArray$=this.eventService.get(S.Zs),this.filteredNetworkArray$=this.eventService.get(S.eB)}ngOnInit(){this.id=+this.route.snapshot.params.id}navToSingleGraph(){this.router.navigateByUrl(`network/(${this.id}//sidebar:arrow/${this.id})`)}navToMetaGraph(){this.router.navigateByUrl(`network/(${this.id}//sidebar:meta/${this.id})`)}saveByDownload(e){const o=this.networkArray$.getValue();o&&(e===g.S6.JSON?this.jsonFileManager.export(o):e===g.S6.XLSX?this.fileManager.export(o):e===g.S6.ELECTRON_SAVE&&this.networkApi.post(this.id,o).subscribe(r=>{this.ngZone.run(()=>{r?this.toastr.success("Network saved","Success"):this.toastr.error("Network not saved","Error")})}))}loadFileByUpload(e){const o=e.name.split(".").pop();o===g.S6.XLSX?this.fileManager.import(e).then(r=>{r.forEach(i=>{this.nodeConnector.connectArrowsToNodes(i)});let s=Math.min(...r.map(i=>i.profile.id));s>=0&&(s=-1),s-=1,this.eventService.get(Y.P).next(s),this.networkArray$.next([...r]),this.filteredNetworkArray$.next([...r]),this.dashboard.updateProject(r[0],!0)}):o===g.S6.JSON&&this.jsonFileManager.import(e).then(r=>{r.forEach(i=>{this.nodeConnector.connectArrowsToNodes(i)});let s=Math.min(...r.map(i=>i.profile.id));s>=0&&(s=-1),s-=1,this.eventService.get(Y.P).next(s),this.networkArray$.next([...r]),this.filteredNetworkArray$.next([...r]),this.dashboard.updateProject(r[0],!0)})}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(k.WO),t.Y36(k.id),t.Y36(k.Ou),t.Y36(M.gz),t.Y36(M.F0),t.Y36(ut),t.Y36(gt),t.Y36(D.E),t.Y36(H._W),t.Y36(t.R0b))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["proj-meta-buttons"]],decls:8,vars:0,consts:[[1,"bars"],["href","javascript:void(0)",1,"btn","btn-secondary",3,"click"],[3,"save","load"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div")(2,"a",1),t.NdJ("click",function(){return r.navToSingleGraph()}),t._uU(3,"Base Controls"),t.qZA(),t.TgZ(4,"a",1),t.NdJ("click",function(){return r.navToMetaGraph()}),t._uU(5,"Meta Controls"),t.qZA()(),t.TgZ(6,"div")(7,"da-file-action-buttons",2),t.NdJ("save",function(i){return r.saveByDownload(i)})("load",function(i){return r.loadFileByUpload(i)}),t.qZA()()())},dependencies:[ft.D],styles:[".bars[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]{margin-right:10px;margin-top:10px}.bars[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%]:first-child{margin-left:10px}.file-input[_ngcontent-%COMP%]{display:none}.bars[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;padding-right:30px}.btn-secondary[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:2px;background-color:#f9f9f9;color:#666}"]})}return a})();var vt=p(325),_t=p(3148),$=p(6223);const bt=(a,j)=>({fill:a,stroke:j});function Pt(a,j){if(1&a){const e=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.select(s))}),t.O4$(),t.TgZ(1,"svg"),t._UZ(2,"circle",9),t.qZA(),t._uU(3),t.kcU(),t.TgZ(4,"span",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.remove(s))}),t._uU(5,"x"),t.qZA()()}if(2&a){const e=j.$implicit;t.Udp("background-color",e.isSelected?e.backgroundcolor:"#bbb")("color",e.isSelected?e.color:"white"),t.xp6(2),t.Q6J("ngStyle",t.WLB(6,bt,e.backgroundcolor,e.isSelected?"white":"")),t.xp6(1),t.hij(" ",e.name," ")}}let jt=(()=>{class a{constructor(){this.multiselect=!1,this.tags=[],this.assignTags=new t.vpe,this.unassignTags=new t.vpe,this.selectTag=new t.vpe,this.removeTag=new t.vpe,this.addTag=new t.vpe,this.newTag="",this.assign=()=>this.assignTags.emit(this.tags.filter(e=>e.isSelected).map(e=>e.name)),this.removeAll=()=>this.unassignTags.emit(),this.select=e=>{this.selectTag.emit(e.name),this.multiselect||this.tags.forEach(o=>{o.name!==e.name&&(o.isSelected=!1)}),e.isSelected=!e.isSelected},this.remove=e=>this.removeTag.emit(e)}add(e){const o=e.value;this.tags.find(r=>r.name===o)||(this.addTag.emit(o),this.newTag="")}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["proj-tag-group"]],inputs:{title:"title",nameAttr:"nameAttr",colorBucket:"colorBucket",multiselect:"multiselect",tags:"tags",hideAssignLinks:"hideAssignLinks"},outputs:{assignTags:"assignTags",unassignTags:"unassignTags",selectTag:"selectTag",removeTag:"removeTag",addTag:"addTag"},decls:13,vars:4,consts:[[1,"actions"],[1,"tag-title"],[1,"float-right","assign-button",3,"hidden"],["href","javascript:void(0)",3,"click"],[1,"center"],[1,"tags"],["type","button","class","btn btn-light tag-btn",3,"background-color","color","click",4,"ngFor","ngForOf"],["type","text","placeholder","Type Name",1,"add-tag",3,"ngModel","ngModelChange","change"],["type","button",1,"btn","btn-light","tag-btn",3,"click"],["r","7","cx","8","cy","12",3,"ngStyle"],[1,"remove",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2),t.qZA(),t.TgZ(3,"span",2)(4,"a",3),t.NdJ("click",function(){return r.assign()}),t._uU(5,"Assign To Activities"),t.qZA(),t.TgZ(6,"span",4),t._uU(7,"|"),t.qZA(),t.TgZ(8,"a",3),t.NdJ("click",function(){return r.removeAll()}),t._uU(9,"Unassign"),t.qZA()()(),t.TgZ(10,"div",5),t.YNc(11,Pt,6,9,"button",6),t.TgZ(12,"input",7),t.NdJ("ngModelChange",function(i){return r.newTag=i})("change",function(i){return r.add(i.target)}),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(r.title),t.xp6(1),t.Q6J("hidden",r.hideAssignLinks),t.xp6(8),t.Q6J("ngForOf",r.tags),t.xp6(1),t.Q6J("ngModel",r.newTag))},dependencies:[x.sg,x.PC,$.Fj,$.JJ,$.On],styles:[".tags[_ngcontent-%COMP%]{overflow:auto;cursor:text;background-color:#fff;height:auto;border-radius:0;width:auto;display:flex;flex-wrap:wrap}.add-tag[_ngcontent-%COMP%]{margin:2px;width:125px!important;background-color:#fff;height:40px;padding:3px 3px 3px 12px;border:none!important}.actions[_ngcontent-%COMP%]{width:auto;padding:10px 10px 7px}.assign-button[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:10px}.tag-btn[_ngcontent-%COMP%]{padding:5px 12px 0 6px;height:37px;border:1px solid #acacac;border-radius:3px;background:none;margin:5px;font-size:15px;display:flex}.tag-title[_ngcontent-%COMP%]{font-weight:700}.add-tag[_ngcontent-%COMP%]{background-color:#eed}svg[_ngcontent-%COMP%]{width:18px;height:23px}.remove[_ngcontent-%COMP%]{padding-left:4px}"]})}return a})();function wt(a,j){if(1&a){const e=t.EpF();t.TgZ(0,"proj-tag-group",3),t.NdJ("selectTag",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.selectGroup(r))})("removeTag",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.removeGroup(r))})("addTag",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.addGroup(r))}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("tags",e.tagGroups.tags)("hideAssignLinks",!0)}}function kt(a,j){if(1&a){const e=t.EpF();t.TgZ(0,"proj-tag-group",6),t.NdJ("assignTags",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.assignToActivities(r))})("unassignTags",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.unassignFromActivities())})("selectTag",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectTag(r))})("removeTag",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.removeTag(r))})("addTag",function(r){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addTag(r))}),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("title",e.activeGroup.name)("tags",e.activeGroup.tags)("multiselect",!0)}}function Tt(a,j){if(1&a&&(t.TgZ(0,"div",4),t.YNc(1,kt,1,3,"proj-tag-group",5),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!!e.activeGroup)}}let yt=(()=>{class a{constructor(e,o,r,s){this.dashboard=o,this.colorFactory=r,this.metaTagService=s,this.isResourceView=!0,this.availableGroups=[],this.activeGroup=null,this.id=+e.snapshot.params.id,this.project$=this.dashboard.activeProject$,this.tagGroups={name:"Tag Group",tags:[]},this.availableGroups=[]}ngOnInit(){this.subscription=this.project$.pipe((0,J.h)(e=>!!e)).subscribe(e=>{if(e!==this.project){const o={tags:[],groups:[],activeGroup:null};this.metaTagService.loadTags(e,o),this.tagGroups.tags=o.tags,this.availableGroups=o.groups,this.activeGroup=o.activeGroup}this.project=e})}ngOnDestroy(){this.subscription?.unsubscribe()}assignToActivities(e){this.metaTagService.assignTagsToSelectedActivities(this.project,e,this.activeGroup),this.dashboard.updateProject(this.project,!0)}unassignFromActivities(){this.metaTagService.unassignFromActivities(this.activeGroup.name,this.project),this.dashboard.updateProject(this.project,!0)}selectTag(e){}removeTag(e){if(null!==this.activeGroup&&void 0!==this.project&&void 0!==this.project.tags){this.activeGroup.tags.splice(this.activeGroup.tags.indexOf(e),1);const o=this.project.tags.find(r=>r.name===this.activeGroup.name)?.tags.indexOf(e);o&&o>-1&&this.project.tags.find(r=>r.name===this.activeGroup.name)?.tags.splice(o,1),this.metaTagService.removeTagFromActivities(this.project,this.activeGroup.name,e),this.dashboard.updateProject(this.project,!0)}}addTag(e){if(null!==this.activeGroup){const o=this.availableGroups.indexOf(this.activeGroup),r=this.creatNewTag(e,this.activeGroup.tags.length,o);this.activeGroup.tags.push(r),this.project.tags&&(this.project.tags.find(s=>s.name===this.activeGroup.name)?.tags.push(r),this.dashboard.updateProject(this.project,!0))}}selectGroup(e){if(this.project.profile.view.selectedTagGroup===e)this.project.profile.view.selectedTagGroup=null,this.activeGroup=null;else{const o=this.availableGroups.find(r=>r.name===e);o&&(this.activeGroup=o),this.project.profile.view.selectedTagGroup=e}this.dashboard.updateProject(this.project,!0)}removeGroup(e){this.tagGroups.tags.splice(this.tagGroups.tags.indexOf(e),1);const o=this.availableGroups.findIndex(r=>r.name===e.name);o>-1&&(this.metaTagService.removeTagGroupFromProject(this.project,e),this.availableGroups.splice(o,1)),this.dashboard.updateProject(this.project,!0)}addGroup(e){const o=this.creatNewTag(e,this.tagGroups.tags.length,0);this.tagGroups.tags.push(o),this.availableGroups.push({name:e,tags:[]}),this.metaTagService.addTagGroupToProject(this.project,{name:e,tags:[],color:o.color,backgroundcolor:o.backgroundcolor}),this.dashboard.updateProject(this.project,!0)}creatNewTag(e,o,r){const s=this.colorFactory.getSchemeByIndex(r),i=s.colors[o%s.colors.length];return{name:e,color:i.color,backgroundcolor:i.backgroundcolor,isSelected:!1}}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(M.gz),t.Y36(k.Ou),t.Y36(vt.r),t.Y36(_t.c))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["proj-meta-tags"]],decls:3,vars:2,consts:[[1,"chart-options","group"],["title","Tag Groups",3,"tags","hideAssignLinks","selectTag","removeTag","addTag",4,"ngIf"],["class","group",4,"ngIf"],["title","Tag Groups",3,"tags","hideAssignLinks","selectTag","removeTag","addTag"],[1,"group"],[3,"title","tags","multiselect","assignTags","unassignTags","selectTag","removeTag","addTag",4,"ngIf"],[3,"title","tags","multiselect","assignTags","unassignTags","selectTag","removeTag","addTag"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.YNc(1,wt,1,2,"proj-tag-group",1),t.qZA(),t.YNc(2,Tt,2,1,"div",2)),2&o&&(t.xp6(1),t.Q6J("ngIf",r.isResourceView),t.xp6(1),t.Q6J("ngIf",void 0!==r.project))},dependencies:[x.O5,jt],styles:["cp-tag-selection[_ngcontent-%COMP%]{padding-top:3px;display:block}.group[_ngcontent-%COMP%]{padding:18px 10px 10px}"]})}return a})();function Ct(a,j){if(1&a){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw(2);return t.KtG(i.load(s.projectId))}),t.TgZ(1,"div",15),t._uU(2),t.qZA(),t.TgZ(3,"div"),t._uU(4),t.qZA()()}if(2&a){const e=j.$implicit,o=j.last;t.xp6(2),t.Oqu(e.projectId),t.xp6(2),t.Oqu(o?"":">")}}const xt=a=>({"selected-chart":a}),Ot=(a,j)=>({"selected-activity":a,"in-project":j});function It(a,j){if(1&a){const e=t.EpF();t.TgZ(0,"div",16)(1,"span",17),t._uU(2),t.qZA(),t.TgZ(3,"div",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw(2);return t.KtG(i.setActiveSubProject(s.profile.id))}),t.O4$(),t.TgZ(4,"svg",19),t._UZ(5,"line",20),t.qZA()(),t.kcU(),t.TgZ(6,"div",21),t._uU(7),t.qZA(),t.TgZ(8,"a",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw(2);return t.KtG(i.load(s.profile.id))}),t._UZ(9,"cp-arrow-snapshot",22),t.qZA()()}if(2&a){const e=j.$implicit,o=t.oxw(2);t.Q6J("ngClass",t.VKq(10,xt,o.project.profile.id===e.profile.id)),t.xp6(2),t.Oqu(o.parentId===e.profile.id?"P":""),t.xp6(1),t.Q6J("hidden",!o.subProjectIds.get(e.profile.id))("ngClass",t.WLB(12,Ot,e.profile.id===(null==o.selectedActivity||null==o.selectedActivity.subProject?null:o.selectedActivity.subProject.subGraphId),o.subProjectIds.get(e.profile.id))),t.xp6(4),t.AsE("",e.profile.id," ",e.profile.name,""),t.xp6(2),t.Q6J("project",e)("width",300)("height",200)("refresh",e.profile.id===o.project.profile.id?o.refreshCount:0)}}function St(a,j){if(1&a&&(t.ynx(0),t.TgZ(1,"div",2)(2,"div",3),t._UZ(3,"proj-meta-buttons"),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,Ct,5,2,"div",5),t.qZA(),t.TgZ(6,"div",6),t._UZ(7,"cp-arrow-chart",7),t.qZA(),t.TgZ(8,"div",8),t._UZ(9,"proj-meta-tags"),t.qZA(),t.O4$(),t.TgZ(10,"svg",9)(11,"defs")(12,"marker",10),t._UZ(13,"path",11),t.qZA()()(),t.kcU(),t.TgZ(14,"div",12),t.YNc(15,It,10,15,"div",13),t.ALo(16,"async"),t.qZA()(),t.BQk()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.breadcrumb),t.xp6(2),t.Q6J("id",e.id)("width",1214)("height",700)("rebuild",!0),t.xp6(8),t.Q6J("ngForOf",t.lcZ(16,6,e.filteredNetworkArray$))}}function At(a,j){1&a&&(t.TgZ(0,"div",23),t._uU(1,"Loading..."),t.qZA())}let Mt=(()=>{class a{constructor(e,o,r,s){this.dashboard=o,this.eventService=r,this.projectCompiler=s,this.refreshCount=0,this.breadcrumb=[],this.selectedActivity=null,this.previousEFT=null,this.id=+e.snapshot.params.id,this.project$=this.dashboard.activeProject$,this.networkArray$=this.eventService.get(S.Zs);const i=this.networkArray$.getValue();this.networkArray$.next(i??[]),this.subscription=this.project$.pipe((0,J.h)(n=>!!n)).subscribe(n=>{this.refreshCount++;let d=[];if(this.selectedActivity=n.profile.view.selectedActivity,this.subProjectIds=new Map,n.activities.forEach(u=>{u.subProject.subGraphId&&this.subProjectIds.set(u.subProject.subGraphId,!0)}),n!=this.project){n.profile.parentProject&&(this.breadcrumb=this.getBreadcrumb(d,n.profile.parentProject),d=d.reverse());const u=this.networkArray$.getValue();if(u){const v=u.find(_=>!!_.activities.find(h=>h.subProject.subGraphId===n.profile.id));v&&(this.parentId=v.profile.id)}this.previousEFT=n.profile.staffing.eft??null}else this.previousEFT!==(n.profile.staffing.eft??null)&&(this.previousEFT=n.profile.staffing.eft??null,this.updateParentProject(n));this.project=n}),this.filteredNetworkArray$=this.eventService.get(S.eB);const c=this.filteredNetworkArray$.getValue();this.filteredNetworkArray$.next(c??[]),this.newProjSub=this.eventService.get(S.RO).pipe((0,J.h)(n=>!!n)).subscribe(n=>{this.subProjectIds.set(n.profile.id,!0),this.selectedActivity&&(this.selectedActivity.subProject.subGraphId=n.profile.id);const d=this.networkArray$.getValue(),u=this.filteredNetworkArray$.getValue();0===d.length&&(d.push(this.project),u.push(this.project)),d.push(n),u.push(n)})}getBreadcrumb(e,o){return o?(e.push({projectId:o.profile.id,name:o.profile.name}),o.profile.parentProject&&this.getBreadcrumb(e,o.profile.parentProject),e):e}canDeactivate(){return this.refreshCount<2}ngOnDestroy(){this.subscription?.unsubscribe(),this.newProjSub?.unsubscribe()}load(e){const r=this.networkArray$.getValue().find(s=>s.profile.id===e);r&&this.project&&(this.project.profile.view.activeSubProjectId=null,this.project.profile.view.selectedActivity=null,this.project.profile.view.lassoOn=!1,this.project.profile.view.lassoEnd=null,this.project.profile.view.lassoStart=null,this.project.profile.view.lassoedLinks=[],this.project.profile.view.lassoedNodes=[],r.profile.view.autoZoom=!0,this.dashboard.updateProject(r,!1))}setActiveSubProject(e){if(this.project?.activities.length>0){const o=this.project.activities.find(r=>r.subProject.subGraphId===e);o&&(this.project.profile.view.selectedActivity=o,this.dashboard.updateProject(this.project,!1))}}updateProject(e,o){const r=e.profile.parentProjectId,s=o.find(i=>i.profile.id===r);if(s){const i=e.profile.subProject.activityParentId,c=s.activities.find(u=>u.profile.id===i);let n=c?.profile.duration!==e.profile.staffing.eft;c&&(c.profile.duration=e.profile.staffing.eft,n=!0),this.projectCompiler.compile(s);const d={...s};o.splice(o.indexOf(s),1,d),n&&this.updateProject(s,o)}}updateParentProject(e){const o=this.filteredNetworkArray$.getValue();this.updateProject(e,o)}setFilterProject(e){}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(M.gz),t.Y36(k.Ou),t.Y36(k.WO),t.Y36(et.N))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["proj-meta-graph-layout"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"page-content"],[1,"meta-buttons"],[1,"crumb"],[3,"click",4,"ngFor","ngForOf"],[1,"current-view"],[3,"id","width","height","rebuild"],[1,"tags"],[1,"marker-svg"],["id","end-in-proj","viewBox","0 -5 10 10","refX","6","markerWidth","3","markerHeight","3","orient","auto",1,"in-project"],["d","M0,-5L10,0L0,5"],[1,"snapshots"],["class","sb-chart default-border",3,"ngClass",4,"ngFor","ngForOf"],[3,"click"],[1,"crumb-txt"],[1,"sb-chart","default-border",3,"ngClass"],[1,"parent-marker"],[1,"sub-proj-info",3,"hidden","ngClass","click"],["width","45","height","40",2,"background-color","white"],["x1","5","y1","20","x2","35","y2","20",2,"stroke","blueviolet","stroke-width","6px","marker-end","url('#end-in-proj')"],[1,"proj-id"],[3,"project","width","height","refresh"],[1,"loader"]],template:function(o,r){if(1&o&&(t.YNc(0,St,17,8,"ng-container",0),t.ALo(1,"async"),t.YNc(2,At,2,0,"ng-template",null,1,t.W1O)),2&o){const s=t.MAs(3);t.Q6J("ngIf",!!t.lcZ(1,2,r.project$))("ngIfElse",s)}},dependencies:[x.mk,x.sg,x.O5,ot.w,rt.J,mt,yt,x.Ov],styles:[".loader[_ngcontent-%COMP%]{position:absolute;top:48%;left:calc(50% + 115px);transform:translate(-50%,-50%)}.snapshots[_ngcontent-%COMP%]{display:grid;grid-column:1/-1;grid-template-columns:repeat(5,1fr);grid-gap:15px}.default-border[_ngcontent-%COMP%]{border:3px solid white;background-color:#fff}.selected-chart[_ngcontent-%COMP%]{border:3px solid red;background-color:#fff}.crumb[_ngcontent-%COMP%]{display:flex;padding-left:8px}.crumb[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:8px 0;display:flex}.crumb[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 5px}.selected-activity[_ngcontent-%COMP%]{border:3px solid blue}.selected-chart[_ngcontent-%COMP%]{border:3px solid black}.current-view[_ngcontent-%COMP%]{grid-row:2/-1;grid-column:1/4}.page-content[_ngcontent-%COMP%]{grid-row:2/-1;grid-column:2/-1;display:grid;grid-gap:20px;margin:12px}.page-content[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);grid-template-rows:18px auto;background-color:#f9f9f9}.page-content[_ngcontent-%COMP%]{padding:15px 15px 0;min-width:1655px;min-height:945px}.sub-proj-info[_ngcontent-%COMP%]{position:absolute;cursor:pointer}.in-project[_ngcontent-%COMP%]{fill:#8a2be2}.parent-marker[_ngcontent-%COMP%]{position:absolute;font-size:1.5rem;font-weight:700}.proj-id[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;font-size:1rem;font-weight:700;color:#bbb}.sb-chart[_ngcontent-%COMP%]{position:relative}.tags[_ngcontent-%COMP%]{grid-row:2/-1;grid-column:4/-1;background-color:#fff;max-height:686px;overflow-y:auto}.marker-svg[_ngcontent-%COMP%]{grid-row:1/2;grid-column:1/2;z-index:-1}.meta-buttons[_ngcontent-%COMP%]{grid-row:1/2;grid-column:1/4}[_nghost-%COMP%]{z-index:0}"]})}return a})();var Nt=p(5861),K=p(1374),Gt=p(9397),O=p(3830),Zt=p(9315);let Ft=(()=>{class a{constructor(e,o,r,s,i,c){this.dashboard=e,this.projectApi=o,this.storageApi=r,this.networkApi=s,this.eventService=i,this.nodeConnector=c}resolve(e){var o=this;return(0,Nt.Z)(function*(){if(o.dashboard.secondaryProject$.next(null),+e.params.id===O.ph){const r=yield o.storageApi.get(O._k);return null!==r&&(r.profile.view.autoZoom=!0,o.dashboard.cleanSlateForNewPage(r)),o.dashboard.activeProject$.pipe((0,K.P)()).toPromise()}{const r=o.projectApi.get(e.params.id),s=o.networkApi.get(e.params.id);return(0,Zt.D)([r,s]).pipe((0,Gt.b)(([i,c])=>{c&&c.length>0?(o.importNetwork(c),o.initNetwork(c),c.length>0&&o.dashboard.activeProject$.next(c[0])):(o.nodeConnector.connectArrowsToNodes(i),o.dashboard.activeProject$.next(i),o.initNetwork(null))}),(0,K.P)()).toPromise()}})()}initNetwork(e){if(e&&e.length>0){let o=Math.min(...e.map(r=>r.profile.id));o>=0&&(o=-1),o-=1,this.eventService.get(O.PC).next(o),this.eventService.get(O.Zs).next([...e]),this.eventService.get(O.eB).next([...e])}else this.eventService.get(O.Zs).next([]),this.eventService.get(O.eB).next([])}importNetwork(e){e.forEach(o=>{this.nodeConnector.connectArrowsToNodes(o)})}static#t=this.\u0275fac=function(o){return new(o||a)(t.LFG(k.Ou),t.LFG(k.$6),t.LFG(k.$y),t.LFG(k.id),t.LFG(k.WO),t.LFG(D.E))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),zt=(()=>{class a{constructor(e,o,r){this.nodeSerializer=e,this.projectSerializer=o,this.activitySerializer=r}extractSubProject(e,o){if(e.profile.view.isSubProjSelected){const r=e.activities.filter(n=>e.profile.view.lassoedLinks.indexOf(n.profile.id)>-1);let s=null,i=null,c=e.integrations.filter(n=>(e.profile.view.lassoStart===n.id&&(s=n),e.profile.view.lassoEnd===n.id&&(i=n),e.profile.view.lassoedNodes.indexOf(n.id)>-1&&s?.id!==n.id&&i?.id!==n.id));if(i&&s){const n=this.nodeSerializer.fromJson(s),d=this.nodeSerializer.fromJson(i);r.forEach(f=>{f.chartInfo.target_id===s.id&&(f.chartInfo.target=n),f.chartInfo.source_id===s.id&&(f.chartInfo.source=n),f.chartInfo.target_id===i.id&&(f.chartInfo.target=d),f.chartInfo.source_id===i.id&&(f.chartInfo.source=d)}),e.activities=e.activities.filter(f=>-1===r.indexOf(f)),e.integrations=[...e.integrations.filter(f=>-1===c.indexOf(f))],c=c.map(f=>this.nodeSerializer.fromJson(f)),c.push(n,d);const u=this.projectSerializer.fromJson();let v=o-1;v>=-1&&(v=-2);const _=`Sub Project ${v}`;u.profile.id=v,u.profile.name=_,u.activities=r,u.integrations=[...c];const h=this.activitySerializer.fromJson(),P=Math.max(...e.activities.map(f=>f.profile.id))+1;return h.profile.id=P,h.chartInfo.source_id=s.id,h.chartInfo.target_id=i.id,h.subProject.graphId=v,h.subProject.subGraphId=v,h.profile.name=_,e.activities.push(h),e.profile.view.lassoStart=null,e.profile.view.lassoEnd=null,e.profile.view.lassoedLinks=[],e.profile.view.lassoedNodes=[],u}}return null}static#t=this.\u0275fac=function(o){return new(o||a)(t.LFG(Q.i),t.LFG(Z.z),t.LFG(V.w))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Lt=p(9728),Jt=p(9862),$t=p(9707);const E=a=>({active:a}),Bt=a=>({disabled:a}),Ut=[{path:"",component:X.r,children:[{path:":id",component:Mt,resolve:{items:Ft},canDeactivate:[tt.I]},{path:"arrow/:id",component:q.m,outlet:"sidebar"},{path:"meta/:id",component:(()=>{class a{constructor(e,o,r,s,i,c,n){this.dashboard=e,this.eventService=o,this.projectExtractor=r,this.router=s,this.storageApi=i,this.toastr=c,this.httpClient=n,this.project=null,this.activity=null,this.showLoadBtn=!1,this.projectName="",this.isLasso=!1,this.isSubProjSelected=!1,this.sampleFile="network",this.networkArray$=this.eventService.get(S.Zs),this.filteredNetworkArray$=this.eventService.get(S.eB)}ngOnInit(){this.sub=this.dashboard.activeProject$.pipe((0,J.h)(e=>!!e)).subscribe(e=>{this.project=e,this.projectName=e.profile.name,this.activity=e.profile.view.selectedActivity,this.isLasso=e.profile.view.lassoOn,this.isSubProjSelected=e.profile.view.isSubProjSelected})}downloadFile(){this.httpClient.get(`assets/sample-data/${this.sampleFile}.xlsx`,{responseType:"blob"}).subscribe(o=>{const r=new Blob([o],{type:"text/plain"}),s=window.URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=`${this.sampleFile}.xlsx`,i.click(),window.URL.revokeObjectURL(s)})}updateProjectName(e){this.projectName=e.target.value,this.project&&(this.project.profile.name=this.projectName)}keyPress(e){"Enter"===e.key&&this.updateProjectName(e)}toggleLasso(e){this.project&&(this.project.profile.view.lassoOn=e,this.project.profile.view.lassoedLinks=[],this.project.profile.view.lassoedNodes=[],this.dashboard.updateProject(this.project,!0))}extractSubProject(){if(this.isSubProjSelected&&this.project){const e=this.networkArray$.getValue()??[],o=this.filteredNetworkArray$.getValue()??[];let r=Math.min(...e.map(i=>i.profile.id));r===1/0&&!this.project.profile.id&&(this.project.profile.id=-2,this.project.profile.name="Origin Project",r=-2),0===o.length&&o.push(this.project),0===e.length&&e.push(this.project);const s=this.projectExtractor.extractSubProject(this.project,r);s&&(o.push(s),e.push(s),this.networkArray$.next(e),this.filteredNetworkArray$.next(o)),this.dashboard.updateProject(this.project,!0)}}storeToSnapshot(){if(null!==this.project){const e=this.networkArray$.getValue()??[],o=this.filteredNetworkArray$.getValue()??[],r=e.find(i=>i.profile.id===this.project.profile.id),s=o.find(i=>i.profile.id===this.project.profile.id);(null===this.project.profile.id||0===this.project.profile.id)&&(this.project.profile.id=-1*(e.length+1)),r?(e.splice(e.indexOf(r),1),e.push(this.project)):(e.push(this.project),this.networkArray$.next(e)),s?(o.splice(o.indexOf(s),1),o.push(this.project)):(o.push(this.project),this.filteredNetworkArray$.next(o))}}ngOnDestroy(){this.sub?.unsubscribe()}navToProjProfile(){this.storageApi.set(O._k,this.project),this.router.navigateByUrl(S.d4)}navToScenarioPlanning(){this.storageApi.set(O._k,this.project),this.router.navigateByUrl(S.au)}stash(){try{this.storageApi.set(O.H3,this.project)}catch(e){return this.toastr.error("Stash Chart","Error occured."),void console.error(e)}this.toastr.success("Stash Chart","Success!")}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(k.Ou),t.Y36(k.WO),t.Y36(zt),t.Y36(M.F0),t.Y36(Lt.K),t.Y36(H._W),t.Y36(Jt.eN))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["proj-meta-bar"]],decls:35,vars:14,consts:[[1,"meta-bar"],["href","javascript:void(0)",1,"btn",3,"click"],["type","text",3,"value","keypress","blur"],["href","javescript::void(0)",1,"dwnld-link",3,"click"],[1,"title"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-secondary","active",3,"ngClass"],["type","radio","id","float","value","float","name","bottom-text",1,"form-check-input",3,"click"],[1,"btn","btn-secondary",3,"ngClass"],["type","radio","id","under-none","value","under-none","name","bottom-text",1,"form-check-input",3,"click"],[1,"btn","btn-secondary",3,"ngClass","click"],[3,"projectPool"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div")(2,"a",1),t.NdJ("click",function(){return r.navToProjProfile()}),t._uU(3,"Load Project in Profile"),t.qZA()(),t.TgZ(4,"div")(5,"a",1),t.NdJ("click",function(){return r.navToScenarioPlanning()}),t._uU(6,"Load in Scenarios"),t.qZA()(),t.TgZ(7,"div")(8,"div"),t._uU(9,"Project Name"),t.qZA(),t.TgZ(10,"input",2),t.NdJ("keypress",function(i){return r.keyPress(i)})("blur",function(i){return r.updateProjectName(i)}),t.qZA()(),t.TgZ(11,"div")(12,"a",3),t.NdJ("click",function(){return r.downloadFile()}),t._uU(13),t.qZA()(),t.TgZ(14,"div")(15,"div",4),t._uU(16,"Lasso Tool"),t.qZA(),t.TgZ(17,"div",5)(18,"label",6)(19,"input",7),t.NdJ("click",function(){return r.toggleLasso(!1)}),t.qZA(),t._uU(20," Off "),t.qZA(),t.TgZ(21,"label",8)(22,"input",9),t.NdJ("click",function(){return r.toggleLasso(!0)}),t.qZA(),t._uU(23," On "),t.qZA()()(),t.TgZ(24,"div")(25,"div"),t._uU(26,"Sub Project"),t.qZA(),t.TgZ(27,"div")(28,"button",10),t.NdJ("click",function(){return r.extractSubProject()}),t._uU(29,"Extract Sub Project"),t.qZA()(),t.TgZ(30,"div")(31,"a",1),t.NdJ("click",function(){return r.stash()}),t._uU(32,"Stash Project"),t.qZA()()(),t._UZ(33,"cp-selected-activity",11),t.ALo(34,"async"),t.qZA()),2&o&&(t.xp6(10),t.Q6J("value",r.projectName),t.xp6(3),t.hij("Get Sample ",r.sampleFile," Data"),t.xp6(5),t.Q6J("ngClass",t.VKq(8,E,!r.isLasso)),t.xp6(3),t.Q6J("ngClass",t.VKq(10,E,r.isLasso)),t.xp6(7),t.Q6J("ngClass",t.VKq(12,Bt,!r.isSubProjSelected)),t.xp6(5),t.Q6J("projectPool",t.lcZ(34,6,r.networkArray$)))},dependencies:[x.mk,$t.Z,x.Ov],styles:[".meta-bar[_ngcontent-%COMP%]{padding-left:27px;padding-right:16px}.meta-bar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#bbb}.meta-bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff}.meta-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}.meta-bar[_ngcontent-%COMP%]   ccp-selected-activity[_ngcontent-%COMP%]{border-bottom:1px solid #fff;display:block}.meta-bar[_ngcontent-%COMP%]   cp-selected-activity[_ngcontent-%COMP%], .meta-bar[_ngcontent-%COMP%]   cp-risk-decompress[_ngcontent-%COMP%]{padding-top:20px;display:block}.meta-bar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%]{display:flex}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:4px}.meta-bar[_ngcontent-%COMP%]   .end-nodes[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px}.meta-bar[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{color:#000}.meta-bar[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active.btn-secondary:focus, .meta-bar[_ngcontent-%COMP%]   .btn-secondary.focus[_ngcontent-%COMP%]{color:#fff;background-color:#545b62;border-color:#4e555b}.meta-bar[_ngcontent-%COMP%]   .btn-secondary.active[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active.btn-secondary.active:focus, .meta-bar[_ngcontent-%COMP%]   .btn-secondary.focus[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}"]})}return a})(),outlet:"sidebar"}]}];let Rt=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[M.Bz.forChild(Ut),M.Bz]})}return a})();var Yt=p(5547),Wt=p(1281),Vt=p(6724),Qt=p(5488);let Ht=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[x.ez,Rt,Yt.S,Wt.E,Vt.V,$.u5,Qt.L]})}return a})()}}]);