"use strict";(self.webpackChunkcritical_web=self.webpackChunkcritical_web||[]).push([[358],{3358:(ut,he,m)=>{m.r(he),m.d(he,{JiraModule:()=>fs});var M=m(6814),ae=m(2381),ce=m(6724),r=m(9212);let W=(()=>{class e{static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=r.oAB({type:e});static#i=this.\u0275inj=r.cJS({imports:[M.ez,ce.V]})}return e})();var z=m(7586),p=m(7778),x=m(5861),b=m(9862),j=m(7631);const D="https://api.atlassian.com/ex/jira/",ne="rest/api/3/project/",Qt="rest/api/3/issue",Xt="rest/api/3/issuetype",Vt="rest/api/3/issueLink",ei="/properties",ti="critical-pass-project";var K=m(2433),pt=m(3633),G=m(9500),gt=m(9315);function Ie(e){let i=e.length;for(;--i>=0;)e[i]=0}const yt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),et=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Jn=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ci=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),de=new Array(576);Ie(de);const Ue=new Array(60);Ie(Ue);const Ne=new Array(512);Ie(Ne);const Je=new Array(256);Ie(Je);const xt=new Array(29);Ie(xt);const tt=new Array(30);function kt(e,i,t,n,a){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let di,fi,_i;function Tt(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}Ie(tt);const hi=e=>e<256?Ne[e]:Ne[256+(e>>>7)],Me=(e,i)=>{e.pending_buf[e.pending++]=255&i,e.pending_buf[e.pending++]=i>>>8&255},Q=(e,i,t)=>{e.bi_valid>16-t?(e.bi_buf|=i<<e.bi_valid&65535,Me(e,e.bi_buf),e.bi_buf=i>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},re=(e,i,t)=>{Q(e,t[2*i],t[2*i+1])},ui=(e,i)=>{let t=0;do{t|=1&e,e>>>=1,t<<=1}while(--i>0);return t>>>1},pi=(e,i,t)=>{const n=new Array(16);let o,c,a=0;for(o=1;o<=15;o++)a=a+t[o-1]<<1,n[o]=a;for(c=0;c<=i;c++){let s=e[2*c+1];0!==s&&(e[2*c]=ui(n[s]++,s))}},gi=e=>{let i;for(i=0;i<286;i++)e.dyn_ltree[2*i]=0;for(i=0;i<30;i++)e.dyn_dtree[2*i]=0;for(i=0;i<19;i++)e.bl_tree[2*i]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},mi=e=>{e.bi_valid>8?Me(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},wi=(e,i,t,n)=>{const a=2*i,o=2*t;return e[a]<e[o]||e[a]===e[o]&&n[i]<=n[t]},At=(e,i,t)=>{const n=e.heap[t];let a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&wi(i,e.heap[a+1],e.heap[a],e.depth)&&a++,!wi(i,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},vi=(e,i,t)=>{let n,a,c,s,o=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+o++],n+=(255&e.pending_buf[e.sym_buf+o++])<<8,a=e.pending_buf[e.sym_buf+o++],0===n?re(e,a,i):(c=Je[a],re(e,c+256+1,i),s=yt[c],0!==s&&(a-=xt[c],Q(e,a,s)),n--,c=hi(n),re(e,c,t),s=et[c],0!==s&&(n-=tt[c],Q(e,n,s)))}while(o<e.sym_next);re(e,256,i)},Et=(e,i)=>{const t=i.dyn_tree,n=i.stat_desc.static_tree,a=i.stat_desc.has_stree,o=i.stat_desc.elems;let c,s,l,f=-1;for(e.heap_len=0,e.heap_max=573,c=0;c<o;c++)0!==t[2*c]?(e.heap[++e.heap_len]=f=c,e.depth[c]=0):t[2*c+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=f<2?++f:0,t[2*l]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=n[2*l+1]);for(i.max_code=f,c=e.heap_len>>1;c>=1;c--)At(e,t,c);l=o;do{c=e.heap[1],e.heap[1]=e.heap[e.heap_len--],At(e,t,1),s=e.heap[1],e.heap[--e.heap_max]=c,e.heap[--e.heap_max]=s,t[2*l]=t[2*c]+t[2*s],e.depth[l]=(e.depth[c]>=e.depth[s]?e.depth[c]:e.depth[s])+1,t[2*c+1]=t[2*s+1]=l,e.heap[1]=l++,At(e,t,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,i)=>{const t=i.dyn_tree,n=i.max_code,a=i.stat_desc.static_tree,o=i.stat_desc.has_stree,c=i.stat_desc.extra_bits,s=i.stat_desc.extra_base,f=i.stat_desc.max_length;let l,d,w,u,_,g,O=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(t[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],u=t[2*t[2*d+1]+1]+1,u>f&&(u=f,O++),t[2*d+1]=u,!(d>n)&&(e.bl_count[u]++,_=0,d>=s&&(_=c[d-s]),g=t[2*d],e.opt_len+=g*(u+_),o&&(e.static_len+=g*(a[2*d+1]+_)));if(0!==O){do{for(u=f-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[f]--,O-=2}while(O>0);for(u=f;0!==u;u--)for(d=e.bl_count[u];0!==d;)w=e.heap[--l],!(w>n)&&(t[2*w+1]!==u&&(e.opt_len+=(u-t[2*w+1])*t[2*w],t[2*w+1]=u),d--)}})(e,i),pi(t,f,e.bl_count)},bi=(e,i,t)=>{let n,o,a=-1,c=i[1],s=0,f=7,l=4;for(0===c&&(f=138,l=3),i[2*(t+1)+1]=65535,n=0;n<=t;n++)o=c,c=i[2*(n+1)+1],!(++s<f&&o===c)&&(s<l?e.bl_tree[2*o]+=s:0!==o?(o!==a&&e.bl_tree[2*o]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=o,0===c?(f=138,l=3):o===c?(f=6,l=3):(f=7,l=4))},yi=(e,i,t)=>{let n,o,a=-1,c=i[1],s=0,f=7,l=4;for(0===c&&(f=138,l=3),n=0;n<=t;n++)if(o=c,c=i[2*(n+1)+1],!(++s<f&&o===c)){if(s<l)do{re(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==a&&(re(e,o,e.bl_tree),s--),re(e,16,e.bl_tree),Q(e,s-3,2)):s<=10?(re(e,17,e.bl_tree),Q(e,s-3,3)):(re(e,18,e.bl_tree),Q(e,s-11,7));s=0,a=o,0===c?(f=138,l=3):o===c?(f=6,l=3):(f=7,l=4)}};let xi=!1;const ki=(e,i,t,n)=>{Q(e,0+(n?1:0),3),mi(e),Me(e,t),Me(e,~t),t&&e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t};var na={_tr_init:e=>{xi||((()=>{let e,i,t,n,a;const o=new Array(16);for(t=0,n=0;n<28;n++)for(xt[n]=t,e=0;e<1<<yt[n];e++)Je[t++]=n;for(Je[t-1]=n,a=0,n=0;n<16;n++)for(tt[n]=a,e=0;e<1<<et[n];e++)Ne[a++]=n;for(a>>=7;n<30;n++)for(tt[n]=a<<7,e=0;e<1<<et[n]-7;e++)Ne[256+a++]=n;for(i=0;i<=15;i++)o[i]=0;for(e=0;e<=143;)de[2*e+1]=8,e++,o[8]++;for(;e<=255;)de[2*e+1]=9,e++,o[9]++;for(;e<=279;)de[2*e+1]=7,e++,o[7]++;for(;e<=287;)de[2*e+1]=8,e++,o[8]++;for(pi(de,287,o),e=0;e<30;e++)Ue[2*e+1]=5,Ue[2*e]=ui(e,5);di=new kt(de,yt,257,286,15),fi=new kt(Ue,et,0,30,15),_i=new kt(new Array(0),Jn,0,19,7)})(),xi=!0),e.l_desc=new Tt(e.dyn_ltree,di),e.d_desc=new Tt(e.dyn_dtree,fi),e.bl_desc=new Tt(e.bl_tree,_i),e.bi_buf=0,e.bi_valid=0,gi(e)},_tr_stored_block:ki,_tr_flush_block:(e,i,t,n)=>{let a,o,c=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Et(e,e.l_desc),Et(e,e.d_desc),c=(e=>{let i;for(bi(e,e.dyn_ltree,e.l_desc.max_code),bi(e,e.dyn_dtree,e.d_desc.max_code),Et(e,e.bl_desc),i=18;i>=3&&0===e.bl_tree[2*ci[i]+1];i--);return e.opt_len+=3*(i+1)+5+5+4,i})(e),a=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=a&&(a=o)):a=o=t+5,t+4<=a&&-1!==i?ki(e,i,t,n):4===e.strategy||o===a?(Q(e,2+(n?1:0),3),vi(e,de,Ue)):(Q(e,4+(n?1:0),3),((e,i,t,n)=>{let a;for(Q(e,i-257,5),Q(e,t-1,5),Q(e,n-4,4),a=0;a<n;a++)Q(e,e.bl_tree[2*ci[a]+1],3);yi(e,e.dyn_ltree,i-1),yi(e,e.dyn_dtree,t-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),vi(e,e.dyn_ltree,e.dyn_dtree)),gi(e),n&&mi(e)},_tr_tally:(e,i,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=i,e.pending_buf[e.sym_buf+e.sym_next++]=i>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,0===i?e.dyn_ltree[2*t]++:(e.matches++,i--,e.dyn_ltree[2*(Je[t]+256+1)]++,e.dyn_dtree[2*hi(i)]++),e.sym_next===e.sym_end),_tr_align:e=>{Q(e,2,3),re(e,256,de),(e=>{16===e.bi_valid?(Me(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Fe=(e,i,t,n)=>{let a=65535&e|0,o=e>>>16&65535|0,c=0;for(;0!==t;){c=t>2e3?2e3:t,t-=c;do{a=a+i[n++]|0,o=o+a|0}while(--c);a%=65521,o%=65521}return a|o<<16|0};const ra=new Uint32Array((()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;i[t]=e}return i})());var B=(e,i,t,n)=>{const a=ra,o=n+t;e^=-1;for(let c=n;c<o;c++)e=e>>>8^a[255&(e^i[c])];return-1^e},be={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ye={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:oa,_tr_stored_block:jt,_tr_flush_block:sa,_tr_tally:ue,_tr_align:la}=na,{Z_NO_FLUSH:pe,Z_PARTIAL_FLUSH:ca,Z_FULL_FLUSH:da,Z_FINISH:te,Z_BLOCK:Ti,Z_OK:$,Z_STREAM_END:Ai,Z_STREAM_ERROR:oe,Z_DATA_ERROR:fa,Z_BUF_ERROR:It,Z_DEFAULT_COMPRESSION:_a,Z_FILTERED:ha,Z_HUFFMAN_ONLY:it,Z_RLE:ua,Z_FIXED:pa,Z_DEFAULT_STRATEGY:ga,Z_UNKNOWN:ma,Z_DEFLATED:nt}=ye,se=262,Te=(e,i)=>(e.msg=be[i],i),Ei=e=>2*e-(e>4?9:0),me=e=>{let i=e.length;for(;--i>=0;)e[i]=0},Ia=e=>{let i,t,n,a=e.w_size;i=e.hash_size,n=i;do{t=e.head[--n],e.head[n]=t>=a?t-a:0}while(--i);i=a,n=i;do{t=e.prev[--n],e.prev[n]=t>=a?t-a:0}while(--i)};let we=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask;const X=e=>{const i=e.state;let t=i.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,0===i.pending&&(i.pending_out=0))},V=(e,i)=>{sa(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,X(e.strm)},P=(e,i)=>{e.pending_buf[e.pending++]=i},Ke=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=255&i},zt=(e,i,t,n)=>{let a=e.avail_in;return a>n&&(a=n),0===a?0:(e.avail_in-=a,i.set(e.input.subarray(e.next_in,e.next_in+a),t),1===e.state.wrap?e.adler=Fe(e.adler,i,a,t):2===e.state.wrap&&(e.adler=B(e.adler,i,a,t)),e.next_in+=a,e.total_in+=a,a)},ji=(e,i)=>{let a,o,t=e.max_chain_length,n=e.strstart,c=e.prev_length,s=e.nice_match;const f=e.strstart>e.w_size-se?e.strstart-(e.w_size-se):0,l=e.window,d=e.w_mask,w=e.prev,u=e.strstart+258;let _=l[n+c-1],g=l[n+c];e.prev_length>=e.good_match&&(t>>=2),s>e.lookahead&&(s=e.lookahead);do{if(a=i,l[a+c]===g&&l[a+c-1]===_&&l[a]===l[n]&&l[++a]===l[n+1]){n+=2,a++;do{}while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<u);if(o=258-(u-n),n=u-258,o>c){if(e.match_start=i,c=o,o>=s)break;_=l[n+c-1],g=l[n+c]}}}while((i=w[i&d])>f&&0!=--t);return c<=e.lookahead?c:e.lookahead},Re=e=>{const i=e.w_size;let t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-se)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),Ia(e),n+=i),0===e.strm.avail_in)break;if(t=zt(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=we(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=we(e,e.ins_h,e.window[a+3-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<se&&0!==e.strm.avail_in)},Ii=(e,i)=>{let n,a,o,t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,c=0,s=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>o&&(n=o),n<t&&(0===n&&i!==te||i===pe||n!==a+e.strm.avail_in)))break;c=i===te&&n===a+e.strm.avail_in?1:0,jt(e,0,0,c),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,X(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(zt(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===c);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),c?4:i!==pe&&i!==te&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(zt(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,t=o>e.w_size?e.w_size:o,a=e.strstart-e.block_start,(a>=t||(a||i===te)&&i!==pe&&0===e.strm.avail_in&&a<=o)&&(n=a>o?o:a,c=i===te&&0===e.strm.avail_in&&n===a?1:0,jt(e,e.block_start,n,c),e.block_start+=n,X(e.strm)),c?3:1)},Lt=(e,i)=>{let t,n;for(;;){if(e.lookahead<se){if(Re(e),e.lookahead<se&&i===pe)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=we(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-se&&(e.match_length=ji(e,t)),e.match_length>=3)if(n=ue(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=we(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=we(e,e.ins_h,e.window[e.strstart+1]);else n=ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(V(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,i===te?(V(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(V(e,!1),0===e.strm.avail_out)?1:2},Oe=(e,i)=>{let t,n,a;for(;;){if(e.lookahead<se){if(Re(e),e.lookahead<se&&i===pe)return 1;if(0===e.lookahead)break}if(t=0,e.lookahead>=3&&(e.ins_h=we(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-se&&(e.match_length=ji(e,t),e.match_length<=5&&(e.strategy===ha||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=ue(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=we(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(V(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=ue(e,0,e.window[e.strstart-1]),n&&V(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ue(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,i===te?(V(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(V(e,!1),0===e.strm.avail_out)?1:2};function le(e,i,t,n,a){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=n,this.func=a}const $e=[new le(0,0,0,0,Ii),new le(4,4,8,4,Lt),new le(4,5,16,8,Lt),new le(4,6,32,32,Lt),new le(4,4,16,16,Oe),new le(8,16,32,32,Oe),new le(8,16,128,128,Oe),new le(8,32,128,256,Oe),new le(32,128,258,1024,Oe),new le(32,258,258,4096,Oe)];function Pa(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),me(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const He=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||42!==i.status&&57!==i.status&&69!==i.status&&73!==i.status&&91!==i.status&&103!==i.status&&113!==i.status&&666!==i.status?1:0},Ci=e=>{if(He(e))return Te(e,oe);e.total_in=e.total_out=0,e.data_type=ma;const i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=2===i.wrap?57:i.wrap?42:113,e.adler=2===i.wrap?0:1,i.last_flush=-2,oa(i),$},Zi=e=>{const i=Ci(e);return i===$&&(e=>{e.window_size=2*e.w_size,me(e.head),e.max_lazy_match=$e[e.level].max_lazy,e.good_match=$e[e.level].good_length,e.nice_match=$e[e.level].nice_length,e.max_chain_length=$e[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),i},Si=(e,i,t,n,a,o)=>{if(!e)return oe;let c=1;if(i===_a&&(i=6),n<0?(c=0,n=-n):n>15&&(c=2,n-=16),a<1||a>9||t!==nt||n<8||n>15||i<0||i>9||o<0||o>pa||8===n&&1!==c)return Te(e,oe);8===n&&(n=9);const s=new Pa;return e.state=s,s.strm=e,s.status=42,s.wrap=c,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=i,s.strategy=o,s.method=t,Zi(e)};var Ye={deflateInit:(e,i)=>Si(e,i,nt,15,8,ga),deflateInit2:Si,deflateReset:Zi,deflateResetKeep:Ci,deflateSetHeader:(e,i)=>He(e)||2!==e.state.wrap?oe:(e.state.gzhead=i,$),deflate:(e,i)=>{if(He(e)||i>Ti||i<0)return e?Te(e,oe):oe;const t=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===t.status&&i!==te)return Te(e,0===e.avail_out?It:oe);const n=t.last_flush;if(t.last_flush=i,0!==t.pending){if(X(e),0===e.avail_out)return t.last_flush=-1,$}else if(0===e.avail_in&&Ei(i)<=Ei(n)&&i!==te)return Te(e,It);if(666===t.status&&0!==e.avail_in)return Te(e,It);if(42===t.status&&0===t.wrap&&(t.status=113),42===t.status){let a=nt+(t.w_bits-8<<4)<<8,o=-1;if(o=t.strategy>=it||t.level<2?0:t.level<6?1:6===t.level?2:3,a|=o<<6,0!==t.strstart&&(a|=32),a+=31-a%31,Ke(t,a),0!==t.strstart&&(Ke(t,e.adler>>>16),Ke(t,65535&e.adler)),e.adler=1,t.status=113,X(e),0!==t.pending)return t.last_flush=-1,$}if(57===t.status)if(e.adler=0,P(t,31),P(t,139),P(t,8),t.gzhead)P(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),P(t,255&t.gzhead.time),P(t,t.gzhead.time>>8&255),P(t,t.gzhead.time>>16&255),P(t,t.gzhead.time>>24&255),P(t,9===t.level?2:t.strategy>=it||t.level<2?4:0),P(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(P(t,255&t.gzhead.extra.length),P(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=B(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(P(t,0),P(t,0),P(t,0),P(t,0),P(t,0),P(t,9===t.level?2:t.strategy>=it||t.level<2?4:0),P(t,3),t.status=113,X(e),0!==t.pending)return t.last_flush=-1,$;if(69===t.status){if(t.gzhead.extra){let a=t.pending,o=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let s=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=B(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=s,X(e),0!==t.pending)return t.last_flush=-1,$;a=0,o-=s}let c=new Uint8Array(t.gzhead.extra);t.pending_buf.set(c.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>a&&(e.adler=B(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=73}if(73===t.status){if(t.gzhead.name){let o,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=B(e.adler,t.pending_buf,t.pending-a,a)),X(e),0!==t.pending)return t.last_flush=-1,$;a=0}o=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,P(t,o)}while(0!==o);t.gzhead.hcrc&&t.pending>a&&(e.adler=B(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=91}if(91===t.status){if(t.gzhead.comment){let o,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=B(e.adler,t.pending_buf,t.pending-a,a)),X(e),0!==t.pending)return t.last_flush=-1,$;a=0}o=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,P(t,o)}while(0!==o);t.gzhead.hcrc&&t.pending>a&&(e.adler=B(e.adler,t.pending_buf,t.pending-a,a))}t.status=103}if(103===t.status){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(X(e),0!==t.pending))return t.last_flush=-1,$;P(t,255&e.adler),P(t,e.adler>>8&255),e.adler=0}if(t.status=113,X(e),0!==t.pending)return t.last_flush=-1,$}if(0!==e.avail_in||0!==t.lookahead||i!==pe&&666!==t.status){let a=0===t.level?Ii(t,i):t.strategy===it?((e,i)=>{let t;for(;;){if(0===e.lookahead&&(Re(e),0===e.lookahead)){if(i===pe)return 1;break}if(e.match_length=0,t=ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(V(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,i===te?(V(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(V(e,!1),0===e.strm.avail_out)?1:2})(t,i):t.strategy===ua?((e,i)=>{let t,n,a,o;const c=e.window;for(;;){if(e.lookahead<=258){if(Re(e),e.lookahead<=258&&i===pe)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(a=e.strstart-1,n=c[a],n===c[++a]&&n===c[++a]&&n===c[++a])){o=e.strstart+258;do{}while(n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&n===c[++a]&&a<o);e.match_length=258-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(t=ue(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=ue(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(V(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,i===te?(V(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(V(e,!1),0===e.strm.avail_out)?1:2})(t,i):$e[t.level].func(t,i);if((3===a||4===a)&&(t.status=666),1===a||3===a)return 0===e.avail_out&&(t.last_flush=-1),$;if(2===a&&(i===ca?la(t):i!==Ti&&(jt(t,0,0,!1),i===da&&(me(t.head),0===t.lookahead&&(t.strstart=0,t.block_start=0,t.insert=0))),X(e),0===e.avail_out))return t.last_flush=-1,$}return i!==te?$:t.wrap<=0?Ai:(2===t.wrap?(P(t,255&e.adler),P(t,e.adler>>8&255),P(t,e.adler>>16&255),P(t,e.adler>>24&255),P(t,255&e.total_in),P(t,e.total_in>>8&255),P(t,e.total_in>>16&255),P(t,e.total_in>>24&255)):(Ke(t,e.adler>>>16),Ke(t,65535&e.adler)),X(e),t.wrap>0&&(t.wrap=-t.wrap),0!==t.pending?$:Ai)},deflateEnd:e=>{if(He(e))return oe;const i=e.state.status;return e.state=null,113===i?Te(e,fa):$},deflateSetDictionary:(e,i)=>{let t=i.length;if(He(e))return oe;const n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return oe;if(1===a&&(e.adler=Fe(e.adler,i,t,0)),n.wrap=0,t>=n.w_size){0===a&&(me(n.head),n.strstart=0,n.block_start=0,n.insert=0);let f=new Uint8Array(n.w_size);f.set(i.subarray(t-n.w_size,t),0),i=f,t=n.w_size}const o=e.avail_in,c=e.next_in,s=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,Re(n);n.lookahead>=3;){let f=n.strstart,l=n.lookahead-2;do{n.ins_h=we(n,n.ins_h,n.window[f+3-1]),n.prev[f&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=f,f++}while(--l);n.strstart=f,n.lookahead=2,Re(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=c,e.input=s,e.avail_in=o,n.wrap=a,$},deflateInfo:"pako deflate (from Nodeca project)"};const Ya=(e,i)=>Object.prototype.hasOwnProperty.call(e,i);var at={assign:function(e){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const t=i.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(const n in t)Ya(t,n)&&(e[n]=t[n])}}return e},flattenChunks:e=>{let i=0;for(let n=0,a=e.length;n<a;n++)i+=e[n].length;const t=new Uint8Array(i);for(let n=0,a=0,o=e.length;n<o;n++){let c=e[n];t.set(c,a),a+=c.length}return t}};let Pi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Pi=!1}const Ge=new Uint8Array(256);for(let e=0;e<256;e++)Ge[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ge[254]=Ge[254]=1;var qe={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let i,t,n,a,o,c=e.length,s=0;for(a=0;a<c;a++)t=e.charCodeAt(a),55296==(64512&t)&&a+1<c&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(t=65536+(t-55296<<10)+(n-56320),a++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(s),o=0,a=0;o<s;a++)t=e.charCodeAt(a),55296==(64512&t)&&a+1<c&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?i[o++]=t:t<2048?(i[o++]=192|t>>>6,i[o++]=128|63&t):t<65536?(i[o++]=224|t>>>12,i[o++]=128|t>>>6&63,i[o++]=128|63&t):(i[o++]=240|t>>>18,i[o++]=128|t>>>12&63,i[o++]=128|t>>>6&63,i[o++]=128|63&t);return i},buf2string:(e,i)=>{const t=i||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,i));let n,a;const o=new Array(2*t);for(a=0,n=0;n<t;){let c=e[n++];if(c<128){o[a++]=c;continue}let s=Ge[c];if(s>4)o[a++]=65533,n+=s-1;else{for(c&=2===s?31:3===s?15:7;s>1&&n<t;)c=c<<6|63&e[n++],s--;s>1?o[a++]=65533:c<65536?o[a++]=c:(c-=65536,o[a++]=55296|c>>10&1023,o[a++]=56320|1023&c)}}return((e,i)=>{if(i<65534&&e.subarray&&Pi)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let n=0;n<i;n++)t+=String.fromCharCode(e[n]);return t})(o,a)},utf8border:(e,i)=>{(i=i||e.length)>e.length&&(i=e.length);let t=i-1;for(;t>=0&&128==(192&e[t]);)t--;return t<0||0===t?i:t+Ge[e[t]]>i?t:i}},Ri=function er(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Oi=Object.prototype.toString,{Z_NO_FLUSH:tr,Z_SYNC_FLUSH:ir,Z_FULL_FLUSH:nr,Z_FINISH:ar,Z_OK:rt,Z_STREAM_END:rr,Z_DEFAULT_COMPRESSION:or,Z_DEFAULT_STRATEGY:sr,Z_DEFLATED:lr}=ye;function We(e){this.options=at.assign({level:or,method:lr,chunkSize:16384,windowBits:15,memLevel:8,strategy:sr},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ri,this.strm.avail_out=0;let t=Ye.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==rt)throw new Error(be[t]);if(i.header&&Ye.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(n="string"==typeof i.dictionary?qe.string2buf(i.dictionary):"[object ArrayBuffer]"===Oi.call(i.dictionary)?new Uint8Array(i.dictionary):i.dictionary,t=Ye.deflateSetDictionary(this.strm,n),t!==rt)throw new Error(be[t]);this._dict_set=!0}}function Dt(e,i){const t=new We(i);if(t.push(e,!0),t.err)throw t.msg||be[t.err];return t.result}We.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize;let a,o;if(this.ended)return!1;for(o=i===~~i?i:!0===i?ar:tr,t.input="string"==typeof e?qe.string2buf(e):"[object ArrayBuffer]"===Oi.call(e)?new Uint8Array(e):e,t.next_in=0,t.avail_in=t.input.length;;)if(0===t.avail_out&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(o===ir||o===nr)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(a=Ye.deflate(t,o),a===rr)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=Ye.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===rt;if(0!==t.avail_out){if(o>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(0===t.avail_in)break}else this.onData(t.output)}return!0},We.prototype.onData=function(e){this.chunks.push(e)},We.prototype.onEnd=function(e){e===rt&&(this.result=at.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var gr={Deflate:We,deflate:Dt,deflateRaw:function cr(e,i){return(i=i||{}).raw=!0,Dt(e,i)},gzip:function dr(e,i){return(i=i||{}).gzip=!0,Dt(e,i)},constants:ye};const ot=16209;var wr=function(i,t){let n,a,o,c,s,f,l,d,w,u,_,g,O,T,y,R,E,h,C,F,v,L,S,A;const Z=i.state;n=i.next_in,S=i.input,a=n+(i.avail_in-5),o=i.next_out,A=i.output,c=o-(t-i.avail_out),s=o+(i.avail_out-257),f=Z.dmax,l=Z.wsize,d=Z.whave,w=Z.wnext,u=Z.window,_=Z.hold,g=Z.bits,O=Z.lencode,T=Z.distcode,y=(1<<Z.lenbits)-1,R=(1<<Z.distbits)-1;e:do{g<15&&(_+=S[n++]<<g,g+=8,_+=S[n++]<<g,g+=8),E=O[_&y];t:for(;;){if(h=E>>>24,_>>>=h,g-=h,h=E>>>16&255,0===h)A[o++]=65535&E;else{if(!(16&h)){if(64&h){if(32&h){Z.mode=16191;break e}i.msg="invalid literal/length code",Z.mode=ot;break e}E=O[(65535&E)+(_&(1<<h)-1)];continue t}for(C=65535&E,h&=15,h&&(g<h&&(_+=S[n++]<<g,g+=8),C+=_&(1<<h)-1,_>>>=h,g-=h),g<15&&(_+=S[n++]<<g,g+=8,_+=S[n++]<<g,g+=8),E=T[_&R];;){if(h=E>>>24,_>>>=h,g-=h,h=E>>>16&255,16&h){if(F=65535&E,h&=15,g<h&&(_+=S[n++]<<g,g+=8,g<h&&(_+=S[n++]<<g,g+=8)),F+=_&(1<<h)-1,F>f){i.msg="invalid distance too far back",Z.mode=ot;break e}if(_>>>=h,g-=h,h=o-c,F>h){if(h=F-h,h>d&&Z.sane){i.msg="invalid distance too far back",Z.mode=ot;break e}if(v=0,L=u,0===w){if(v+=l-h,h<C){C-=h;do{A[o++]=u[v++]}while(--h);v=o-F,L=A}}else if(w<h){if(v+=l+w-h,h-=w,h<C){C-=h;do{A[o++]=u[v++]}while(--h);if(v=0,w<C){h=w,C-=h;do{A[o++]=u[v++]}while(--h);v=o-F,L=A}}}else if(v+=w-h,h<C){C-=h;do{A[o++]=u[v++]}while(--h);v=o-F,L=A}for(;C>2;)A[o++]=L[v++],A[o++]=L[v++],A[o++]=L[v++],C-=3;C&&(A[o++]=L[v++],C>1&&(A[o++]=L[v++]))}else{v=o-F;do{A[o++]=A[v++],A[o++]=A[v++],A[o++]=A[v++],C-=3}while(C>2);C&&(A[o++]=A[v++],C>1&&(A[o++]=A[v++]))}break}if(64&h){i.msg="invalid distance code",Z.mode=ot;break e}E=T[(65535&E)+(_&(1<<h)-1)]}}break}}while(n<a&&o<s);C=g>>3,n-=C,g-=C<<3,_&=(1<<g)-1,i.next_in=n,i.next_out=o,i.avail_in=n<a?a-n+5:5-(n-a),i.avail_out=o<s?s-o+257:257-(o-s),Z.hold=_,Z.bits=g};const vr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),br=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yr=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Qe=(e,i,t,n,a,o,c,s)=>{const f=s.bits;let E,h,C,F,v,S,l=0,d=0,w=0,u=0,_=0,g=0,O=0,T=0,y=0,R=0,L=null;const A=new Uint16Array(16),Z=new Uint16Array(16);let Cn,_t,ht,je=null;for(l=0;l<=15;l++)A[l]=0;for(d=0;d<n;d++)A[i[t+d]]++;for(_=f,u=15;u>=1&&0===A[u];u--);if(_>u&&(_=u),0===u)return a[o++]=20971520,a[o++]=20971520,s.bits=1,0;for(w=1;w<u&&0===A[w];w++);for(_<w&&(_=w),T=1,l=1;l<=15;l++)if(T<<=1,T-=A[l],T<0)return-1;if(T>0&&(0===e||1!==u))return-1;for(Z[1]=0,l=1;l<15;l++)Z[l+1]=Z[l]+A[l];for(d=0;d<n;d++)0!==i[t+d]&&(c[Z[i[t+d]]++]=d);if(0===e?(L=je=c,S=20):1===e?(L=vr,je=br,S=257):(L=yr,je=xr,S=0),R=0,d=0,l=w,v=o,g=_,O=0,C=-1,y=1<<_,F=y-1,1===e&&y>852||2===e&&y>592)return 1;for(;;){Cn=l-O,c[d]+1<S?(_t=0,ht=c[d]):c[d]>=S?(_t=je[c[d]-S],ht=L[c[d]-S]):(_t=96,ht=0),E=1<<l-O,h=1<<g,w=h;do{h-=E,a[v+(R>>O)+h]=Cn<<24|_t<<16|ht|0}while(0!==h);for(E=1<<l-1;R&E;)E>>=1;if(0!==E?(R&=E-1,R+=E):R=0,d++,0==--A[l]){if(l===u)break;l=i[t+c[d]]}if(l>_&&(R&F)!==C){for(0===O&&(O=_),v+=w,g=l-O,T=1<<g;g+O<u&&(T-=A[g+O],!(T<=0));)g++,T<<=1;if(y+=1<<g,1===e&&y>852||2===e&&y>592)return 1;C=R&F,a[C]=_<<24|g<<16|v-o|0}}return 0!==R&&(a[v+R]=l-O<<24|64<<16|0),s.bits=_,0};const{Z_FINISH:Mi,Z_BLOCK:Tr,Z_TREES:st,Z_OK:Ae,Z_STREAM_END:Ar,Z_NEED_DICT:Er,Z_STREAM_ERROR:ie,Z_DATA_ERROR:Fi,Z_MEM_ERROR:Bi,Z_BUF_ERROR:jr,Z_DEFLATED:Ki}=ye,lt=16180,ct=16190,fe=16191,dt=16199,ft=16200,N=16209,pn=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Sr(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ee=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.mode<lt||i.mode>16211?1:0},gn=e=>{if(Ee(e))return ie;const i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=1&i.wrap),i.mode=lt,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(852),i.distcode=i.distdyn=new Int32Array(592),i.sane=1,i.back=-1,Ae},mn=e=>{if(Ee(e))return ie;const i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,gn(e)},wn=(e,i)=>{let t;if(Ee(e))return ie;const n=e.state;return i<0?(t=0,i=-i):(t=5+(i>>4),i<48&&(i&=15)),i&&(i<8||i>15)?ie:(null!==n.window&&n.wbits!==i&&(n.window=null),n.wrap=t,n.wbits=i,mn(e))},vn=(e,i)=>{if(!e)return ie;const t=new Sr;e.state=t,t.strm=e,t.window=null,t.mode=lt;const n=wn(e,i);return n!==Ae&&(e.state=null),n};let Ft,Bt,bn=!0;const Rr=e=>{if(bn){Ft=new Int32Array(512),Bt=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(Qe(1,e.lens,0,288,Ft,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;Qe(2,e.lens,0,32,Bt,0,e.work,{bits:5}),bn=!1}e.lencode=Ft,e.lenbits=9,e.distcode=Bt,e.distbits=5},yn=(e,i,t,n)=>{let a;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(i.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>n&&(a=n),o.window.set(i.subarray(t-n,t-n+a),o.wnext),(n-=a)?(o.window.set(i.subarray(t-n,t),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0};var _e={inflateReset:mn,inflateReset2:wn,inflateResetKeep:gn,inflateInit:e=>vn(e,15),inflateInit2:vn,inflate:(e,i)=>{let t,n,a,o,c,s,f,l,d,w,u,_,g,O,y,R,E,h,C,F,v,L,T=0;const S=new Uint8Array(4);let A,Z;const je=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ee(e)||!e.output||!e.input&&0!==e.avail_in)return ie;t=e.state,t.mode===fe&&(t.mode=16192),c=e.next_out,a=e.output,f=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=t.hold,d=t.bits,w=s,u=f,L=Ae;e:for(;;)switch(t.mode){case lt:if(0===t.wrap){t.mode=16192;break}for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(2&t.wrap&&35615===l){0===t.wbits&&(t.wbits=15),t.check=0,S[0]=255&l,S[1]=l>>>8&255,t.check=B(t.check,S,2,0),l=0,d=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=N;break}if((15&l)!==Ki){e.msg="unknown compression method",t.mode=N;break}if(l>>>=4,d-=4,v=8+(15&l),0===t.wbits&&(t.wbits=v),v>15||v>t.wbits){e.msg="invalid window size",t.mode=N;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&l?16189:fe,l=0,d=0;break;case 16181:for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(t.flags=l,(255&t.flags)!==Ki){e.msg="unknown compression method",t.mode=N;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=N;break}t.head&&(t.head.text=l>>8&1),512&t.flags&&4&t.wrap&&(S[0]=255&l,S[1]=l>>>8&255,t.check=B(t.check,S,2,0)),l=0,d=0,t.mode=16182;case 16182:for(;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.head&&(t.head.time=l),512&t.flags&&4&t.wrap&&(S[0]=255&l,S[1]=l>>>8&255,S[2]=l>>>16&255,S[3]=l>>>24&255,t.check=B(t.check,S,4,0)),l=0,d=0,t.mode=16183;case 16183:for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.head&&(t.head.xflags=255&l,t.head.os=l>>8),512&t.flags&&4&t.wrap&&(S[0]=255&l,S[1]=l>>>8&255,t.check=B(t.check,S,2,0)),l=0,d=0,t.mode=16184;case 16184:if(1024&t.flags){for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.length=l,t.head&&(t.head.extra_len=l),512&t.flags&&4&t.wrap&&(S[0]=255&l,S[1]=l>>>8&255,t.check=B(t.check,S,2,0)),l=0,d=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(_=t.length,_>s&&(_=s),_&&(t.head&&(v=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(o,o+_),v)),512&t.flags&&4&t.wrap&&(t.check=B(t.check,n,_,o)),s-=_,o+=_,t.length-=_),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(0===s)break e;_=0;do{v=n[o+_++],t.head&&v&&t.length<65536&&(t.head.name+=String.fromCharCode(v))}while(v&&_<s);if(512&t.flags&&4&t.wrap&&(t.check=B(t.check,n,_,o)),s-=_,o+=_,v)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(0===s)break e;_=0;do{v=n[o+_++],t.head&&v&&t.length<65536&&(t.head.comment+=String.fromCharCode(v))}while(v&&_<s);if(512&t.flags&&4&t.wrap&&(t.check=B(t.check,n,_,o)),s-=_,o+=_,v)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;d<16;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(4&t.wrap&&l!==(65535&t.check)){e.msg="header crc mismatch",t.mode=N;break}l=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=fe;break;case 16189:for(;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}e.adler=t.check=pn(l),l=0,d=0,t.mode=ct;case ct:if(0===t.havedict)return e.next_out=c,e.avail_out=f,e.next_in=o,e.avail_in=s,t.hold=l,t.bits=d,Er;e.adler=t.check=1,t.mode=fe;case fe:if(i===Tr||i===st)break e;case 16192:if(t.last){l>>>=7&d,d-=7&d,t.mode=16206;break}for(;d<3;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}switch(t.last=1&l,l>>>=1,d-=1,3&l){case 0:t.mode=16193;break;case 1:if(Rr(t),t.mode=dt,i===st){l>>>=2,d-=2;break e}break;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=N}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=N;break}if(t.length=65535&l,l=0,d=0,t.mode=16194,i===st)break e;case 16194:t.mode=16195;case 16195:if(_=t.length,_){if(_>s&&(_=s),_>f&&(_=f),0===_)break e;a.set(n.subarray(o,o+_),c),s-=_,o+=_,f-=_,c+=_,t.length-=_;break}t.mode=fe;break;case 16196:for(;d<14;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(t.nlen=257+(31&l),l>>>=5,d-=5,t.ndist=1+(31&l),l>>>=5,d-=5,t.ncode=4+(15&l),l>>>=4,d-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=N;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;d<3;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.lens[je[t.have++]]=7&l,l>>>=3,d-=3}for(;t.have<19;)t.lens[je[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,A={bits:t.lenbits},L=Qe(0,t.lens,0,19,t.lencode,0,t.work,A),t.lenbits=A.bits,L){e.msg="invalid code lengths set",t.mode=N;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;T=t.lencode[l&(1<<t.lenbits)-1],y=T>>>24,R=T>>>16&255,E=65535&T,!(y<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(E<16)l>>>=y,d-=y,t.lens[t.have++]=E;else{if(16===E){for(Z=y+2;d<Z;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(l>>>=y,d-=y,0===t.have){e.msg="invalid bit length repeat",t.mode=N;break}v=t.lens[t.have-1],_=3+(3&l),l>>>=2,d-=2}else if(17===E){for(Z=y+3;d<Z;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=y,d-=y,v=0,_=3+(7&l),l>>>=3,d-=3}else{for(Z=y+7;d<Z;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=y,d-=y,v=0,_=11+(127&l),l>>>=7,d-=7}if(t.have+_>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=N;break}for(;_--;)t.lens[t.have++]=v}}if(t.mode===N)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=N;break}if(t.lenbits=9,A={bits:t.lenbits},L=Qe(1,t.lens,0,t.nlen,t.lencode,0,t.work,A),t.lenbits=A.bits,L){e.msg="invalid literal/lengths set",t.mode=N;break}if(t.distbits=6,t.distcode=t.distdyn,A={bits:t.distbits},L=Qe(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,A),t.distbits=A.bits,L){e.msg="invalid distances set",t.mode=N;break}if(t.mode=dt,i===st)break e;case dt:t.mode=ft;case ft:if(s>=6&&f>=258){e.next_out=c,e.avail_out=f,e.next_in=o,e.avail_in=s,t.hold=l,t.bits=d,wr(e,u),c=e.next_out,a=e.output,f=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,l=t.hold,d=t.bits,t.mode===fe&&(t.back=-1);break}for(t.back=0;T=t.lencode[l&(1<<t.lenbits)-1],y=T>>>24,R=T>>>16&255,E=65535&T,!(y<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(R&&!(240&R)){for(h=y,C=R,F=E;T=t.lencode[F+((l&(1<<h+C)-1)>>h)],y=T>>>24,R=T>>>16&255,E=65535&T,!(h+y<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=h,d-=h,t.back+=h}if(l>>>=y,d-=y,t.back+=y,t.length=E,0===R){t.mode=16205;break}if(32&R){t.back=-1,t.mode=fe;break}if(64&R){e.msg="invalid literal/length code",t.mode=N;break}t.extra=15&R,t.mode=16201;case 16201:if(t.extra){for(Z=t.extra;d<Z;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;T=t.distcode[l&(1<<t.distbits)-1],y=T>>>24,R=T>>>16&255,E=65535&T,!(y<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(!(240&R)){for(h=y,C=R,F=E;T=t.distcode[F+((l&(1<<h+C)-1)>>h)],y=T>>>24,R=T>>>16&255,E=65535&T,!(h+y<=d);){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}l>>>=h,d-=h,t.back+=h}if(l>>>=y,d-=y,t.back+=y,64&R){e.msg="invalid distance code",t.mode=N;break}t.offset=E,t.extra=15&R,t.mode=16203;case 16203:if(t.extra){for(Z=t.extra;d<Z;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=N;break}t.mode=16204;case 16204:if(0===f)break e;if(_=u-f,t.offset>_){if(_=t.offset-_,_>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=N;break}_>t.wnext?(_-=t.wnext,g=t.wsize-_):g=t.wnext-_,_>t.length&&(_=t.length),O=t.window}else O=a,g=c-t.offset,_=t.length;_>f&&(_=f),f-=_,t.length-=_;do{a[c++]=O[g++]}while(--_);0===t.length&&(t.mode=ft);break;case 16205:if(0===f)break e;a[c++]=t.length,f--,t.mode=ft;break;case 16206:if(t.wrap){for(;d<32;){if(0===s)break e;s--,l|=n[o++]<<d,d+=8}if(u-=f,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=t.flags?B(t.check,a,u,c-u):Fe(t.check,a,u,c-u)),u=f,4&t.wrap&&(t.flags?l:pn(l))!==t.check){e.msg="incorrect data check",t.mode=N;break}l=0,d=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;d<32;){if(0===s)break e;s--,l+=n[o++]<<d,d+=8}if(4&t.wrap&&l!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=N;break}l=0,d=0}t.mode=16208;case 16208:L=Ar;break e;case N:L=Fi;break e;case 16210:return Bi;default:return ie}return e.next_out=c,e.avail_out=f,e.next_in=o,e.avail_in=s,t.hold=l,t.bits=d,(t.wsize||u!==e.avail_out&&t.mode<N&&(t.mode<16206||i!==Mi))&&yn(e,e.output,e.next_out,u-e.avail_out),w-=e.avail_in,u-=e.avail_out,e.total_in+=w,e.total_out+=u,t.total+=u,4&t.wrap&&u&&(e.adler=t.check=t.flags?B(t.check,a,u,e.next_out-u):Fe(t.check,a,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===fe?128:0)+(t.mode===dt||16194===t.mode?256:0),(0===w&&0===u||i===Mi)&&L===Ae&&(L=jr),L},inflateEnd:e=>{if(Ee(e))return ie;let i=e.state;return i.window&&(i.window=null),e.state=null,Ae},inflateGetHeader:(e,i)=>{if(Ee(e))return ie;const t=e.state;return 2&t.wrap?(t.head=i,i.done=!1,Ae):ie},inflateSetDictionary:(e,i)=>{const t=i.length;let n,a,o;return Ee(e)||(n=e.state,0!==n.wrap&&n.mode!==ct)?ie:n.mode===ct&&(a=1,a=Fe(a,i,t,0),a!==n.check)?Fi:(o=yn(e,i,t,t),o?(n.mode=16210,Bi):(n.havedict=1,Ae))},inflateInfo:"pako inflate (from Nodeca project)"},qr=function Gr(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const xn=Object.prototype.toString,{Z_NO_FLUSH:Wr,Z_FINISH:Qr,Z_OK:Xe,Z_STREAM_END:Kt,Z_NEED_DICT:$t,Z_STREAM_ERROR:Xr,Z_DATA_ERROR:kn,Z_MEM_ERROR:Vr}=ye;function Ve(e){this.options=at.assign({chunkSize:65536,windowBits:15,to:""},e||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(15&i.windowBits||(i.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ri,this.strm.avail_out=0;let t=_e.inflateInit2(this.strm,i.windowBits);if(t!==Xe)throw new Error(be[t]);if(this.header=new qr,_e.inflateGetHeader(this.strm,this.header),i.dictionary&&("string"==typeof i.dictionary?i.dictionary=qe.string2buf(i.dictionary):"[object ArrayBuffer]"===xn.call(i.dictionary)&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=_e.inflateSetDictionary(this.strm,i.dictionary),t!==Xe)))throw new Error(be[t])}function Ht(e,i){const t=new Ve(i);if(t.push(e),t.err)throw t.msg||be[t.err];return t.result}Ve.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let o,c,s;if(this.ended)return!1;for(c=i===~~i?i:!0===i?Qr:Wr,t.input="[object ArrayBuffer]"===xn.call(e)?new Uint8Array(e):e,t.next_in=0,t.avail_in=t.input.length;;){for(0===t.avail_out&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),o=_e.inflate(t,c),o===$t&&a&&(o=_e.inflateSetDictionary(t,a),o===Xe?o=_e.inflate(t,c):o===kn&&(o=$t));t.avail_in>0&&o===Kt&&t.state.wrap>0&&0!==e[t.next_in];)_e.inflateReset(t),o=_e.inflate(t,c);switch(o){case Xr:case kn:case $t:case Vr:return this.onEnd(o),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(0===t.avail_out||o===Kt))if("string"===this.options.to){let f=qe.utf8border(t.output,t.next_out),l=t.next_out-f,d=qe.buf2string(t.output,f);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(f,f+l),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(o!==Xe||0!==s){if(o===Kt)return o=_e.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===t.avail_in)break}}return!0},Ve.prototype.onData=function(e){this.chunks.push(e)},Ve.prototype.onEnd=function(e){e===Xe&&(this.result="string"===this.options.to?this.chunks.join(""):at.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var oo={Inflate:Ve,inflate:Ht,inflateRaw:function eo(e,i){return(i=i||{}).raw=!0,Ht(e,i)},ungzip:Ht,constants:ye};const{deflate:lo}=gr,{inflate:ho}=oo;var Tn=lo,An=ho,H=m(6223),ko=m(8962),En=m(4403),jn=m(2119),To=m(9304),Ao=m(9989),Eo=m(3148);let jo=(()=>{class e{constructor(t,n,a,o){this.projectSerializer=t,this.actSerializer=n,this.intSerializer=a,this.tagManager=o}mapJiraProject(t){const n=t.issues,a=new Map,o=this.projectSerializer.fromJson();if(n.length>0){o.profile.name=n[0].fields.project?.name??"Jira Project",o.profile.id=-1,n.forEach((s,f)=>{a.set(s.key,f)});const c=n.map(s=>s.fields.assignee?.displayName).filter(s=>!!s);return this.tagManager.addTagGroup(o,En.dZ,c),n.forEach(s=>{const f=this.actSerializer.fromJson(),l=a.get(s.key);if(void 0!==l){if(f.profile.id=l,f.profile.name=s.fields.summary,f.profile.jiraIssueKey=s.key,f.profile.planned_completion_date=s.fields.duedate,f.profile.duration=s.fields.customfield_10016?s.fields.customfield_10016/2:0,this.tagManager.addTagToActivities(o,s.fields.assignee?.displayName,En.dZ,[f]),s.fields.issuelinks){const d=s.fields.issuelinks?.filter(w=>!!w.inwardIssue).map(w=>w.inwardIssue?.key&&"is blocked by"===w.type?.inward?a.get(w.inwardIssue?.key):null);d?.length&&(f.profile.depends_on=(d?.filter(w=>null!==w)).join(","))}o.activities.push(f)}}),this.generateNodes(o),o}return null}generateNodes(t){let n=0;const a=this.intSerializer;t.activities.forEach((o,c)=>{o.chartInfo.source_id=++n;const s=a.fromJson({id:n,name:n});o.chartInfo.target_id=++n;const f=a.fromJson({id:n,name:n}),l=Math.floor(c/20),d=c%20;s.x=50+120*l,s.y=40*(d+1),f.x=120+120*l,f.y=40*(d+1),t.integrations.push(s),t.integrations.push(f)})}addIssueKeysToArrows(t,n){n.forEach((a,o)=>{t[o].profile.jiraIssueKey=a.key})}getIssueLinks(t){const n=new Map(t.activities.map(o=>[o.profile.id,o])),a=[];return t.activities.forEach(o=>{o.profile.depends_on&&o.profile.depends_on.split(",").forEach(s=>{const l=n.get(+s)?.profile.jiraIssueKey,d=o.profile.jiraIssueKey;if(l&&d){const w=this.createIssueLinkBody(l,d);a.push(w)}})}),a}mapProjectToJiraIssues(t,n,a,o){return t.map(s=>({fields:{issuetype:{id:o},summary:s.profile.name,project:{id:n},assignee:{id:a},reporter:{id:a}}}))}createIssueLinkBody(t,n){return{inwardIssue:{key:t},outwardIssue:{key:n},type:{name:"Blocks"}}}getCreateJiraProjectBody(t,n=null,a=null){return{assigneeType:"UNASSIGNED",description:"Project Design sample project 1",issueSecurityScheme:10001,key:n=n||"DP",leadAccountId:t,name:a=a||"Default Project Name",notificationScheme:1e4,permissionScheme:0,projectTemplateKey:"com.pyxis.greenhopper.jira:gh-simplified-agility-kanban",projectTypeKey:"software",url:"http://atlassian.com"}}base64_arraybuffer(t){return(0,x.Z)(function*(){return(yield new Promise(a=>{const o=new FileReader;o.onload=()=>a(o.result),o.readAsDataURL(new Blob([t]))})).split(",",2)[1]})()}base64StringToByteArray(t){const n=window.atob(t),a=n.length,o=new Uint8Array(a);for(let c=0;c<a;c++){const s=n.charCodeAt(c);o[c]=s}return o}static#e=this.\u0275fac=function(n){return new(n||e)(r.LFG(jn.z),r.LFG(To.w),r.LFG(Ao.i),r.LFG(Eo.c))};static#t=this.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var In=m(9680),Io=m(2787),Co=m(2357);function Zo(e,i){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.ALo(2,"date"),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.hij("Auth Expires: ",r.xi3(2,1,t.authExpireTime,"long"),"")}}function So(e,i){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Oqu(t.me.displayName)}}function Po(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",17)(1,"a",18),r.NdJ("click",function(){const o=r.CHM(t).$implicit,c=r.oxw(2);return r.KtG(c.selectProject(o))}),r._uU(2),r.qZA()()}if(2&e){const t=i.$implicit;r.xp6(2),r.Oqu(t.name)}}function Ro(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",12)(1,"div",13)(2,"div")(3,"button",14),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.selectedTab="new-proj")}),r._uU(4,"Create New Project"),r.qZA()(),r.TgZ(5,"div",15),r._uU(6,"Projects"),r.qZA(),r.YNc(7,Po,3,1,"div",16),r.qZA()()}if(2&e){const t=r.oxw();r.xp6(7),r.Q6J("ngForOf",t.projects)}}function Oo(e,i){1&e&&(r.TgZ(0,"div",19),r._UZ(1,"cp-arrow-chart",20),r._uU(2," - "),r.qZA()),2&e&&(r.xp6(1),r.Q6J("width",300)("height",200)("showFastCreator",!1)("rebuild",!0))}function zo(e,i){if(1&e&&(r.TgZ(0,"option",26),r._uU(1),r.qZA()),2&e){const t=i.$implicit;r.s9C("value",t.id),r.xp6(1),r.Oqu(t.description.split(" ")[0])}}function Lo(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",21)(1,"div",22)(2,"div",23),r._uU(3),r.qZA(),r.TgZ(4,"div",23),r._uU(5),r.qZA(),r.TgZ(6,"div",23)(7,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.newArrowChart())}),r._uU(8,"New Arrow Chart"),r.qZA()(),r.TgZ(9,"div",23)(10,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.updateDependencies())}),r._uU(11,"Update Dependencies"),r.qZA()(),r.TgZ(12,"div",23)(13,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.getIssueTypes())}),r._uU(14,"Populate Issue Types"),r.qZA(),r.TgZ(15,"select",24),r.NdJ("change",function(a){r.CHM(t);const o=r.oxw();return r.KtG(o.setIssueType(a.target))}),r.YNc(16,zo,2,2,"option",25),r.qZA()(),r.TgZ(17,"div",23)(18,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.getProjectProperty())}),r._uU(19,"Load Chart From Jira"),r.qZA(),r.TgZ(20,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.setProjectProperty())}),r._uU(21,"Save Chart To Jira"),r.qZA()(),r.TgZ(22,"div",23)(23,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.createJiraProject())}),r._uU(24,"Create Jira Project"),r.qZA(),r.TgZ(25,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.deleteJiraProject())}),r._uU(26,"Delete This Jira Project"),r.qZA()(),r.TgZ(27,"div",23)(28,"a",18),r.NdJ("click",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.createIssueLink())}),r._uU(29,"Create Issue Links"),r.qZA()()()()}if(2&e){const t=r.oxw();r.xp6(3),r.hij("Project: ",null==t.selectedProject?null:t.selectedProject.name,""),r.xp6(2),r.hij("Key: ",null==t.selectedProject?null:t.selectedProject.key,""),r.xp6(11),r.Q6J("ngForOf",t.projIssueTypes)}}function Do(e,i){if(1&e&&(r.TgZ(0,"div",29),r._uU(1),r.qZA()),2&e){const t=i.$implicit;r.xp6(1),r.Oqu(t.profile.name)}}function Uo(e,i){if(1&e&&(r.TgZ(0,"div",27),r.YNc(1,Do,2,1,"div",28),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",null==t.issuesProject?null:t.issuesProject.activities)}}function No(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Project Loaded"),r.qZA())}function Jo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Please load a project"),r.qZA())}function Mo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Project Key is required"),r.qZA())}function Fo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1," Key needs to be 2 or 3 chars "),r.qZA())}function Bo(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Duplicate project key detected"),r.qZA())}function Ko(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Project Name is required"),r.qZA())}function $o(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Name needs to be 4 chars or more"),r.qZA())}function Ho(e,i){1&e&&(r.TgZ(0,"div"),r._uU(1,"Duplicate project name detected"),r.qZA())}function Yo(e,i){if(1&e&&(r.TgZ(0,"div")(1,"div"),r._uU(2),r.qZA()()),2&e){const t=i.$implicit;r.xp6(2),r.AsE("",t.key,": ",t.value,"")}}function Go(e,i){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,Yo,3,2,"div",42),r.ALo(2,"keyvalue"),r.qZA()),2&e){const t=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,1,t.newProjectForm.errors))}}function qo(e,i){1&e&&(r.TgZ(0,"a",43),r._uU(1,"Arrow to New Jira Project"),r.qZA())}function Wo(e,i){1&e&&(r.TgZ(0,"a"),r._uU(1,"Arrow to New Jira Project"),r.qZA())}function Qo(e,i){1&e&&r._UZ(0,"div",44)}function Xo(e,i){if(1&e){const t=r.EpF();r.TgZ(0,"div",21)(1,"form",30),r.NdJ("ngSubmit",function(){r.CHM(t);const a=r.oxw();return r.KtG(a.createFullJiraProject())}),r.TgZ(2,"div")(3,"div"),r.YNc(4,No,2,0,"div",7)(5,Jo,2,0,"div",7),r.qZA(),r.TgZ(6,"div")(7,"div"),r._uU(8,"Project Key"),r.qZA(),r.TgZ(9,"input",31),r.NdJ("change",function(a){r.CHM(t);const o=r.oxw();return r.KtG(o.setProjKey(a))}),r.qZA(),r.YNc(10,Mo,2,0,"div",7)(11,Fo,2,0,"div",7)(12,Bo,2,0,"div",7),r.qZA(),r.TgZ(13,"div")(14,"div"),r._uU(15,"Project Name"),r.qZA(),r.TgZ(16,"input",32),r.NdJ("change",function(a){r.CHM(t);const o=r.oxw();return r.KtG(o.setProjName(a))}),r.qZA(),r.YNc(17,Ko,2,0,"div",7)(18,$o,2,0,"div",7)(19,Ho,2,0,"div",7),r.qZA(),r.TgZ(20,"div",33)(21,"div"),r._uU(22,"Project Lead"),r.qZA(),r.TgZ(23,"select",34)(24,"option",35),r._uU(25,"Task"),r.qZA()()(),r.TgZ(26,"div",33)(27,"div"),r._uU(28,"Project Template"),r.qZA(),r.TgZ(29,"select",36)(30,"option",35),r._uU(31,"Team Run"),r.qZA(),r.TgZ(32,"option",35),r._uU(33,"Company Run"),r.qZA()()(),r.TgZ(34,"div",33)(35,"div"),r._uU(36,"Issue Type"),r.qZA(),r.TgZ(37,"select",37)(38,"option",35),r._uU(39,"Task"),r.qZA()()(),r.TgZ(40,"div",38),r.YNc(41,Go,3,3,"div",7),r.TgZ(42,"button",39),r._uU(43," Arrow to New Jira Project "),r.qZA(),r.TgZ(44,"div"),r.YNc(45,qo,2,0,"a",40)(46,Wo,2,0,"a",7),r.qZA()()()(),r.YNc(47,Qo,1,0,"div",41),r.qZA()}if(2&e){const t=r.oxw();let n,a,o,c,s,f;r.xp6(1),r.Q6J("formGroup",t.newProjectForm),r.xp6(3),r.Q6J("ngIf",null==t.project||null==t.project.integrations?null:t.project.integrations.length),r.xp6(1),r.Q6J("ngIf",!(null!=t.project&&null!=t.project.integrations&&t.project.integrations.length)),r.xp6(4),r.Q6J("value",t.projKey),r.xp6(1),r.Q6J("ngIf",null==(n=t.newProjectForm.get("key"))?null:n.hasError("required")),r.xp6(1),r.Q6J("ngIf",(null==(a=t.newProjectForm.get("key"))?null:a.hasError("minlength"))||(null==(a=t.newProjectForm.get("key"))?null:a.hasError("maxlength"))),r.xp6(1),r.Q6J("ngIf",null==(o=t.newProjectForm.get("key"))?null:o.hasError("duplicate")),r.xp6(4),r.Q6J("value",t.projName),r.xp6(1),r.Q6J("ngIf",null==(c=t.newProjectForm.get("name"))?null:c.hasError("required")),r.xp6(1),r.Q6J("ngIf",null==(s=t.newProjectForm.get("name"))?null:s.hasError("minlength")),r.xp6(1),r.Q6J("ngIf",null==(f=t.newProjectForm.get("name"))?null:f.hasError("duplicate")),r.xp6(22),r.Q6J("ngIf",t.newProjectForm.errors),r.xp6(1),r.Q6J("disabled",!t.newProjectForm.valid||!(null!=t.project&&null!=t.project.integrations&&t.project.integrations.length)),r.xp6(3),r.Q6J("ngIf",null==t.project||null==t.project.integrations?null:t.project.integrations.length),r.xp6(1),r.Q6J("ngIf",!(null!=t.project&&null!=t.project.integrations&&t.project.integrations.length)),r.xp6(1),r.Q6J("ngIf",t.projects.length>0)}}const Yt=e=>({active:e});let Vo=(()=>{class e{constructor(t,n,a,o,c,s,f,l,d){this.httpClient=t,this.route=n,this.connector=a,this.dashboard=o,this.importer=c,this.sanitizer=s,this.serializer=f,this.depCrawler=l,this.fb=d,this.cloudId=null,this.project=null,this.baseUrl=j.N.criticalPathApi,this.selectedProject=null,this.projects=[],this.selectedTab=null,this.projectKey=null,this.issueType=null,this.projName=null,this.projKey=null,this.authExpireTime=null,this.me=null,this.issuesProject=null,this.issueTypes=[],this.projIssueTypes=[]}ngOnInit(){const t=this.route.snapshot.queryParams.code;t?this.getJiraToken(t):this.getCloudId(),this.sub=this.dashboard.activeProject$.subscribe(n=>{this.project=n}),this.newProjectForm=this.fb.group({key:["",[H.kI.required,H.kI.minLength(2),H.kI.maxLength(3),this.duplicateError("key")]],name:["",[H.kI.required,H.kI.minLength(4),this.duplicateError("name")]],lead:["",[]],template:["",[]],issueType:["",[]]})}duplicateError(t){return n=>"key"===t&&this.projects.find(a=>a.key.toLocaleLowerCase()===n.value.toLocaleLowerCase())||"name"===t&&this.projects.find(a=>a.name.toLocaleLowerCase()===n.value.toLocaleLowerCase())?{duplicate:!0}:null}onNewProjSubmit(){this.newProjectForm.get("key"),this.newProjectForm.get("name"),this.newProjectForm.get("lead"),this.newProjectForm.get("template"),this.newProjectForm.get("issueType")}ngOnDestroy(){this.sub.unsubscribe()}getMe(){const t=localStorage.getItem(K.sK);if(null!==t){const a={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},o=(0,G.Z)(D,this.cloudId,"rest/api/3/myself");this.httpClient.get(o,a).subscribe(c=>{this.me=c,console.log("users",c)},c=>{console.error("users resonse",c)})}}getJiraToken(t){this.httpClient.get((0,G.Z)(this.baseUrl,"account/jira-token",t)).subscribe(n=>{localStorage.setItem(K.sK,n.access_token);const a=(new Date).getTime()+36e5;localStorage.setItem(K.RH,a+""),this.getCloudId(),this.authExpireTime=new Date(a)},n=>{console.error("token resonse",n);const a=localStorage.getItem(K.RH);a&&(this.authExpireTime=new Date(parseInt(a,10))),this.getCloudId()})}getCloudId(){const t=localStorage.getItem(K.sK);if(null!==t){const a={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.get("https://api.atlassian.com/oauth/token/accessible-resources",a).subscribe(o=>{this.cloudId=o[0].id,this.getProjects(),this.getMe()},o=>{console.error("cloud id resonse",o),this.toJira()})}}setJiraProject(t){this.getJiraProjectResult(t)?.subscribe(n=>{this.project=this.convertIssuesToProject(n),this.dashboard.activeProject$.next(this.project)})}getJiraProjectResult(t){const n=localStorage.getItem(K.sK);if(null!==n){const o={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${n}`)},c=(0,G.Z)(D,this.cloudId,`rest/api/3/search?jql=project%20%3D%20${t.key}`);return this.httpClient.get(c,o)}return null}convertIssuesToProject(t){const n=this.importer.mapJiraProject(t);return n&&this.connector.connectArrowsToNodes(n),n}getProjects(){const t=localStorage.getItem(K.sK);if(null!==t){const a={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},o=(0,G.Z)(D,this.cloudId,"rest/api/3/project/search");this.httpClient.get(o,a).subscribe(c=>{this.projects=c.values.map(s=>({id:s.id,key:s.key,name:s.name})),this.selectedTab="projects"})}}setProjectProperty(t=null){var n=this;return(0,x.Z)(function*(){const a=t?.key??n.selectedProject?.key,o=localStorage.getItem(K.sK);if(null!==o){const c=ti,s=n.serializer.fromJson(n.project);n.sanitizer.sanatizeForSave(s),s.profile.subProject=void 0,s.profile.view=void 0;const f=JSON.stringify(s),l=Tn(f),w={string:yield n.importer.base64_arraybuffer(l)},u=JSON.stringify(w),_=(0,G.Z)(D,n.cloudId,ne,a,ei,c),O={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${o}`)};n.httpClient.put(_,u,O).subscribe(T=>{console.log(T)})}})()}getProjectProperty(){const t=this.selectedProject,n=localStorage.getItem(K.sK);if(null!==n){const o=(0,G.Z)(D,this.cloudId,ne,t.key,ei,ti),s={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${n}`)};this.httpClient.get(o,s).subscribe(f=>{const d=this.importer.base64StringToByteArray(f.value.string),w=An(d,{to:"string"}),u=JSON.parse(w),_=this.serializer.fromJson(u);this.connector.connectArrowsToNodes(_),_.profile.view.autoZoom=!0,this.dashboard.activeProject$.next(_)},f=>{this.setJiraProject(t)})}}updateDependencies(){this.depCrawler.setDependencyDataFromGraph(this.project)}toJira(){window.location.href="https://auth.atlassian.com/authorize?audience=api.atlassian.com&client_id=1SdMM8pTryWCljI1Awm9drfKvnU2BR2H&scope=read%3Ame%20read%3Ajira-work%20manage%3Ajira-project%20read%3Ajira-user%20write%3Ajira-work%20manage%3Ajira-configuration&redirect_uri=https%3A%2F%2Flocalhost%3A4200%2Fjira&state=${YOUR_USER_BOUND_VALUE}&response_type=code&prompt=consent"}selectProject(t){this.projectKey=t.key,this.selectedProject=t,this.selectedTab="viz",this.getJiraProjectResult(t)?.subscribe(n=>{this.issuesProject=this.convertIssuesToProject(n),this.getProjectProperty()})}newArrowChart(){this.selectedProject&&this.setJiraProject(this.selectedProject)}setIssueType(t){this.issueType=t.value}createJiraProject(){const t=localStorage.getItem(K.sK);if(null!==t){const n=(0,G.Z)(D,this.cloudId,ne),o=this.importer.getCreateJiraProjectBody("5c741c367dae4b653384935c"),s={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.post(n,o,s).subscribe(f=>{console.log(f)})}}getIssueTypes(){const t=localStorage.getItem(K.sK),a={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},o=(0,G.Z)(D,this.cloudId,Xt);this.issueTypes=[],this.httpClient.get(o,a).subscribe(c=>{console.log(c),c.forEach(s=>{const f={id:s.id,description:s.description,projectId:s.scope?.project?.id};this.issueTypes.push(f),f.projectId===this.selectedProject?.id&&this.projIssueTypes.push(f)})})}createFullJiraProject(){const t=localStorage.getItem(K.sK),n=this.me.accountId,o={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)},c=this.newProjectForm.get("key")?.value,s=this.newProjectForm.get("name")?.value,f=this.importer.getCreateJiraProjectBody(n,c,s),l=(0,G.Z)(D,this.cloudId,ne);this.httpClient.post(l,f,o).subscribe(d=>{console.log("create project",d);const w=""+d.id,_=(0,G.Z)(D,this.cloudId,Xt);this.issueTypes=[],this.httpClient.get(_,o).subscribe(g=>{console.log(g),g.forEach(T=>{const y={id:T.id,description:T.description,projectId:T.scope?.project?.id};this.issueTypes.push(y),y.projectId===w&&this.projIssueTypes.push(y)});const O=this.projIssueTypes.find(T=>T.projectId===w&&T.description.indexOf("Task")>-1);if(O){const T=O.id,y=this.project.activities.filter(h=>!h.chartInfo.isDummy),E=this.importer.mapProjectToJiraIssues(y,w,n,T).map(h=>{const C=(0,G.Z)(D,this.cloudId,Qt),F=JSON.stringify(h);return this.httpClient.post(C,F,o)});(0,gt.D)(E).subscribe(h=>{this.importer.addIssueKeysToArrows(y,h);const C=this.importer.getIssueLinks(this.project);this.createIssueLinks(C),this.setProjectProperty(d),console.log(h),this.getProjects()},h=>{console.error("error creating jira issues",h)})}},g=>{console.error("error getting issue types",g)})},d=>{console.error("error creating jira base project",d)})}addIssuesToJiraProject(){const n=this.issueType;if(!n)return;const a=this.project.activities.filter(s=>!s.chartInfo.isDummy),c=this.importer.mapProjectToJiraIssues(a,this.selectedProject.id,"5c741c367dae4b653384935c",n).map(s=>{const f=localStorage.getItem(K.sK),l=(0,G.Z)(D,this.cloudId,Qt),d=JSON.stringify(s),u={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${f}`)};return this.httpClient.post(l,d,u)});(0,gt.D)(c).subscribe(s=>{this.importer.addIssueKeysToArrows(a,s);const f=this.importer.getIssueLinks(this.project);this.createIssueLinks(f),this.setProjectProperty(),console.log(s)})}deleteJiraProject(){if(confirm("Are you sure you want to delete this project?")){const t=localStorage.getItem(K.sK);if(null!==t){const a=(0,G.Z)(D,this.cloudId,ne,this.selectedProject.key),c={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.delete(a,c).subscribe(s=>{console.log(s),this.getProjects()})}}}createIssueLink(){const t=localStorage.getItem(K.sK);if(null!==t){const n=(0,G.Z)(D,this.cloudId,Vt),c=this.importer.createIssueLinkBody("P1-8","P1-10"),f={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${t}`)};this.httpClient.post(n,c,f).subscribe(l=>{console.log(l)})}}createIssueLinks(t){const n=localStorage.getItem(K.sK);if(null!==n){const a=(0,G.Z)(D,this.cloudId,Vt),c={headers:(new b.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${n}`)},s=t.map(f=>this.httpClient.post(a,f,c));(0,gt.D)(s).subscribe(f=>{console.log("issueLinks created",f)})}}setProjName(t){this.projName=t.target.value}setProjKey(t){this.projKey=t.target.value}static#e=this.\u0275fac=function(n){return new(n||e)(r.Y36(b.eN),r.Y36(z.gz),r.Y36(ko.E),r.Y36(pt.Ou),r.Y36(jo),r.Y36(In.B),r.Y36(jn.z),r.Y36(Io.v),r.Y36(H.qu))};static#t=this.\u0275cmp=r.Xpm({type:e,selectors:[["critical-pass-jira-layout"]],decls:24,vars:16,consts:[[1,"page-content"],[1,"jira-header"],[1,"jira-buttons"],[1,"nav","nav-tabs"],[1,"nav-item"],["href","javascript:void(0)",1,"nav-link",3,"ngClass","click"],[1,"btn","btn-primary",3,"click"],[4,"ngIf"],["class","project-list",4,"ngIf"],["class","arrow-snapshot",4,"ngIf"],["class","project-actions",4,"ngIf"],["class","jira-issues",4,"ngIf"],[1,"project-list"],[1,"jira-projects"],[1,"btn","btn-secondary",3,"click"],[1,"proj-title"],["class","jira-project",4,"ngFor","ngForOf"],[1,"jira-project"],["href","javascript:void(0)",3,"click"],[1,"arrow-snapshot"],[3,"width","height","showFastCreator","rebuild"],[1,"project-actions"],[1,"action-container"],[1,"jira-action"],[3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"jira-issues"],["class","jira-issue",4,"ngFor","ngForOf"],[1,"jira-issue"],[3,"formGroup","ngSubmit"],["type","text","formControlName","key",3,"value","change"],["type","text","formControlName","name",3,"value","change"],[1,"p-flex"],["name","","id","","formControlName","lead"],["value",""],["name","","id","","formControlName","template"],["name","","id","","formControlName","issueType"],[1,"submit-button"],["type","submit",1,"btn","btn-secondary",3,"disabled"],["href","javascript:void(0)",4,"ngIf"],["class","project-controls",4,"ngIf"],[4,"ngFor","ngForOf"],["href","javascript:void(0)"],[1,"project-controls"]],template:function(n,a){1&n&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),r.NdJ("click",function(){return a.selectedTab="projects"}),r._uU(6,"Projects List"),r.qZA()(),r.TgZ(7,"li",4)(8,"a",5),r.NdJ("click",function(){return a.selectedTab="viz"}),r._uU(9,"Project Viz"),r.qZA()(),r.TgZ(10,"li",4)(11,"a",5),r.NdJ("click",function(){return a.selectedTab="new-proj"}),r._uU(12,"New Project"),r.qZA()()(),r.TgZ(13,"div")(14,"button",6),r.NdJ("click",function(){return a.toJira()}),r._uU(15,"Authorize Jira"),r.qZA()()(),r.TgZ(16,"div"),r.YNc(17,Zo,3,4,"div",7)(18,So,2,1,"div",7),r.qZA()(),r.YNc(19,Ro,8,1,"div",8)(20,Oo,3,4,"div",9)(21,Lo,30,3,"div",10)(22,Uo,2,1,"div",11)(23,Xo,48,16,"div",10),r.qZA()),2&n&&(r.xp6(5),r.Q6J("ngClass",r.VKq(10,Yt,"projects"===a.selectedTab)),r.xp6(3),r.Q6J("ngClass",r.VKq(12,Yt,"viz"===a.selectedTab)),r.xp6(3),r.Q6J("ngClass",r.VKq(14,Yt,"new-proj"===a.selectedTab)),r.xp6(6),r.Q6J("ngIf",null!==a.authExpireTime),r.xp6(1),r.Q6J("ngIf",null!==a.me),r.xp6(1),r.Q6J("ngIf",a.projects.length>0&&"projects"===a.selectedTab),r.xp6(1),r.Q6J("ngIf",a.projects.length>0),r.xp6(1),r.Q6J("ngIf",null!==a.project&&"viz"===a.selectedTab),r.xp6(1),r.Q6J("ngIf",null!==a.issuesProject&&"viz"===a.selectedTab),r.xp6(1),r.Q6J("ngIf","new-proj"===a.selectedTab))},dependencies:[M.mk,M.sg,M.O5,Co.w,H._Y,H.YN,H.Kr,H.Fj,H.EJ,H.JJ,H.JL,H.sg,H.u,M.uU,M.Nd],styles:[".page-content[_ngcontent-%COMP%]{display:flex;grid-gap:20px;margin:15px;color:#666;width:100%}.page-content[_ngcontent-%COMP%]{background-color:#f9f9f9}.page-content[_ngcontent-%COMP%]{padding:12px;flex-wrap:wrap}.jira-projects[_ngcontent-%COMP%]{color:#666}.jira-projects[_ngcontent-%COMP%]   .proj-title[_ngcontent-%COMP%]{padding-top:25px}.jira-projects[_ngcontent-%COMP%]   .jira-project[_ngcontent-%COMP%]{margin:20px}.jira-issue[_ngcontent-%COMP%]{margin:5px;width:25%}.jira-action[_ngcontent-%COMP%]{margin-left:28px;margin-bottom:7px;margin-right:12px}.jira-action[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:22px}.arrow-snapshot[_ngcontent-%COMP%]{grid-column:4/6;grid-row:1/4}.page-content[_ngcontent-%COMP%]{justify-content:space-between}.jira-buttons[_ngcontent-%COMP%]{display:flex;align-items:baseline}.jira-buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:12px}.jira-header[_ngcontent-%COMP%]{grid-row:1/2;grid-column:1/3}.page-content[_ngcontent-%COMP%]{display:grid;grid-template-rows:70px repeat(3,1fr) .5fr;grid-template-columns:repeat(5,1fr);height:calc(100vh - 119px);width:calc(100vw - 267px)}.project-list[_ngcontent-%COMP%], .project-actions[_ngcontent-%COMP%]{grid-row:2/3;grid-column:1/3}.project-controls[_ngcontent-%COMP%]{grid-row:1/2;grid-column:3/4}.action-container[_ngcontent-%COMP%]{padding-top:26px}.submit-button[_ngcontent-%COMP%]{padding-top:20px}.p-flex[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:5px}.p-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:12px}.jira-issues[_ngcontent-%COMP%]{grid-row:3/-1;grid-column:1/4;overflow:auto;display:flex;flex-direction:column;flex-wrap:wrap;margin-left:25px;align-content:flex-start}"]})}return e})();var es=m(2181),ts=m(9397),Gt=m(3830),is=m(2425),ns=m(7649),as=m(155),rs=m(3994);const ss=[{path:"",component:p.r,children:[{path:"",component:Vo},{path:"",component:(()=>{class e{constructor(t,n,a,o,c,s,f){this.toastr=t,this.dashboard=n,this.fCompiler=a,this.projectSanitizer=o,this.zametekApi=c,this.storageApi=s,this.router=f,this.isProcessing=!1}ngOnInit(){this.subscription=this.dashboard.activeProject$.pipe((0,es.h)(t=>!!t)).subscribe(t=>{this.project=t})}buildArrowChart(){this.isProcessing=!0,this.compileArrowGraph(this.project).subscribe(t=>{t?(this.dashboard.updateProject(t,!1),this.isProcessing=!1,this.toastr.success("Build Arrow Chart","Success!")):(this.isProcessing=!1,this.toastr.error("Build Arrow Chart","Project Missing."))},t=>{console.error(t),this.isProcessing=!1,this.toastr.error("Build Arrow Chart","Error occured.")})}compileArrowGraph(t){return this.projectSanitizer.sanitizeNumbers(t),this.zametekApi.compileArrowGraph(t).pipe((0,ts.b)(n=>(n&&this.fCompiler.compileProjectFromFile(n),n)))}ngOnDestroy(){this.subscription?.unsubscribe()}navToNetwork(){this.project.profile.view.autoZoom=!0,this.storageApi.set(Gt._k,this.project),this.router.navigateByUrl(K.OD)}getProjectFromStorage(){var t=this;return(0,x.Z)(function*(){const n=yield t.storageApi.get(Gt._k);n&&(t.project=n,t.dashboard.updateProject(n,!1))})()}unstash(){var t=this;return(0,x.Z)(function*(){try{const n=yield t.storageApi.get(Gt.H3);n&&t.dashboard.activeProject$.next(n)}catch(n){return t.toastr.error("Unstash Chart","Error occured."),void console.error(n)}t.toastr.success("Unstash Chart","Success!")})()}static#e=this.\u0275fac=function(n){return new(n||e)(r.Y36(is._W),r.Y36(pt.Ou),r.Y36(ns.h),r.Y36(In.B),r.Y36(as.v),r.Y36(pt.$y),r.Y36(z.F0))};static#t=this.\u0275cmp=r.Xpm({type:e,selectors:[["critical-pass-jira-bar"]],decls:10,vars:0,consts:[[1,"meta-bar"],["href","javascript:void(0)",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(n,a){1&n&&(r._UZ(0,"cp-lasso-bar"),r.TgZ(1,"div",0)(2,"a",1),r.NdJ("click",function(){return a.unstash()}),r._uU(3,"Unstash"),r.qZA(),r.TgZ(4,"a",2),r.NdJ("click",function(){return a.buildArrowChart()}),r._uU(5,"Generate Arrow Chart "),r.qZA(),r.TgZ(6,"a",2),r.NdJ("click",function(){return a.navToNetwork()}),r._uU(7,"Load Project in Network "),r.qZA(),r.TgZ(8,"a",2),r.NdJ("click",function(){return a.getProjectFromStorage()}),r._uU(9,"Load Proj From Storage"),r.qZA()())},dependencies:[rs.l],styles:[".meta-bar[_ngcontent-%COMP%]{padding-left:27px;padding-right:16px}.meta-bar[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{margin-top:20px}"]})}return e})(),outlet:"sidebar"}]}];let ls=(()=>{class e{static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=r.oAB({type:e});static#i=this.\u0275inj=r.cJS({imports:[z.Bz.forChild(ss),z.Bz]})}return e})();var cs=m(5547),ds=m(1281);let fs=(()=>{class e{static#e=this.\u0275fac=function(n){return new(n||e)};static#t=this.\u0275mod=r.oAB({type:e});static#i=this.\u0275inj=r.cJS({imports:[M.ez,ae.m,ls,b.JF,cs.S,W,ds.E,H.UX]})}return e})()},1339:(ut,he,m)=>{m.d(he,{Z:()=>r});class M{constructor(z){null!=z&&z.profile.planned_completion_date?this.endDate=new Date(z.profile.planned_completion_date).getTime():(this.endDate=null,this.duration=0,this.startDate=null),this.duration=z.profile.duration??0,this.activityId=z.profile.id;const p=new Date(z.profile.planned_completion_date??"").getTime()-864e5*this.duration;this.startDate=p}isOverlap(z,p){return!(!this.startDate||!this.endDate)&&(this.startDate<z&&this.endDate>p||this.startDate>z&&this.startDate<p||this.endDate>z&&this.endDate<p||this.startDate>z&&this.endDate<p)}}class ae{constructor(){this.name="",this.schedule=[]}scheduleActivity(z){let p=!0;for(const x of this.schedule)p=p&&!this.isOverlap(x,z);if(p){const x=new M(z);return this.schedule.push(x),!0}return!1}isOverlap(z,p){if(!p.profile.planned_completion_date||void 0===p.profile.duration)return!1;const x=new Date(p.profile.planned_completion_date),b=new Date(x.getTime()-864e5*p.profile.duration);return z.isOverlap(b.getTime(),x.getTime())}}var ce=m(9212);let r=(()=>{class W{constructor(){}sortDummiesLast(p){const x=p.activities.sort((k,U)=>k.profile.id-U.profile.id),b=x.filter(k=>!k.chartInfo.isDummy||null!==k.chartInfo.milestoneNodeId);x.filter(k=>k.chartInfo.isDummy&&null===k.chartInfo.milestoneNodeId).forEach(k=>b.push(k)),p.activities=b}reorderIds(p){p.activities.sort((k,U)=>k.profile.id-U.profile.id);const x=p.activities.filter(k=>null!==k.profile.planned_completion_date),b=p.activities.filter(k=>null===k.profile.planned_completion_date),j=x.concat(b);p.activities=j,p.activities.forEach((k,U)=>{k.profile.sortOrder=U}),p.activities.forEach((k,U)=>{k.profile.sortOrder=U})}sortById(p){p.activities.sort((x,b)=>x.profile.id-b.profile.id),p.activities.forEach(x=>x.assign.isStartBranch=!1)}sortByBranches(p){const b=p.activities.filter(J=>J.assign.phases.length>0).length>0;let j=[];const k=p.activities.filter(J=>null!==J.profile.planned_completion_date&&0!==J.profile.duration),U=p.activities.filter(J=>null===J.profile.planned_completion_date||0===J.profile.duration);if(this.sortActivitiesForResources(k),!0===b)p.phases.map(D=>D.name).filter((D,Y,ne)=>ne.indexOf(D)===Y).forEach(D=>{const Y=k.filter(qt=>void 0!==qt.assign.phases.find(Wt=>Wt.name===D)),ne=this.assignResources(Y);j.push(ne)});else{const J=this.assignResources(k);j.push(J)}j=j.filter(J=>void 0!==J),this.sortActivities(p,j,U)}sortActivities(p,x,b){const j=[];x.forEach(k=>{k.forEach(U=>{const J=U.schedule.sort((D,Y)=>(D.startDate??0)-(Y.startDate??0));let ee=0;J.forEach(D=>{const Y=p.activities.find(ne=>ne.profile.id===D.activityId);null!=Y&&(0===ee&&(Y.assign.isStartBranch=!0),j.push(Y)),ee++})})}),b.forEach(k=>{j.push(k)}),p.activities=j}getStartDate(p){return new Date(p.profile.planned_completion_date??"").getTime()-864e5*(p.profile.duration??0)}sortActivitiesForResources(p){return p.sort((x,b)=>this.getStartDate(x)-this.getStartDate(b)),p.sort((x,b)=>x.chartInfo.tf-b.chartInfo.tf),p}assignResources(p){if(!this.validateActivities(p))return[];const b=[];return p.forEach(j=>{!1===j.chartInfo.isDummy&&this.setResource(j,b)}),b}validateActivities(p){return p.filter(b=>this.validTimeframe(b)).length>0}validTimeframe(p){return!(null===p.profile.planned_completion_date||0===p.profile.duration)}setResource(p,x){if(0===x.length){const j=new ae;return j.name="Resource 1",j.scheduleActivity(p),void x.push(j)}let b=!1;if(x.forEach(j=>{if(!b){const k=j.scheduleActivity(p);b=b||k}}),!b){const j=new ae;j.name="Resource "+(x.length+1),j.scheduleActivity(p),x.push(j)}}static#e=this.\u0275fac=function(x){return new(x||W)};static#t=this.\u0275prov=ce.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})()},155:(ut,he,m)=>{m.d(he,{v:()=>x});var M=m(9862),ae=m(7398),ce=m(7631),r=m(9500),W=m(2119),z=m(3830),p=m(9212);let x=(()=>{class b{constructor(k,U){this.http=k,this.projectSerializer=U}compileMsProject(k){const U=new FormData;return U.append("file",k,k.name),this.http.post((0,r.Z)(ce.N.mappingApi,z.sv),U).pipe((0,ae.U)(J=>(new W.z).fromJson(J)))}compileArrowGraph(k){const U=JSON.stringify(k),J=(new M.WM).set("Content-Type","application/json");return this.http.post((0,r.Z)(ce.N.mappingApi,z.l0),U,{headers:J}).pipe((0,ae.U)(ee=>ee?this.projectSerializer.fromJson(ee):null))}autoAssignResourceCount(k,U=null){const ee=JSON.stringify({project:k,resourceCount:U}),D=(new M.WM).set("Content-Type","application/json");return this.http.post((0,r.Z)(ce.N.mappingApi,z.dO),ee,{headers:D}).pipe((0,ae.U)(Y=>Y?this.projectSerializer.fromJson(Y):null))}static#e=this.\u0275fac=function(U){return new(U||b)(p.LFG(M.eN),p.LFG(W.z))};static#t=this.\u0275prov=p.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})()},7649:(ut,he,m)=>{m.d(he,{h:()=>p});var M=m(9212),ae=m(8962),ce=m(9011),r=m(1339),W=m(7808),z=m(1568);let p=(()=>{class x{constructor(j,k,U,J,ee){this.nodeConstructor=j,this.riskCompiler=k,this.endNodesLocator=U,this.nodeArranger=J,this.activitySorter=ee}compileProjectFromFile(j){this.nodeConstructor.connectArrowsToNodes(j),this.endNodesLocator.setStartEndNodesFromLongestPath(j),this.riskCompiler.compileRiskProperties(j),this.nodeArranger.arrangeNodes(j),this.activitySorter.sortDummiesLast(j)}static#e=this.\u0275fac=function(k){return new(k||x)(M.LFG(ae.E),M.LFG(ce.r),M.LFG(W.d),M.LFG(z.g),M.LFG(r.Z))};static#t=this.\u0275prov=M.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}return x})()}}]);